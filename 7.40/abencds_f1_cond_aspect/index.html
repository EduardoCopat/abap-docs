


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abencds f1 cond aspect - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#this-functionality-is-not-yet-released-and-must-not-be-used" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abencds f1 cond aspect
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.40/abencds_f1_cond_aspect.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_dictionary" class="blue">ABAP Dictionary</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds" class="blue">ABAP CDS in ABAP Dictionary</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_authorizations" class="blue">ABAP CDS - Authorizations</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_f1_dcl_syntax" class="blue">ABAP CDS - DCL Statements</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_f1_define_role" class="blue">ABAP CDS - DEFINE ROLE</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_dcl_role_conditions" class="blue">ABAP CDS - DEFINE ROLE, condition</a>&#xA0;</small></p>
<h3 id="this-functionality-is-not-yet-released-and-must-not-be-used">This functionality is not yet released and must not be used</h3>
<h1 id="abap-cds-define-role-condition-for-assignment-roles">ABAP CDS - DEFINE ROLE, condition for Assignment Roles</h1>
<p><a name="@@ITOC@@SYNTAX_1"></a>
Other versions: 
 <s><i>7.31</i></s> | <b>7.40</b> | <a href="../../7.54/abencds_f1_cond_aspect">7.54</a></p>
<h2 id="syntax">Syntax</h2>
<p><pre><code class="hljs abap abap-docs-syntax-block">
<span class="qtext400">... <a href="../abencds_f1_path_expression" class="blue">path_expr</a> [<a href="../abencds_f1_dcl_cond_expression" class="blue">operator</a> ASPECT aspect_name] ...</span>
</code></pre></p>
<h3 id="effect">Effect</h3>
<p>Condition of the <span class="qtext400">WHERE</span> clause of the statement <a href="../abencds_f1_define_role" class="blue"><span class="qtext400">DEFINE ROLE</span></a> in the ABAP CDS DCL for
<a href="../abenassignment_role_glosry" class="grey" title="Glossary Entry">assignment roles</a>. Such a condition consists of an attribute defined using an association with the
<a href="../abencds_entity_glosry" class="grey" title="Glossary Entry">CDS entity</a> for which the
condition is defined, in a path expression <a href="../abencds_f1_path_expression" class="blue"><span class="qtext400">path_expr</span></a> in
<a href="../abencds_f1_syntax_reference" class="blue">DDL syntax</a>. When an assignment role is assigned
to a user in user administration, values are specified for the user that are valid for the attribute when the CDS entity is accessed using Open SQL.</p>
<p>Optionally, the attributes can be joined with an aspect <span class="qtext400">aspect_name</span> using
a logical <a href="../abencds_f1_dcl_cond_expression" class="blue"><span class="qtext400">operator</span></a>
in a relational expression. The aspect is defined using the statement <a href="../abencds_f1_define_aspect" class="blue"><span class="qtext400">DEFINE ASPECT</span></a> as part of an
<a href="../abencds_f1_define_accesspolicy" class="blue">access policy</a>. In this case, the default values defined in the aspect are generated when the role is assigned to a user in user administration.</p>
<p>If no aspect is specified, a user can use Open SQL to access the precise data in the CDS entity defined
for him or her when the role was assigned. If an aspect is specified, the valid data can also be controlled
by selecting the relational operator <a href="../abencds_f1_dcl_cond_expression" class="blue"><span class="qtext400">operator</span></a>.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>The equals sign <span class="qtext400">=</span> is usually used for the <a href="../abencds_f1_dcl_cond_expression" class="blue"><span class="qtext400">operator</span></a> too.</li>

<p></ul>
<ul></p>
<li>Within the definition of a role, conditions for assignment roles can be combined with
<a href="../abencds_f1_cond_literal" class="blue">literal conditions</a>, but not with <a href="../abencds_f1_cond_pfcg" class="blue">conditions for mapping roles</a>.</li>

<p></ul>
<ul></p>
<li>The result of a path expression <a href="../abencds_f1_path_expression" class="blue"><span class="qtext400">path_expr</span></a>
in DDL does not currently have quantity values. It is not possible to check whether a condition applies to all possible results. It is sufficient when the condition applies to the individual result.</li>

<p></ul>
<ul></p>
<li>Assignment roles cannot yet be used, since there is currently no tool for assigning them to users.</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Example of an assignment role with a comparison with an aspect.</p>
<p><span class="qtext400">@EndUserText.label: &apos;Role to view sales orders by country&apos; <br>ROLE demo_wd_by_country { <br>
&#xA0;&#xA0; grant SELECT on sacm_cds_snwd_so <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;WHERE tocustomer.toaddress.country = ASPECT demo_by_country;}</span></p>
<p>A user assigned the role <span class="qtext400">demo_wd_by_country</span> can access all sales orders
defined in the CDS entity <span class="qtext400">sacm_cds_snwd_so</span> for which the customer address is in a country defined by the aspect <span class="qtext400">demo_by_country</span>. A country specified using a
<a href="../abencds_f1_path_expression" class="blue">DDL path expression</a> is compared for equality with the aspect <span class="qtext400">demo_by_country</span>, which itself is defined as part of an
<a href="../abencds_f1_define_accesspolicy" class="blue">access policy</a> using <a href="../abencds_f1_define_aspect" class="blue"><span class="qtext400">DEFINE ASPECT</span></a>:</p>
<p><span class="qtext400">ASPECT demo_by_country as SELECT FROM sacm_cds_snwd_ad { country } <br>&#xA0;&#xA0;WHERE $User IN toemployee.login_name;</span></p>
<p>When a role is assigned to a user, Access Control Management (ACM) uses the association of the user
name with the association <span class="qtext400">toemployee</span> of the field <span class="qtext400">country</span>
in the view <span class="qtext400">sacm_cds_snwd_ad</span> to make an appropriate suggestion. When the
CDS entity is accessed, ACM grants access to the sales orders for which the country of the customer matches the value entered by the administrator for the aspect <span class="qtext400">demo_by_country</span>.</p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Example of an assignment role without a comparison with an aspect.</p>
<p><span class="qtext400">@EndUserText.label: &apos;Role to view sales orders by country&apos; <br>ROLE demo_wd_by_prodcat { <br>&#xA0;&#xA0;grant SELECT on sacm_cds_snwd_so WHERE toitems.toproduct.pd_cat; }</span></p>
<p>When the role is assigned to a user, a value or value range must be specified to determine which product
categories are used to restrict the number of accessible sales orders. The user dependency is specified by the assignment between the role and the user and not, as in the previous example, by an attribute of the user.</p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Example of an assignment role with a comparison with an aspect.</p>
<p><span class="qtext400">@EndUserText.label: &apos;Role to view SAP sales orders by country&apos; <br>ROLE demo_filter_sap_country { <br>
&#xA0;&#xA0;grant SELECT on sacm_cds_snwd_so WHERE <br>&#xA0;&#xA0;tocustomer[company_name=&apos;SAP AG&apos;].toaddress[postal_code=&apos;69190&apos;].country <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; = ASPECT demo_by_country; }</span></p>
<p>Alongside the restriction of the role using the aspect <span class="qtext400">demo_by_country</span>,
the path expression uses the association <span class="qtext400">tocustomer</span> to filter by the company name &quot;SAP AG&quot; and the association <span class="qtext400">toaddress</span> to filter by the postal code &quot;69190&quot;.</p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>In some cases it is advisable to remove the aspect from the role and only filter by a fixed value, for example all sales orders with a specific postal code. This check is not dependent on the current user.</p>
<p><span class="qtext400">@EndUserText.label: &apos;Role to view SAP sales orders&apos; <br>ROLE demo_filter_sap { <br>
&#xA0;&#xA0; grant SELECT on sacm_cds_snwd_so <br>&#xA0;&#xA0; WHERE tocustomer[company_name=&apos;SAP AG&apos;].toaddress[postal_code=&apos;69190&apos;]; }</span></p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>A further example of a role with a fixed value where sales orders are only displayed for customers with an address in the USA.</p>
<p><span class="qtext400">@EndUserText.label: &apos;Role to view sales orders for US customers&apos; <br>ROLE ZDEMO_FILTER_SAP { <br>
&#xA0;&#xA0; grant SELECT on sacm_cds_snwd_so <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;WHERE tocustomer.toaddress.country = &apos;US&apos;; }</span></p>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>