


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abapgroupby clause - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#select-group-by" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abapgroupby clause
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
    <nav class="md-nav" aria-label="Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extras" class="md-nav__link">
    Extras
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-1" class="md-nav__link">
    Addition 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_1" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-2" class="md-nav__link">
    Addition 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_2" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-3" class="md-nav__link">
    Addition 3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_3" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-note" class="md-nav__link">
    Security Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.40/abapgroupby_clause.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP - Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_language_external_data" class="blue">Processing External Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_sql" class="blue">ABAP Database Accesses</a>&#xA0;&#x2192;&#xA0;
<a href="../abenopensql" class="blue">Open SQL</a>&#xA0;&#x2192;&#xA0;
<a href="../abenopen_sql_reading" class="blue">Open SQL - Read Accesses</a>&#xA0;&#x2192;&#xA0;
<a href="../abapselect" class="blue">SELECT</a>&#xA0;</small></p>
<h1 id="select-group-by">SELECT - GROUP BY</h1>
<p><a href="../abapselect_shortref" class="blue">Short Reference</a>  </p>
<p><a name="@@GROUP BY@@SELECT@@"></a>
Other versions: 
 <a href="../../7.31/abapgroupby_clause">7.31</a> | <b>7.40</b> | <a href="../../7.54/abapgroupby_clause">7.54</a></p>
<h2 id="syntax">Syntax</h2>
<p><pre><code class="hljs abap abap-docs-syntax-block">
<span class="qtext">... GROUP BY { { col1, col2, ... <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <a href="../abapsql_expr" class="blue">sql_exp1</a>, <a href="../abapsql_expr" class="blue">sql_exp2</a> ... } <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; | (column_syntax) } ...</span> 
</code></pre></p>
<h3 id="extras">Extras</h3>
<p><a href="#!ABAP_ADDITION_1@1@" class="blue"> 1. <code style="display: inline;"><span class="qtext">... col1, col2, ...</span></code> </a> <br>
<br><a href="#!ABAP_ADDITION_2@2@" class="blue"> 2. <code style="display: inline;"><span class="qtext">... sql_exp1, sql_exp2, ...</span></code> </a> <br>
<br><a href="#!ABAP_ADDITION_3@3@" class="blue"> 3. <code style="display: inline;"><span class="qtext">... (column_syntax)</span></code> </a>  </p>
<h3 id="effect">Effect</h3>
<p>In the results set, the addition <code style="display: inline;"><span class="qtext">GROUP BY</span></code> combines groups of rows that have
the same content in the columns <code style="display: inline;"><span class="qtext">col1</span></code>, <code style="display: inline;"><span class="qtext">col2</span></code>, ...
or that have the same result in the SQL expressions <code style="display: inline;"><span class="qtext">sql_exp1</span></code>, <code style="display: inline;"><span class="qtext">sql_exp2</span></code>,
... into a single row. This can be specified either statically as a comma-separated list <code style="display: inline;"><span class="qtext">col1</span></code>,
<code style="display: inline;"><span class="qtext">col2</span></code> ..., <code style="display: inline;"><span class="qtext">sql_exp1</span></code>, <code style="display: inline;"><span class="qtext">sql_exp2</span></code>,
... or dynamically as a parenthesized data object <code style="display: inline;"><span class="qtext">column_syntax</span></code>. The order of the columns or SQL expression within the comma-separated list is not important.</p>
<p>The use of <code style="display: inline;"><span class="qtext">GROUP BY</span></code> has the prerequisite that <a href="../abapselect_clause" class="blue">
<code style="display: inline;"><span class="qtext">SELECT</span></code></a> only individual columns, not all the columns, are specified using
<code style="display: inline;"><span class="qtext">*</span></code>. If <code style="display: inline;"><span class="qtext">GROUP BY</span></code> is used, all columns that are specified directly after <code style="display: inline;"><span class="qtext">SELECT</span></code> or as an argument of an
<a href="../abapsql_expr" class="blue">SQL expression</a> and not as the argument of an
<a href="../abenaggregate_function_glosry" class="grey" title="Glossary Entry">aggregate function</a>
must be listed there. This means that columns not listed after <code style="display: inline;"><span class="qtext">GROUP BY</span></code> can
only be listed after <code style="display: inline;"><span class="qtext">SELECT</span></code> as the argument of an aggregate function. The
aggregate functions define how the content of these columns is determined in the combined row from the contents of all the rows of a group.</p>
<p>The addition <code style="display: inline;"><span class="qtext">GROUP BY</span></code> cannot be specified for
<a href="../abenpooled_table_glosry" class="grey" title="Glossary Entry">pooled tables</a> and
<a href="../abencluster_table_glosry" class="grey" title="Glossary Entry">cluster tables</a>. Columns specified after <code style="display: inline;"><span class="qtext">GROUP BY</span></code> cannot be of the type STRING, RAWSTRING, LCHR or LRAW.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>
With the use of <code style="display: inline;"><span class="qtext">GROUP BY</span></code>, the statement <code style="display: inline;"><span class="qtext">SELECT</span></code> avoids the <a href="../abensap_buffering_glosry" class="grey" title="Glossary Entry">SAP buffering</a>.
</li>

<li>
Using <code style="display: inline;"><span class="qtext">GROUP BY</span></code> and aggregate functions ensures that aggregates and groups
are assembled by the database system, not the application server. This can considerably reduce the volume of data that has to be transported from the database to the application server.
</li>

<li>
If <code style="display: inline;"><span class="qtext">GROUP BY</span></code> is used together with SQL expressions after <code style="display: inline;"><span class="qtext">SELECT</span></code>, the syntax check is performed in a
<a href="../abenopensql_strict_mode_740_sp08" class="blue">strict mode</a>, which handles the statement more strictly than the regular syntax check. <br>
</li>

<p></ul>
</div></p>
<h3 id="addition-1">Addition 1</h3>
<p><code style="display: inline;"><span class="qtext">... col1, col2, ...</span></code>   <br><!-- /A --></p>
<h3 id="effect_1">Effect</h3>
<p>Specifies individual columns <code style="display: inline;"><span class="qtext">col1</span></code>, <code style="display: inline;"><span class="qtext">col2</span></code>, ...,
directly whose content is used for grouping. The same column names must be specified as in the <a href="../abapselect_clause_cols" class="blue">
<code style="display: inline;"><span class="qtext">SELECT</span></code> list</a>. Alternative column names cannot be specified.  </p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>
I a column specified after <code style="display: inline;"><span class="qtext">GROUP BY</span></code> contains
<a href="../abennull_value_glosry" class="grey" title="Glossary Entry">null values</a> in the results set, these values are not part of the group of ABAP-specific initial values and create a distinct group instead.
</li>

<li>
If individual columns that are grouped in the <code style="display: inline;"><span class="qtext">SELECT</span></code> in an
<a href="../abapsql_expr" class="blue">SQL expression</a> are specified after <span class="qtext">GROUP
BY</span>, multiple groups can arise with the same result. To prevent this, the columns must be grouped after the expression.
</li>

<li>
When a comma-separated list is used, the syntax check is performed in a
<a href="../abenopensql_strict_mode_740_sp05" class="blue">strict mode</a>, which handles the statement more strictly than the regular syntax check.
</li>

<li>
Instead of using commas, blanks can be used to separate the columns <code style="display: inline;"><span class="qtext">col1</span></code>, <code style="display: inline;"><span class="qtext">col2</span></code>, ... specified in an
<a href="../abenopen_sql_lists_obsolete" class="blue">obsolete form</a>. Commas must be specified, however, in the
<a href="../abenopensql_strict_modes" class="blue">strict modes</a> of the syntax check from Release 7.40, SP05. <br>
</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The rows of database table <span class="lnkgrey">SFLIGHT</span> that have the same contents in column
CARRID are combined. The lowest and highest values in column PRICE are determined for each of these groups and placed into the combined row.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">DATA</span><span class="p">:</span> 
  <span class="k">BEGIN OF</span> <span class="nv">wa</span><span class="p">,</span> 
    <span class="nv">carrid</span>  <span class="k">TYPE </span><span class="nv">sflight</span><span class="o">-</span><span class="nv">carrid</span><span class="p">,</span> 
    <span class="k">minimum</span> <span class="k">TYPE </span><span class="nv">p</span> <span class="k">DECIMALS</span> <span class="mi">2</span><span class="p">,</span> 
    <span class="k">maximum</span> <span class="k">TYPE </span><span class="nv">p</span> <span class="k">DECIMALS</span> <span class="mi">2</span><span class="p">,</span> 
  <span class="k">END OF</span> <span class="nv">wa</span><span class="p">.</span> 

<span class="k">SELECT</span> <span class="nv">carrid</span><span class="p">,</span> <span class="nv">MIN</span><span class="p">(</span> <span class="nv">price</span> <span class="p">),</span> <span class="nv">MAX</span><span class="p">(</span> <span class="nv">price</span> <span class="p">)</span> 
       <span class="k">FROM</span> <span class="nv">sflight</span> 
       <span class="k">GROUP BY</span> <span class="nv">carrid</span> 
       <span class="k">INTO</span> <span class="p">(</span><span class="err">@</span><span class="nv">wa</span><span class="o">-</span><span class="nv">carrid</span><span class="p">,</span> <span class="err">@</span><span class="nv">wa</span><span class="o">-</span><span class="nv">minimum</span><span class="p">,</span> <span class="err">@</span><span class="nv">wa</span><span class="o">-</span><span class="nv">maximum</span><span class="p">).</span> 
  <span class="nv">cl_demo_output</span><span class="o">=&gt;</span><span class="nf">write_data</span><span class="p">(</span> <span class="nv">wa</span> <span class="p">).</span> 
<span class="k">ENDSELECT</span><span class="p">.</span> 
<span class="nv">cl_demo_output</span><span class="o">=&gt;</span><span class="nf">display</span><span class="p">(</span> <span class="p">).</span>
</code></pre></div>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>After entering any column of database table <span class="lnkgrey">SPFLI</span> the selected data is
organized according to this column, which means that similar entries are combined. In <code style="display: inline;"><span class="qtext">count</span></code>
the number of flight connections for the different values in column <code style="display: inline;"><span class="qtext">spflicol</span></code>
is determined. If , for example, &quot;CITYFROM&quot; is entered as <code style="display: inline;"><span class="qtext">spflicol</span></code>, then
the number of destinations for each departure city is determined in <code style="display: inline;"><span class="qtext">count</span></code>.
Various possible exceptions are handled in <code style="display: inline;"><span class="qtext">TRY</span></code> control structures. In particular, user input is tested for validity using a method of the class <span class="lnkgrey">CL_ABAP_DYN_PRG</span>.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">PARAMETERS</span> <span class="nv">spflicol</span> <span class="k">TYPE </span><span class="nv">c</span> <span class="k">LENGTH</span> <span class="mi">20</span><span class="p">.</span> 

<span class="k">DATA</span><span class="p">:</span> <span class="nv">dref</span> <span class="k">TYPE REF TO</span> <span class="k">data</span><span class="p">,</span> 
      <span class="nv">long_name</span> <span class="k">TYPE </span><span class="nv">string</span><span class="p">,</span> 
      <span class="nv">count</span>  <span class="k">TYPE </span><span class="nv">i</span><span class="p">,</span> 
      <span class="nv">fieldlist</span> <span class="k">TYPE </span><span class="nv">string</span><span class="p">.</span> 

<span class="k">FIELD-SYMBOLS</span> <span class="nv">&lt;fs&gt;</span> <span class="k">TYPE </span><span class="nv">any</span><span class="p">.</span> 

<span class="k">AT SELECTION-SCREEN</span><span class="p">.</span> 
  <span class="k">TRY</span><span class="p">.</span> 
      <span class="nv">cl_abap_dyn_prg</span><span class="o">=&gt;</span><span class="nf">check_column_name</span><span class="p">(</span> <span class="nv">spflicol</span> <span class="p">).</span> 
    <span class="k">CATCH</span> <span class="nv">cx_abap_invalid_name</span><span class="p">.</span> 
      <span class="k">MESSAGE</span> <span class="s1">&#39;Not allowed&#39;</span> <span class="nv">TYPE</span> <span class="s1">&#39;E&#39;</span><span class="p">.</span> 
  <span class="k">ENDTRY</span><span class="p">.</span> 

<span class="k">START-OF-SELECTION</span><span class="p">.</span> 
  <span class="k">TRY</span><span class="p">.</span> 
      <span class="nv">long_name</span> <span class="o">=</span> <span class="s1">&#39;spfli-&#39;</span> <span class="o">&amp;&amp;</span> <span class="nv">spflicol</span><span class="p">.</span> 
      <span class="k">CREATE DATA</span> <span class="nv">dref</span> <span class="nv">TYPE</span> <span class="p">(</span><span class="nv">long_name</span><span class="p">).</span> 
      <span class="k">ASSIGN</span> <span class="nv">dref-&gt;*</span> <span class="k">TO</span> <span class="nv">&lt;fs&gt;</span><span class="p">.</span> 
    <span class="k">CATCH</span> <span class="nv">cx_sy_create_data_error</span><span class="p">.</span> 
      <span class="k">MESSAGE</span> <span class="s1">&#39;Not allowed&#39;</span> <span class="nv">TYPE</span> <span class="s1">&#39;E&#39;</span><span class="p">.</span> 
  <span class="k">ENDTRY</span><span class="p">.</span> 

  <span class="nv">fieldlist</span> <span class="o">=</span> <span class="nv">spflicol</span> <span class="o">&amp;&amp;</span> <span class="s1">&#39;, count(*)&#39;</span><span class="p">.</span> 

  <span class="k">TRY</span><span class="p">.</span> 
      <span class="k">SELECT</span> <span class="nv">DISTINCT</span> <span class="p">(</span><span class="nv">fieldlist</span><span class="p">)</span> 
             <span class="k">FROM</span> <span class="nv">spfli</span> 
             <span class="k">GROUP BY</span> <span class="p">(</span><span class="nv">spflicol</span><span class="p">)</span> 
             <span class="k">INTO</span> <span class="p">(</span><span class="err">@</span><span class="nv">&lt;fs&gt;</span><span class="p">,</span> <span class="err">@</span><span class="nv">count</span><span class="p">).</span> 
        <span class="nv">cl_demo_output</span><span class="o">=&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="p">|{</span> <span class="nv">&lt;fs&gt;</span> <span class="p">}</span><span class="s1"> </span><span class="p">{</span> 
                                 <span class="nv">count</span> <span class="p">}|</span> <span class="p">).</span> 
      <span class="k">ENDSELECT</span><span class="p">.</span> 
      <span class="nv">cl_demo_output</span><span class="o">=&gt;</span><span class="nf">display</span><span class="p">(</span> <span class="p">).</span> 
    <span class="k">CATCH</span> <span class="nv">cx_sy_dynamic_osql_error</span><span class="p">.</span> 
      <span class="k">MESSAGE</span> <span class="s1">&#39;Not allowed&#39;</span> <span class="nv">TYPE</span> <span class="s1">&#39;E&#39;</span><span class="p">.</span> 
  <span class="k">ENDTRY</span><span class="p">.</span> 
</code></pre></div>
</div></p>
<h3 id="addition-2">Addition 2</h3>
<p><code style="display: inline;"><span class="qtext">... sql_exp1, sql_exp2, ...</span></code>   <br><!-- /A --></p>
<h3 id="effect_2">Effect</h3>
<p>Specifies SQL expressions whose result is used for grouping. Every
<a href="../abapsql_expr" class="blue">SQL expression</a> specified after <span class="qtext">GROUP
BY</span> must also be specified somewhere in the <a href="../abapselect_clause_cols" class="blue"><code style="display: inline;"><span class="qtext">SELECT</span></code> list</a>, with identical spelling.</p>
<p>When a column is used as the operand of an SQL expression after <code style="display: inline;"><span class="qtext">GROUP BY</span></code>,
the effect on the interaction with the <code style="display: inline;"><span class="qtext">SELECT</span></code> list is the same as specifying
the column individually. A column that is not the argument of an aggregate function in the <code style="display: inline;"><span class="qtext">SELECT</span></code>
list can be specified either individually or as the operand of an SQL expression after <span class="qtext">GROUP
BY</span>. If a column like this is specified as the operand of an SQL expression, it does not need to be specified individually.</p>
<p>All <a href="../abapsql_expr" class="blue">SQL expressions</a> possible in the <code style="display: inline;"><span class="qtext">SELECT</span></code> list can be specified after <code style="display: inline;"><span class="qtext">GROUP BY</span></code> with the following restrictions:</p>
<ul>

<li>
Each expression must contain at least one column of a database table or a view as its operand.
</li>
<li>
The expressions cannot contain any <a href="../abenopen_sql_host_variables" class="blue">host variables</a> or ABAP literals as operands, with the exception of statically identifiable constants or literals with the
<br></li>

</ul>

<ul class="circlem2">

<li>data type <code style="display: inline;"><span class="qtext">i</span></code> with any content, but not as an argument of the
<a href="../abensql_arith_func" class="blue">arithmetic functions</a> or of the function <a href="../abensql_coalesce" class="blue"><code style="display: inline;"><span class="qtext">coalesce</span></code></a>.</li>

</ul>

<ul class="circlem2">

<li>data type <code style="display: inline;"><span class="qtext">c</span></code> with length 1 and the content &quot;X&quot; or a blank, but not as an argument of the function <a href="../abensql_coalesce" class="blue"><code style="display: inline;"><span class="qtext">coalesce</span></code></a>.</li>

</ul>

<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>
The spelling of the expressions after <code style="display: inline;"><span class="qtext">GROUP BY</span></code> and in the <code style="display: inline;"><span class="qtext">SELECT</span></code>
list must be identical. An identical result is not enough. An expression <span class="qtext">col1 +
col2</span> after <code style="display: inline;"><span class="qtext">GROUP BY</span></code> does not have the same semantics as an expression
<code style="display: inline;"><span class="qtext">col2 + col1</span></code> in the <code style="display: inline;"><span class="qtext">SELECT</span></code> list. An alternative column name specified in the <code style="display: inline;"><span class="qtext">SELECT</span></code> list, however, is ignored.
</li>

<li>
An SQL expression that is specified more than once outside of an aggregate expression in the <code style="display: inline;"><span class="qtext">SELECT</span></code>
list does not need to be specified more than once after <code style="display: inline;"><span class="qtext">GROUP BY</span></code>. An SQL
expression can be specified more than once after <code style="display: inline;"><span class="qtext">GROUP BY</span></code>, but has the same effect has specifying the expression once.
</li>

<li>
The alternative column name usually specified in the <code style="display: inline;"><span class="qtext">SELECT</span></code> list for an expression, cannot be specified after <code style="display: inline;"><span class="qtext">GROUP BY</span></code> instead of the expression in question.
</li>

<li>
If SQL expressions are specified after <code style="display: inline;"><span class="qtext">GROUP BY</span></code>, the syntax check is performed in a
<a href="../abenopensql_strict_mode_740_sp08" class="blue">strict mode</a>, which handles the statement more strictly than the regular syntax check.
<br></li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>See <a href="../abensql_expr_with_group_by_abexa" class="blue">SQL Expressions, Use with <code style="display: inline;"><span class="qtext">GROUP BY</span></code></a>.  </p>
</div>

<h3 id="addition-3">Addition 3</h3>
<p><code style="display: inline;"><span class="qtext">... (column_syntax)</span></code>   <br><!-- /A --></p>
<h3 id="effect_3">Effect</h3>
<p>As an alternative to specifying columns statically, a parenthesized data object <code style="display: inline;"><span class="qtext">column_syntax</span></code>
can be specified, which either contains the syntax of the list of columns or is initial when the statement
is executed. The same applies to <code style="display: inline;"><span class="qtext">column_syntax</span></code> as when specifying columns dynamically as a <a href="../abapselect_clause_cols" class="blue"><code style="display: inline;"><span class="qtext">SELECT</span></code> list</a>.</p>
<p>If the content of <code style="display: inline;"><span class="qtext">column_syntax</span></code> initial, either all the rows or no rows at
all are grouped together. The columns after <code style="display: inline;"><span class="qtext">SELECT</span></code> must then be listed either
solely as arguments of aggregate functions or only directly. If not, this would raise a handleable exception CX_SY_OPEN_SQL_DB.  </p>
<h3 id="security-note">Security Note</h3>
<p>If used wrongly, dynamic programming techniques can present a serious security risk. Any dynamic content
that is passed to a program from the outside must be checked thoroughly or escaped before being used
in dynamic statements. This can be done using the system class <span class="lnkgrey">CL_ABAP_DYN_PRG</span> or the predefined function <a href="../abenescape_functions" class="blue"><code style="display: inline;"><span class="qtext">escape</span></code></a>. See
<a href="../abensql_inj_dyn_tokens_scrty" class="blue">SQL Injections Using Dynamic Tokens</a>.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>
The conditions for specifying SQL expressions after <code style="display: inline;"><span class="qtext">GROUP BY</span></code> are particularly
relevant for dynamic tokens and a check at runtime verifies whether the expressions match those in the <code style="display: inline;"><span class="qtext">SELECT</span></code> list.
</li>

<li>
No host variables or ABAP literals can usually be specified in SQL expressions in <code style="display: inline;"><span class="qtext">column_syntax</span></code>.
</li>

<li>
The class <span class="lnkgrey">CL_ABAP_DYN_PRG</span> contains methods that support dynamically specified columns when created correctly and securely.
<br></li>

<p></ul>
<ul></p>
<li>The literals of the dynamically specified Open SQL statements can span multiple rows of a token specified dynamically as an internal table.</li>

<p></ul>
<ul></p>
<li>When specified dynamically, Open SQL statements can contain the comment characters <a href="../abencomment" class="blue">
<code style="display: inline;"><span class="qtext">*</span></code></a> and <a href="../abencomment" class="blue"><code style="display: inline;"><span class="qtext">&quot;</span></code></a> as follows:</li>

<p></ul>
<ul class="circlem2"></p>
<li>In a dynamic token specified as a character-like data object, all content is ignored from the first comment character <code style="display: inline;"><span class="qtext">&quot;</span></code>.</li>

<p></ul>
<ul class="circlem2"></p>
<li>In a dynamic token specified as an internal table, all rows are ignored that start with the comment
character <code style="display: inline;"><span class="qtext">*</span></code>. In the row, all content is ignored from the first comment character <code style="display: inline;"><span class="qtext">&quot;</span></code>.</li>

<p></ul>
<dd>
Comment characters placed within literals are, however, part of the literal.  </p>
</dd>

</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>