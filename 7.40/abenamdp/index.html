


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>AMDP - ABAP Managed Database Procedures - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#amdp-abap-managed-database-procedures" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              AMDP - ABAP Managed Database Procedures
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="ABAP docs" class="md-nav__link">
      ABAP docs
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#programming-guideline" class="md-nav__link">
    Programming Guideline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amdp-classes" class="md-nav__link">
    AMDP Classes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amdp-methods" class="md-nav__link">
    AMDP Methods
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amdp-polymorphism" class="md-nav__link">
    AMDP Polymorphism
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amdp-calls" class="md-nav__link">
    AMDP Calls
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amdp-badis" class="md-nav__link">
    AMDP BAdIs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amdp-database-connections" class="md-nav__link">
    AMDP Database Connections
  </a>
  
    <nav class="md-nav" aria-label="AMDP Database Connections">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#continue" class="md-nav__link">
    Continue
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.40/abenamdp.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="amdp-abap-managed-database-procedures">AMDP - ABAP Managed Database Procedures</h1>
<p>ABAP Managed Database Procedures are a framework for managing and calling
<a href="../abenstored_procedure_glosry" class="grey" title="Glossary Entry">stored procedures</a> or
<a href="../abendatabase_procedure_glosry" class="grey" title="Glossary Entry">database procedures</a> in
<a href="../abenabap_personality_glosry" class="grey" title="Glossary Entry">AS ABAP</a>. An ABAP Managed Database Procedure (or
<a href="../abenamdp_procedure_glosry" class="grey" title="Glossary Entry">AMDP procedure</a>) is a procedure written in a database-specific language (
<a href="../abennative_sql_glosry" class="grey" title="Glossary Entry">Native SQL</a>,
<a href="../abensql_script_glosry" class="grey" title="Glossary Entry">SQL Script</a>,
<a href="../abenllang_glosry" class="grey" title="Glossary Entry">L</a>,  ...) implemented in an
<a href="../abenamdp_method_glosry" class="grey" title="Glossary Entry">AMDP method</a> of an <a href="../abenamdp_class_glosry" class="grey" title="Glossary Entry">AMDP</a> class.</p>
<ul>

<li><a href="#@@ITOC@@AMDPCLASSES_1" class="blue">AMDP Classes</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@AMDPMETHODS_2" class="blue">AMDP Methods</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@AMDPPOLYMORPHISM_3" class="blue">AMDP Polymorphism</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@AMDPCALLS_4" class="blue">AMDP Calls</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@AMDPBADIS_5" class="blue">AMDP BAdIs</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@AMDPDATABASECONNECTIONS_6" class="blue">AMDP Database Connections</a></li>

</ul>

<p><s><i>7.31</i></s> <b>7.40</b> <a href="../abenamdp">7.54</a></p>
<p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP - Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_language_external_data" class="blue">Processing External Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_sql" class="blue">ABAP Database Accesses</a>&#xA0;&#x2192;&#xA0;
<a href="../abennative_sql" class="blue">Native SQL</a>&#xA0;</small>
<br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>The <a href="../abenadt_glosry" class="grey" title="Glossary Entry">ABAP Development Tools (ADT)</a> are better suited for the editing of database procedures in AMDP methods than
<a href="../abenclass_builder_glosry" class="grey" title="Glossary Entry">Class Builder</a> in
<a href="../abenabap_workbench_glosry" class="grey" title="Glossary Entry">ABAP Workbench</a>. This means that AMDP classes can only be edited with the ABAP Development Tools (ADT).</li>

<p></ul>
<ul></p>
<li>The AS ABAP logged on to the database system using its work processes requires the correct authorizations
to manage database procedures using AMDP. Missing authorizations can be detected using transaction <span class="lnkgrey">SICK</span>.</li>

<p></ul>
<ul></p>
<li>If the current database of an AS ABAP is an SAP HANA database and ABAP programs access
<a href="../abensql_script_procedure_glosry" class="grey" title="Glossary Entry">SQL
Script procedures</a> used to swap out code from ABAP programs to the database, ABAP Managed Database Procedures are the replacement technology for
<a href="../abensql_script" class="blue">database procedure proxies</a>. Database procedure proxies
are still recommended when using a secondary database connection to access SQL Script procedures that exist in a different SAP HANA database.</li>

<p></ul>
<ul></p>
<li>Currently, AMDP only supports database procedures from the SAP HANA database. In principle, however, AMDP is designed so that stored procedures from other database systems can also be supported.</li>

<p></ul>
</div></p>
<h3 id="programming-guideline">Programming Guideline</h3>
<p>The programming guideline <a href="../abendatabase_access_guidl" class="lnkpurple" title="Guideline">Use
Open SQL</a> is particularly relevant for AMDP too. The use of AMDP is not recommended if the same task can be achieved using Open SQL (or
<a href="../abencds" class="blue">ABAP CDS</a>). The example
<a href="../abenamdp_vs_open_sql_abexa" class="blue">AMDP, Comparison with Open SQL</a> demonstrates
how a database access not programmed well in Open SQL can often be optimized using an improved use of
Open SQL, removing the need to use AMDP in these cases. AMDP should be used only if it enables database-specific functions to be accessed that do not exist in Open SQL (see the example for
<a href="../abensql_script_curr_conv_abexa" class="blue">Currency Conversion</a>) or if large process
flows or analyses that incur repeated transports of large amounts of data between the database and the application server can be swapped out.</p>
<p><a name="@@ITOC@@AMDPCLASSES_1"></a></p>
<h2 id="amdp-classes">AMDP Classes</h2>
<p>An AMDP class is a global class in the <a href="../abenclass_library_glosry" class="grey" title="Glossary Entry">Class Library</a> that contains one or more of the following
<a href="../abentag_interface_glosry" class="grey" title="Glossary Entry">tag interfaces</a>:</p>
<ul>

<li><span class="lnkgrey">IF_AMDP_MARKER_HDB</span> for the SAP HANA database</li>

</ul>

<p>The names of the interfaces all start with IF_AMDP_MARKER and a suffix indicates the database system for which the ABAP Managed Database Procedures can be implemented in AMDP methods of the class.</p>
<p>An AMDP class can contain both regular methods and AMDP methods. It can contain one or more AMDP methods for each database system specified by a tag interface.</p>
<p><a name="@@ITOC@@AMDPMETHODS_2"></a></p>
<h2 id="amdp-methods">AMDP Methods</h2>
<p>An AMDP is declared in an AMDP class like a regular
<a href="../abenstatic_method_glosry" class="grey" title="Glossary Entry">static method</a> or
<a href="../abeninstance_method_glosry" class="grey" title="Glossary Entry">instance method</a> in any
<a href="../abenvisibility_section_glosry" class="grey" title="Glossary Entry">visibility section</a>. An AMDP method cannot be identified as an AMDP method in the declaration section of the class.</p>
<p>The following restrictions apply, however, with respect to the <a href="../abenparameter_interface_glosry" class="grey" title="Glossary Entry">parameter interface</a>:</p>
<ul>

<li>The typing of the parameters cannot be <a href="../abengeneric_typing_glosry" class="grey" title="Glossary Entry">generic</a>. Only
<a href="../abenelementary_data_type_glosry" class="grey" title="Glossary Entry">elementary data types</a> and
<a href="../abentable_type_glosry" class="grey" title="Glossary Entry">table types</a> with a structured row type can be used. The row type of a tabular type can only contain elementary data types as components</li>

</ul>

<ul>

<li>A parameter cannot be typed with a data type that references one of the obsolete predefined data types
<a href="../abenddic_builtin_types" class="blue">DF16_SCL</a> or <a href="../abenddic_builtin_types" class="blue">DF34_SCL</a> in ABAP Dictionary.</li>

</ul>

<ul>

<li>The parameters must be declared using <a href="../abapmethods_parameters" class="blue"><code style="display: inline;"><span class="qtext">VALUE</span></code></a> for
<a href="../abenpass_by_value_glosry" class="grey" title="Glossary Entry">pass by value</a>.
<a href="../abenpass_by_reference_glosry" class="grey" title="Glossary Entry">Pass by reference</a> is not permitted.</li>

</ul>

<ul>

<li><a href="../abenreturn_value_glosry" class="grey" title="Glossary Entry">Return
values</a> cannot be declared using <a href="../abapmethods_functional" class="blue"><code style="display: inline;"><span class="qtext">RETURNING</span></code></a>.</li>

</ul>

<ul>

<li>Only <a href="../abeninput_parameter_glosry" class="grey" title="Glossary Entry">input parameters</a>
can be flagged as optional and every optional parameter must have a replacement parameter declared using
<a href="../abapmethods_parameters" class="blue"><code style="display: inline;"><span class="qtext">DEFAULT</span></code></a>. Only literals or constants can be specified as replacement parameters.</li>

</ul>

<ul>

<li>Parameter names:</li>

</ul>

<ul class="circlem2">

<li>Parameter names cannot start with the characters &quot;%_&quot;.</li>

</ul>

<ul class="circlem2">

<li>The parameter name <code style="display: inline;"><span class="qtext">connection</span></code> can only be used for an input parameter
of type <span class="lnkgrey">DBCON_NAME</span>, if the name of the database connection can be passed to the input parameter.</li>

</ul>

<ul class="circlem2">

<li>The parameter name <code style="display: inline;"><span class="qtext">client</span></code> is reserved for future enhancements.</li>

</ul>

<ul class="circlem2">

<li>The parameter name <code style="display: inline;"><span class="qtext">endmethod</span></code> is not permitted.</li>

</ul>

<ul>

<li>With <a href="../abapmethods_general" class="blue"><code style="display: inline;"><span class="qtext">RAISING</span></code></a> the exception classed listed under
<a href="../abenamdp_exceptions" class="blue">AMDP - exception classes</a> can be specified to handle
these classes for a call. Other exceptions cannot be handled. No non-class-based exceptions can be created using the addition <a href="../abapmethods_general" class="blue"><code style="display: inline;"><span class="qtext">EXCEPTIONS</span></code></a>.</li>

</ul>

<p>The following restrictions apply to method implementation:</p>
<ul>

<li><a href="../abenddl_glosry" class="grey" title="Glossary Entry">DDL</a> statements are not permitted for creating, changing or deleting database objects.</li>

</ul>

<ul>

<li>Local temporary database objects cannot be accessed.</li>

</ul>

<ul>

<li><a href="../abendb_commit" class="blue">Database commit</a>s and
<a href="../abendb_rollback" class="blue">rollbacks</a> cannot be executed. The statements <span class="qtext400">COMMIT</span> and <span class="qtext400">ROLLBACK</span> in particular are not permitted.
<a href="../abenluw_glosry" class="grey" title="Glossary Entry">LUWs</a> should always be handled in the ABAP program, to ensure data consistency between procedures.</li>

</ul>

<ul>

<li>Write access to database tables, for which <a href="../abensap_buffering_glosry" class="grey" title="Glossary Entry">SAP buffering</a> is activated, is not permitted.</li>

</ul>

<ul>

<li>AMDP methods do not have any <a href="../abenimplicit_enh_points" class="blue">implicit enhancement options</a>.</li>

</ul>

<p>An AMDP method is indicated as an AMDP method in the implementation section of the class using the addition
<a href="../abapmethod_by_db_proc" class="blue"><code style="display: inline;"><span class="qtext">BY DATABASE PROCEDURE</span></code></a>
of the statement <code style="display: inline;"><span class="qtext">METHOD</span></code>. At the same time, the database system where the
method is used and the programming language of the database system used to implement the method are
also defined. Furthermore, the database objects of the current database schema must be declared that
are accessed in the AMDP. If possible, the syntax check is performed on the basis of this information. An AMDP method cannot be empty.</p>
<p>Further restrictions may apply depending on the programming language of the database system and these are discussed in the corresponding sections:</p>
<ul>

<li><a href="../abenamdp_hdb_sqlscript" class="blue">SQL Script for the SAP HANA Database</a></li>

</ul>

<ul>

<li><a href="../abenamdp_hdb_l_internal" class="blue">L for the SAP HANA Database</a> (used internally at SAP only)</li>

</ul>

<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>It is strongly recommended that only the character set 7-bit-ASCII is used when implementing an AMDP method.</p>
<p><a name="@@ITOC@@AMDPPOLYMORPHISM_3"></a>
</div></p>
<h2 id="amdp-polymorphism">AMDP Polymorphism</h2>
<p>Both interface methods and redefined methods inherited from superclasses can become AMDP in the implementation,
provided that the above prerequisites are met and the class contains the appropriate tag interface.
If a subclass contains a tag interface, this also applies to its subclasses. If an interface contains a tag interface, this also applies to classes that implement this interface.</p>
<p><a href="../abenconstructor_glosry" class="grey" title="Glossary Entry">Constructors</a> cannot be implemented as AMDP methods.</p>
<p><a name="@@ITOC@@AMDPCALLS_4"></a></p>
<h2 id="amdp-calls">AMDP Calls</h2>
<p>An AMDP method is called in an ABAP program in the same way as any other ABAP Objects method. This requires,
however, that the central database of the current AS ABAP is managed by the database system for which the AMDP method is implemented. If not, a runtime error is produced.</p>
<p>Before the method is called for the first time, the ABAP runtime environment creates the procedure implemented
in the AMDP method in the database system of the central AS ABAP database or updates any existing database procedure. Execution is performed in the database system and the interface parameters are passed from the
<a href="../abennative_sql_interface_glosry" class="grey" title="Glossary Entry">Native SQL interface</a> to the database system or applied by the database system itself.</p>
<p>Once a database procedure (managed using AMDP) has been created on the database, this procedure can
be called from other database procedures using the database syntax (provided that this is permitted
by the database). These can be AMDP procedures (or database procedures) that are not managed by AMDP.
If an AMDP procedure calls another procedure, this procedure must be specified after addition <a href="../abapmethod_by_db_proc" class="blue"><code style="display: inline;"><span class="qtext">USING</span></code></a> of the calling method.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>It is recommended that AMDP methods that are not to be called from the AMDP methods of other classes
are created as private methods of an AMDP class and that they are called in a regular method (specified
by the central AS ABAP database. In database systems that do not support AMDP, a regular method can be created using an alternative implementation in Open SQL or Native SQL.</li>

<p></ul>
<ul></p>
<li>For the calling program of an AMDP method from ABAP, it is usually clear whether the method is an
AMDP method and in which database system it is executed. For this reason, the implementation of the
method must ensure that the interface parameters are returned in a format expected by the calling program.
This is particularly important for ABAP types that do not have a corresponding type in the type system
of the database system. These types must either be forbidden in the interface or an appropriate casting must take place in the procedure.</li>

<p></ul>
<ul></p>
<li>Generally, the database procedures managed using AMDP are called using AMDP methods only. If, in
exceptional cases, these database procedures are called from other database procedures not managed using
AMDP, all required database objects must be made available. This can be done using the public methods of the documented class <span class="lnkgrey">CL_AMDP_RUNTIME_SERVICES</span>.</li>

<p></ul>
<a name="@@ITOC@@AMDPBADIS_5"></a>
</div></p>
<h2 id="amdp-badis">AMDP BAdIs</h2>
<p>In addition to the option of implementing <a href="../abenbadi_method_glosry" class="grey" title="Glossary Entry">BAdI methods</a> of a normal
<a href="../abenbadi_glosry" class="grey" title="Glossary Entry">BAdI</a> as AMDP methods and making
these methods callable by using <a href="../abapcall_badi" class="blue"><code style="display: inline;"><span class="qtext">CALL BADI</span></code></a>, it is also possible to create special AMDP BAdIs. A AMDP BAdI is a BAdI, which is labeled accordingly in
<a href="../abenbadi_builder_glosry" class="grey" title="Glossary Entry">BAdI Builder</a> and has the following properties:</p>
<ul>

<li>Definition and implementation</li>

</ul>

<ul class="circlem2">

<li>An AMDP BAdI does not currently have any filters.</li>

</ul>

<ul class="circlem2">

<li>Fallback <a href="../abenbadi_implement_class_glosry" class="grey" title="Glossary Entry">BAdI implementation classes</a> must be specified.</li>

</ul>

<ul class="circlem2">

<li>Every <a href="../abenbadi_method_glosry" class="grey" title="Glossary Entry">BAdI method</a> of an AMDP BAdI must be an AMDP method.</li>

</ul>

<ul class="circlem2">

<li>Every AMDP method must be implemented for the same database system.</li>

</ul>

<ul>

<li>Call BAdI methods</li>

</ul>

<ul class="circlem2">

<li>The AMDP methods of an AMDP BAdI can be called like normal
<a href="../abenbadi_method_glosry" class="grey" title="Glossary Entry">BAdl methods</a> with <a href="../abapget_badi" class="blue">
<code style="display: inline;"><span class="qtext">GET BADI</span></code></a> and <a href="../abapcall_badi" class="blue"><code style="display: inline;"><span class="qtext">CALL BADI</span></code></a>.</li>

</ul>

<ul class="circlem2">

<li>The AMDP procedures created on the database of an AMDP BAdI can be called here (like all AMDP procedures) from other AMDP methods in the same database system. These AMDP procedures are specified using the name of a
<a href="../abenbadi_implement_class_glosry" class="grey" title="Glossary Entry">BAdI implementation
class</a>. The usage must be declared after the addition <a href="../abapmethod_by_db_proc" class="blue"><code style="display: inline;"><span class="qtext">USING</span></code></a> of the calling method.</li>

</ul>

<dd>
In both cases, execution is performed in accordance with the rules of the
<a href="../abenenhancement_concept_glosry" class="grey" title="Glossary Entry">enhancement concept</a> and the corresponding switch in
<a href="../abenswitch_framework_glosry" class="grey" title="Glossary Entry">Switch Framework</a>. If no enhancement is available, the mandatory fallback implementation class is implemented.
</dd>

<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>AMDP BAdIs are primarily used to execute calls of AMDP procedures from AMDP procedures - in accordance
with the rules of the switch-based enhancement concept. Although switch-based calls of AMDP methods
can be made from ABAP programs without AMDP BAdIs, these calls can only be made from AMDP procedures
for AMDP methods of AMDP BAdIs. The AMDP framework ensures that the relevant database procedure for the current database switch setting is created on the database.</p>
<p><a name="@@ITOC@@AMDPDATABASECONNECTIONS_6"></a>
</div></p>
<h2 id="amdp-database-connections">AMDP Database Connections</h2>
<p>The implementation of an AMDP method is always executed on the SAP standard database. By default, the call is made using the standard database connection. The
<a href="../abendatabase_connection_glosry" class="grey" title="Glossary Entry">database connection</a> to the SAP standard database can also be specified explicitly (optional), which enables the use of
<a href="../abenopensql_multiconnect" class="blue">service connections</a>.</p>
<p>To specify the database connection explicitly, an input parameter (with the predefined name <code style="display: inline;"><span class="qtext">connection</span></code>)
can be declared for an AMDP method. This parameter must be of type <span class="lnkgrey">DBCON_NAME</span>.
When the AMDP method is called, the following values can be passed to the parameter to specify the database connection:</p>
<ul>

<li>When the initial value or the value &quot;DEFAULT&quot; is passed, the standard database connection is used.</li>

</ul>

<ul>

<li>When a name &quot;R/3*name&quot; is passed, which consists of the prefix &quot;R/3*&quot; (uppercase characters) and
a user-defined name &quot;name&quot; (case sensitive), a service connection of this name is used in open SQL (similar
to when addition <code style="display: inline;"><span class="qtext">CONNECTION</span></code> is used). The names &quot;R/3*AMDP_SYNC&quot; and &quot;R/3*AMDP_ADBC&quot; are exceptions. They are used by the AMDP framework itself.</li>

</ul>

<p>All other names raise an exception.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>The parameter <code style="display: inline;"><span class="qtext">connection</span></code> cannot be used to implement the AMDP method.</li>

<p></ul>
<ul></p>
<li>Service connections for the SAP standard database are useful for performing operations in a <a href="../abendb_transaction" class="blue">database LUW</a>, which does not depend on the LUW standard connection.</li>

<p></ul>
<ul></p>
<li>A maximum of 16 database connections can be opened at the same time for a work process. This means a maximum of 15 service connections is possible, in addition to the standard database connection.</li>

<p></ul>
</div></p>
<h3 id="examples">Examples</h3>
<p>See <a href="../abenamdp_abexas" class="blue">AMDP - Examples</a>.</p>
<h3 id="continue">Continue</h3>
<p><a href="../abapmethod_by_db_proc" class="blue">METHOD - BY DATABASE PROCEDURE</a></p>
<p><a href="../abenamdp_exceptions" class="blue">AMDP - Exception Classes</a></p>
<p><a href="../abenamdp_abexas" class="blue">AMDP - Examples</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../abenamc_send_abexa/" title="AMC, Sending Messages" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                AMC, Sending Messages
              </div>
            </div>
          </a>
        
        
          <a href="../abenamdp_abexa/" title="AMDP, Implementation of a SQLScript Procedure" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                AMDP, Implementation of a SQLScript Procedure
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>