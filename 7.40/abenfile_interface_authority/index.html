


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Automatic Authorization Checks - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#automatic-authorization-checks" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Automatic Authorization Checks
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="ABAP docs" class="md-nav__link">
      ABAP docs
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#checks-in-the-operating-system" class="md-nav__link">
    Checks in the Operating System
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#program-independent-checks-on-access-rights" class="md-nav__link">
    Program-Independent Checks on Access Rights
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authorization-checks-for-special-files" class="md-nav__link">
    Authorization Checks for Special Files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authorization-checks-for-users-and-programs-for-individual-files" class="md-nav__link">
    Authorization Checks for Users and Programs for Individual Files
  </a>
  
    <nav class="md-nav" aria-label="Authorization Checks for Users and Programs for Individual Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delete" class="md-nav__link">
    Delete
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.40/abenfile_interface_authority.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="automatic-authorization-checks">Automatic Authorization Checks</h1>
<p>The following authorization checks take place automatically during data access:</p>
<ul>

<li>Checks in the Operating System</li>

</ul>

<ul>

<li>Program-Independent Checks on Access Rights</li>

</ul>

<ul>

<li>Authorization Check for Special Files</li>

</ul>

<ul>

<li>Authorization Checks for Users and Programs for Individual Files</li>

</ul>

<p><a name="@@ITOC@@CHECKSINTHEOPERATINGSYSTEM_1"></a>
<a href="../abenfile_interface_authority">7.31</a> <b>7.40</b> <a href="../abenfile_interface_authority">7.54</a></p>
<p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP - Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_language_external_data" class="blue">Processing External Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_language_files" class="blue">ABAP File Interface</a>&#xA0;&#x2192;&#xA0;
<a href="../abendataset_auth" class="blue">Authorization for File Access</a>&#xA0;</small></p>
<h2 id="checks-in-the-operating-system">Checks in the Operating System</h2>
<p>From the point of view of the application server&apos;s operating system, all file accesses are carried out by the
<a href="../abensap_nw_abap_glosry" class="grey" title="Glossary Entry">AS ABAP</a>. As a consequence, the user of an operating system in an
<a href="../abensap_nw_abap_glosry" class="grey" title="Glossary Entry">AS ABAP</a> must have the authority
to read and write to all files and directories that are handled by the ABAP file interface. If this
authorization does not exist, the file interface statements can only be partially carried out, or not
at all. If a statement cannot be executed because of lack of authorization in the operating system, the return value <code style="display: inline;"><span class="qtext">sy-subrc</span></code> is set to not equal to 0.</p>
<p><a name="@@ITOC@@PROGRAMINDEPENDENTCHECKSONACCESSRIGHTS_2"></a></p>
<h2 id="program-independent-checks-on-access-rights">Program-Independent Checks on Access Rights</h2>
<p>For access to files using the statements <a href="../abapopen_dataset" class="blue"> <span class="qtext">OPEN
DATASET</span></a>, <a href="../abapread_dataset" class="blue"><code style="display: inline;"><span class="qtext">READ DATASET</span></code></a>,
<a href="../abaptransfer" class="blue"><code style="display: inline;"><span class="qtext">TRANSFER</span></code></a>, and <a href="../abapdelete_dataset" class="blue">
<code style="display: inline;"><span class="qtext">DELETE DATASET</span></code></a>, a verification check of the entry in the database table
<span class="lnkgrey">SPTH</span> is carried out automatically. The entries in the database table SPTH control the general read and write accesses from ABAP programs to files and whether files should be backed up or not.</p>
<p>In the database table SPTH, read and write accesses can be generally forbidden for generic, specifiable files, independent of the
<a href="../abenauthorization_object_glosry" class="grey" title="Glossary Entry">authorization objects</a>.
For the remaining files (those that are generally allowed to be accessed for read or write according
to the database table SPTH), authorization checks can be carried out on the basis of authorization objects.
In the database table <span class="lnkgrey">SPTH</span>, authorization groups from the table <span class="lnkgrey">SPTHB</span>
(texts in <span class="lnkgrey">SPTHT</span>, shared view <span class="lnkgrey">V_SPT</span>) for program-independent
authorization checks can be defined. The following table shows the columns of the database table SPTH. If the check on the database table SPTH has a negative result, a non-handleable exception is raised.</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>PATH</td>
<td>Column for generic file names. The attributes specified in the other columns of this row apply to all the files of the application server that are best described by the entry in this column.</td>
</tr>
<tr>
<td>SAVEFLAG</td>
<td>If this column contains the value <span class="qtext400">&quot;X&quot;</span>, the files entered in the PATH are included in the backup procedure.</td>
</tr>
<tr>
<td>FS_NOREAD</td>
<td>If this column contains the value <span class="qtext400">&quot;X&quot;</span>, the files specified in thePATH column cannot be accessed from ABAP. This setting overrides the setting in the columns FS_NOWRITE and FS_BRGRU as well as the authorization check on the authorization object S_DATASET.</td>
</tr>
<tr>
<td>FS_NOWRITE</td>
<td>If this column contains the value <span class="qtext400">&quot;X&quot;</span>, the files specified in thePATH column cannot be write-accessed from ABAP. This setting overrides the setting in the column FS_BRGRU as well as the authorization check on the authorization object S_DATASET.</td>
</tr>
<tr>
<td>FS_BRGRU</td>
<td>In this column, it is possible to define an authorization group using a free choice of name. Thefiles of multiple rows can be grouped together in this way. During the evaluation of the database tableSPTH, an authorization check is carried out for the current user against the authorization object S_PATHthat contains two authorization fields RS_BRGRU and ACTVT. In this way, access to the files specifiedin PATH can be granted independently from the user. If no name is entered, no authorization check is carried out against the authorization object S_PATH.</td>
</tr>
</tbody>
</table>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>In comparison to the authorization check using the authorization object S_DATASET (see below), an authorization
check using the authorization object S_PATH is independent of the ABAP program in which it occurs. Furthermore,
the check is not limited to a single file, but includes all the generically specified files of the PATH column.</p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The table SPTH is filled as follows:</p>
<table>
<thead>
<tr>
<th>PATH</th>
<th>SAVEFLAG</th>
<th>FS_NOREAD</th>
<th>FS_NOWRITE</th>
<th>FS_BRGRU</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="qtext400">*</span></td>
<td>-</td>
<td><span class="qtext400">X</span></td>
<td><span class="qtext400">X</span></td>
<td>-</td>
</tr>
<tr>
<td><span class="qtext400">/tmp</span></td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><span class="qtext400">/tmp/myfiles</span></td>
<td><span class="qtext400">X</span></td>
<td>-</td>
<td>-</td>
<td><span class="qtext400">FILE</span></td>
</tr>
</tbody>
</table>
<p>The entries in the</p>
<ul>

<li>first row apply to all files of the application server except for those in the path <span class="qtext400">/tmp</span>,</li>

</ul>

<ul>

<li>second row apply to all files of the application server in the path <span class="qtext400">/tmp</span>, except for the files in the path <span class="qtext400">/tmp/myfiles</span>,</li>

</ul>

<ul>

<li>third row apply to the files in the path <span class="qtext400">/tmp/myfiles</span>.</li>

</ul>

<p>These entries specify that no ABAP program can access any files on the application server, except for
the files in the path <span class="qtext400">/tmp</span>. All ABAP programs have both read and write
access to the files in the path <span class="qtext400">/tmp</span>. Only users who have an authorization
for the authorization group <span class="qtext400">FILE</span> can use ABAP programs that have read
and write access to the files in the path <span class="qtext400">/tmp/myfiles</span>. The files in this
paths are also designed for backup purposes. Using the table above, the following program lines produce a runtime error for all users:</p>
<dd>
<code style="display: inline;"><span class="qtext">DATA fname TYPE string. <br>fname = `/system/files`. <br>OPEN DATASET fname FOR OUTPUT IN BINARY MODE.</span></code>
</dd>

<p><a name="@@ITOC@@AUTHORIZATIONCHECKSFORSPECIALFILES_3"></a>
</div></p>
<h2 id="authorization-checks-for-special-files">Authorization Checks for Special Files</h2>
<p>Every time a PSE file (file with the extension <span class="qtext400">.pse</span> for a Personal Security
Environment) is accessed, an automatic authorization check for the current user is performed with the value &quot;01&quot; for the field ACTVT of the authorization object S_RZL_ADM of the system administrator.</p>
<p><a name="@@ITOC@@AUTHORIZATIONCHECKSFORUSERSANDPROGRAMSFORINDIVIDUALFILES_4"></a></p>
<h2 id="authorization-checks-for-users-and-programs-for-individual-files">Authorization Checks for Users and Programs for Individual Files</h2>
<h3 id="delete">Delete</h3>
<p>ReadWriteRead with Filter
Write with Filter</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../abenfile_glosry/" title="File" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                File
              </div>
            </div>
          </a>
        
        
          <a href="../abenfile_interface_glosry/" title="ABAP file interface" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                ABAP file interface
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>