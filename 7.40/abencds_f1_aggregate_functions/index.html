


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abencds f1 aggregate functions - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#abap-cds-aggregate" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abencds f1 aggregate functions
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
    <nav class="md-nav" aria-label="Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.40/abencds_f1_aggregate_functions.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_dictionary" class="blue">ABAP Dictionary</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds" class="blue">ABAP CDS in ABAP Dictionary</a>&#xA0;&#x2192;&#xA0;
<a href="../abenddic_cds_views" class="blue">ABAP CDS - Views</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_f1_syntax_reference" class="blue">ABAP CDS - DDL Statements</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_f1_define_view" class="blue">ABAP CDS - DEFINE VIEW</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_f1_select_statement" class="blue">ABAP CDS - SELECT</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_operands_and_expressions" class="blue">ABAP CDS - SELECT, Operands and Expressions</a>&#xA0;</small></p>
<h1 id="abap-cds-aggregate">ABAP CDS - aggregate</h1>
<p><a name="@@ITOC@@SYNTAX_1"></a>
Other versions: 
 <s><i>7.31</i></s> | <b>7.40</b> | <a href="../../7.54/abencds_f1_aggregate_functions">7.54</a></p>
<h2 id="syntax">Syntax</h2>
<p><pre><code class="hljs abap abap-docs-syntax-block">
<span class="qtext400">... { MAX( [DISTINCT] operand ) <br>&#xA0;&#xA0;&#xA0;&#xA0;| MIN( [DISTINCT] operand ) <br>
&#xA0;&#xA0;&#xA0;&#xA0;| AVG( [DISTINCT] operand ) <br>&#xA0;&#xA0;&#xA0;&#xA0;| SUM( [DISTINCT] operand ) <br>&#xA0;&#xA0;&#xA0;&#xA0;| COUNT( DISTINCT operand ) <br>&#xA0;&#xA0;&#xA0;&#xA0;| COUNT(*) } ...</span>
</code></pre></p>
<h3 id="effect">Effect</h3>
<p>Aggregate expression in a <a href="../abencds_f1_select_statement" class="blue"><span class="qtext400">SELECT</span> statement</a> of a CDS view in
<a href="../abenabap_cds_glosry" class="grey" title="Glossary Entry">ABAP CDS</a>. An aggregate expression
calculates a single value from an operand <span class="qtext400">operand</span> by calling an aggregate function from multiple rows of a results set. The following table shows the possible aggregate functions:</p>
<table>
<thead>
<tr>
<th>Aggregate Function</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="qtext400">MAX</span></td>
<td>Greatest value of <span class="qtext400">operand</span></td>
</tr>
<tr>
<td><span class="qtext400">MIN</span></td>
<td>Least value of <span class="qtext400">operand</span></td>
</tr>
<tr>
<td><span class="qtext400">AVG</span></td>
<td>Average value of <span class="qtext400">operand</span></td>
</tr>
<tr>
<td><span class="qtext400">SUM</span></td>
<td>Sum of <span class="qtext400">operand</span></td>
</tr>
<tr>
<td><span class="qtext400">COUNT</span></td>
<td>If <span class="qtext400">DISTINCT operand</span> is specified, the number of distinct values of<span class="qtext400">operand</span>, and if <span class="qtext400">*</span> is specified, the number of rows in the results set.</td>
</tr>
</tbody>
</table>
<p>If <span class="qtext400">DISTINCT</span> is used, only distinct values of <span class="qtext400">operand</span> are respected. The following can be specified for <span class="qtext400">operand</span>:</p>
<ul>

<li>A <a href="../abencds_f1_literal" class="blue">numeric literal</a></li>

</ul>

<ul>

<li>A field of a data source <a href="../abencds_f1_data_source" class="blue"><span class="qtext400">data_source</span></a> of the current CDS view</li>

</ul>

<ul>

<li>A <a href="../abencds_f1_path_expression" class="blue">path expression</a> that identifies a field
of a data source <a href="../abencds_f1_data_source" class="blue"><span class="qtext400">data_source</span></a></li>

</ul>

<ul>

<li>A <a href="../abencds_f1_case_expression" class="blue">case distinction</a> that returns a value</li>

</ul>

<p>The data type of the result is defined when the CDS view is activated and is determined by the aggregate function and the value range of the data types of the operands.</p>
<p>Aggregate expressions can be used as <a href="../abencds_f1_select_list_entry" class="blue">elements</a>
of a <a href="../abencds_f1_select_list" class="blue"><span class="qtext400">SELECT</span> list</a>.
Here they need an alternative element name defined using <span class="qtext400">AS</span> and require
a <a href="../abencds_f1_group_by" class="blue"><span class="qtext400">GROUP BY</span> clause</a> to be used. Aggregate expressions can be compared with
<a href="../abencds_f1_literal" class="blue">literals</a> in a <a href="../abencds_f1_having_clause" class="blue"><span class="qtext400">HAVING</span> condition</a>.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>The names of the aggregate functions <span class="qtext400">AVG</span>, <span class="qtext400">COUNT</span>,
<span class="qtext400">MAX</span>, <span class="qtext400">MIN</span>, and <span class="qtext400">SUM</span> are protected and cannot be used as self-defined names.</li>

<p></ul>
<ul></p>
<li>A CDS view with aggregate expressions in the <span class="qtext400">SELECT</span> list cannot be expanded using <a href="../abencds_f1_extend_view" class="blue"><span class="qtext400">EXTEND VIEW</span></a>.</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>In the <span class="qtext400">SELECT</span> list of the CDS view <span class="qtext400">sales_order</span>,
aggregate expressions calculate the sum, the minimum, and the maximum of the gross amounts of each business
partner and the number of requests is determined. An alternative element name is defined for each aggregation.
The non-aggregated fields <span class="qtext400">buyer_guid</span> and <span class="qtext400">currency_code</span> are specified in the <span class="qtext400">GROUP BY</span> clause.</p>
<dd>
<span class="qtext400">@AbapCatalog.sqlViewName: &apos;SALES_ORDER_VW&apos; <br>define view sales_order as <br>&#xA0;&#xA0;select from snwd_so <br>
&#xA0;&#xA0;{ key buyer_guid, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; @Semantics.currencyCode <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;currency_code, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; @Semantics.amount.currencyCode: &apos;currency_code&apos; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;sum(gross_amount) as sum_gross_amount, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; @Semantics.amount.currencyCode: &apos;currency_code&apos; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;min(gross_amount) as min_gross_amount, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; @Semantics.amount.currencyCode: &apos;currency_code&apos; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;max(gross_amount) as max_gross_amount, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; @Semantics.amount.currencyCode: &apos;currency_code&apos; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;avg(gross_amount) as avg_gross_amount, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;count(*) as sales_orders_count } <br>&#xA0;&#xA0;group by buyer_guid, currency_code</span>
</dd>

</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>