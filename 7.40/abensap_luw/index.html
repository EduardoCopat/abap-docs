


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abensap luw - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sap-luw" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abensap luw
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#bundling-methods" class="md-nav__link">
    Bundling Methods
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#statements-for-sap-luws" class="md-nav__link">
    Statements for SAP LUWs
  </a>
  
    <nav class="md-nav" aria-label="Statements for SAP LUWs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#continue" class="md-nav__link">
    Continue
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.40/abensap_luw.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP - Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_language_external_data" class="blue">Processing External Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abentransaction" class="blue">Data Consistency</a>&#xA0;</small></p>
<h1 id="sap-luw">SAP LUW</h1>
<p>As a rule, an application program is processed by multiple
<a href="../abenwork_process_glosry" class="grey" title="Glossary Entry">work processes</a> in succession, and every change of the work process is linked to an implicit
<a href="../abendatabase_commit_glosry" class="grey" title="Glossary Entry">database commit</a>. This means that an application program is not automatically associated with a single
<a href="../abendatabase_luw_glosry" class="grey" title="Glossary Entry">database LUW</a>. This applies in particular to dialog-oriented applications, in which one database LUW is assigned to one dialog step.</p>
<p>To ensure the data consistency of application programs that are executed across multiple work processes,
the change statements are not executed directly in an SAP LUW. Instead, they are first registered and then executed by a single work process, that is in a single database LUW.</p>
<ul>

<li><a href="#@@ITOC@@BUNDLINGMETHODS_1" class="blue">Bundling Methods</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@STATEMENTSFORSAPLUWS_2" class="blue">Statements for SAP LUWs</a></li>

</ul>

<p><a name="@@ITOC@@BUNDLINGMETHODS_1"></a>
Other versions: 
 <a href="../../7.31/abensap_luw">7.31</a> | <b>7.40</b> | <a href="../../7.54/abensap_luw">7.54</a></p>
<h2 id="bundling-methods">Bundling Methods</h2>
<p>The following techniques are available for bundling the change statements in a database LUW:</p>
<ul>

<li><span class="bold">Update</span> (bundling using function modules)</li>

</ul>

<dd>
The statement <a href="../abapcall_function_update" class="blue"><code style="display: inline;"><span class="qtext">CALL FUNCTION... IN UPDATE TASK</span></code></a> is used to register an
<a href="../abenupdate_function_module_glosry" class="grey" title="Glossary Entry">update function module</a> to be executed later in an update work process [
<a href="../abensynchronous_update_glosry" class="grey" title="Glossary Entry">synchronous</a> and
<a href="../abenasynchronous_update_glosry" class="grey" title="Glossary Entry">asynchronous update</a>) or in the current work process
(<a href="../abenlocal_update_glosry" class="grey" title="Glossary Entry">local update</a>). No
<a href="../abendb_commit_during_update" class="blue">forbidden statements</a> can be executed during an update.
</dd>

<ul>

<li><span class="bold">Transactional RFC</span> (bundling using function modules)</li>

</ul>

<dd>
The statement <a href="../abapcall_function_background" class="blue"><code style="display: inline;"><span class="qtext">CALL FUNCTION... IN BACKGROUND TASK|UNIT</span></code></a> is used to register a
<a href="../abenremote_enabled_fm_glosry" class="grey" title="Glossary Entry">remote-enabled function module</a> to be executed later asynchronously using the RFC interface (transactional RFC ).
</dd>

<ul>

<li><span class="bold">Bundling using subroutines</span></li>

</ul>

<dd>
The statement <a href="../abapperform_subr" class="blue"><code style="display: inline;"><span class="qtext">PERFORM ... ON COMMIT</span></code></a> is used to register a subroutine to be executed later in a different work process.
</dd>

<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>A function module can be specified as either an update function module or as remote-enabled, but not both at the same time. The update is used to realize SAP LUWs within
<a href="../abensap_nw_abap_glosry" class="grey" title="Glossary Entry">AS ABAP</a>, while transactional RFC creates LUWs in distributed systems.</p>
<p><a name="@@ITOC@@STATEMENTSFORSAPLUWS_2"></a>
</div></p>
<h2 id="statements-for-sap-luws">Statements for SAP LUWs</h2>
<p>Each opening of a new <a href="../abeninternal_session_glosry" class="grey" title="Glossary Entry">internal
session</a> (except for the statement <a href="../abapcall_dialog" class="blue"><code style="display: inline;"><span class="qtext">CALL DIALOG</span></code></a>) starts a new SAP LUW which can be controlled by the Open SQL statements</p>
<ul>

<li><a href="../abapcommit" class="blue"><code style="display: inline;"><span class="qtext">COMMIT WORK</span></code></a></li>

</ul>

<ul>

<li><a href="../abaprollback" class="blue"><code style="display: inline;"><span class="qtext">ROLLBACK WORK</span></code></a></li>

</ul>

<ul>

<li><a href="../abapset_update_task_local" class="blue"><code style="display: inline;"><span class="qtext">SET UPDATE TASK LOCAL</span></code></a></li>

</ul>

<p>Each closing of an internal session ends the current SAP LUW.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>The statements <code style="display: inline;"><span class="qtext">COMMIT WORK</span></code> and <code style="display: inline;"><span class="qtext">ROLLBACK WORK</span></code>
determine the limits of a SAP LUW. An ABAP program can be divided into any number of SAP LUWs, whereby
the end of an ABAP program always ends the last SAP LUW as well. By calling ABAP programs using <a href="../abapcall_transaction" class="blue">
<code style="display: inline;"><span class="qtext">CALL TRANSACTION</span></code></a>  or <a href="../abapsubmit" class="blue"><code style="display: inline;"><span class="qtext">SUBMIT ... AND RETURN</span></code></a>, SAP LUWs can be nested.</li>

<p></ul>
<ul></p>
<li>If a program is ended or an internal session closed using <a href="../abapsubmit" class="blue"><span class="qtext">
SUBMIT</span></a> without <code style="display: inline;"><span class="qtext">AND RETURN</span></code> or <a href="../abapleave_to_transaction" class="blue">
<code style="display: inline;"><span class="qtext">LEAVE TO TRANSACTION</span></code></a> and procedures are still registered in the current
SAP LUW, then the SAP LUW is ended without the procedures being called or rolled back. Registered update function modules remain on the database but can no longer be executed.</li>

<p></ul>
<ul></p>
<li>The system class <span class="lnkgrey">CL_SYSTEM_TRANSACTION_STATE</span> contains methods that return the status of the current <a href="../abensap_luw_glosry" class="grey" title="Glossary Entry">SAP LUW</a>.</li>

</ul>

</div>

<h3 id="continue">Continue</h3>
<p><a href="../abapcall_function_update" class="blue">CALL FUNCTION - IN UPDATE TASK</a></p>
<p><a href="../abapperform_subr" class="blue">PERFORM - ON COMMIT, ROLLBACK</a></p>
<p><a href="../abapcommit" class="blue">COMMIT WORK</a></p>
<p><a href="../abaprollback" class="blue">ROLLBACK WORK</a></p>
<p><a href="../abapset_update_task_local" class="blue">SET UPDATE TASK LOCAL</a></p>
<p><a href="../abendb_commit_during_update" class="blue">Forbidden Statements in Updates</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>