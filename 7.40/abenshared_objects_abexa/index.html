


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abenshared objects abexa - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#shared-objects" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abenshared objects abexa
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#source-code" class="md-nav__link">
    Source Code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    Description
  </a>
  
    <nav class="md-nav" aria-label="Description">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#area-root-class" class="md-nav__link">
    Area Root Class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#area" class="md-nav__link">
    Area
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#brokers-and-loaders" class="md-nav__link">
    Brokers and Loaders
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clients" class="md-nav__link">
    Clients
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.40/abenshared_objects_abexa.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP - Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abencreate_objects" class="blue">Creating Objects and Values</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_shared_objects" class="blue">Shared Objects</a>&#xA0;</small></p>
<h1 id="shared-objects">Shared Objects</h1>
<p>This example demonstrates the use of shared objects.</p>
<p><a name="@@ITOC@@SOURCECODE_1"></a>
Other versions: 
 <s><i>7.31</i></s> | <b>7.40</b> | <a href="../../7.54/abenshared_objects_abexa">7.54</a></p>
<h2 id="source-code">Source Code</h2>
<p><div class="highlight"><pre><span></span><code><span class="k">REPORT</span> <span class="nv">demo_shared_objects</span><span class="p">.</span>

<span class="k">CLASS</span> <span class="nv">demo_flight_list_handler</span> <span class="k">DEFINITION</span> <span class="nv">FINAL</span> <span class="k">CREATE PRIVATE</span><span class="p">.</span>
  <span class="k">PUBLIC SECTION</span><span class="p">.</span>
    <span class="k">CLASS-DATA</span> <span class="nv">flight_list_handler</span>
    <span class="k">TYPE REF TO</span> <span class="nv">demo_flight_list_handler</span><span class="p">.</span>
    <span class="k">CLASS-METHODS</span> <span class="nv">class_constructor</span><span class="p">.</span>
    <span class="k">METHODS</span> <span class="nv">get_flight_list</span>
      <span class="k">RETURNING</span>
        <span class="k">VALUE</span><span class="p">(</span><span class="nv">flights</span><span class="p">)</span> <span class="k">TYPE REF TO</span> <span class="nv">spfli_tab</span>
      <span class="k">RAISING</span>
       <span class="nv">cx_no_flights</span><span class="p">.</span>
  <span class="k">PRIVATE SECTION</span><span class="p">.</span>
    <span class="k">DATA</span> <span class="nv">area_handle</span> <span class="k">TYPE REF TO</span> <span class="nv">cl_demo_flights</span><span class="p">.</span>
    <span class="k">METHODS</span> <span class="nv">create_flight_list</span>
      <span class="k">RAISING</span>
        <span class="nv">cx_shm_attach_error</span>
        <span class="nv">cx_no_flights</span><span class="p">.</span>
<span class="k">ENDCLASS</span><span class="p">.</span>

<span class="k">CLASS</span> <span class="nv">demo_flight_list_handler</span> <span class="k">IMPLEMENTATION</span><span class="p">.</span>
  <span class="k">METHOD</span> <span class="nf">class_constructor</span><span class="p">.</span>
    <span class="k">CREATE OBJECT</span> <span class="nv">flight_list_handler</span><span class="p">.</span>
  <span class="k">ENDMETHOD</span><span class="p">.</span>
  <span class="k">METHOD</span> <span class="nf">get_flight_list</span><span class="p">.</span>
    <span class="k">DATA</span> <span class="nv">flight_list</span> <span class="k">TYPE REF TO</span> <span class="nv">cl_demo_flight_list</span><span class="p">.</span>
    <span class="k">IF</span> <span class="nv">area_handle</span> <span class="ow">IS INITIAL</span><span class="p">.</span>
      <span class="k">TRY</span><span class="p">.</span>
          <span class="nv">area_handle</span> <span class="o">=</span> <span class="nv">cl_demo_flights</span><span class="o">=&gt;</span><span class="nf">attach_for_read</span><span class="p">(</span> <span class="p">).</span>
        <span class="k">CATCH</span> <span class="nv">cx_shm_attach_error</span><span class="p">.</span>
          <span class="k">TRY</span><span class="p">.</span>
              <span class="nv">me</span><span class="o">-&gt;</span><span class="nf">create_flight_list</span><span class="p">(</span> <span class="p">).</span>
              <span class="nv">area_handle</span> <span class="o">=</span> <span class="nv">cl_demo_flights</span><span class="o">=&gt;</span><span class="nf">attach_for_read</span><span class="p">(</span> <span class="p">).</span>
            <span class="k">CATCH</span> <span class="nv">cx_shm_attach_error</span><span class="p">.</span>
              <span class="k">CREATE OBJECT</span> <span class="nv">flight_list</span><span class="p">.</span>
              <span class="nv">flight_list</span><span class="o">-&gt;</span><span class="nf">set_flight_list</span><span class="p">(</span> <span class="p">).</span>
          <span class="k">ENDTRY</span><span class="p">.</span>
      <span class="k">ENDTRY</span><span class="p">.</span>
    <span class="k">ENDIF</span><span class="p">.</span>
    <span class="k">IF</span> <span class="nv">area_handle</span> <span class="ow">IS NOT INITIAL</span><span class="p">.</span>
      <span class="nv">flights</span> <span class="o">=</span> <span class="nv">REF</span> <span class="err">#</span><span class="p">(</span> <span class="nv">area_handle</span><span class="o">-&gt;</span><span class="nv">root</span><span class="o">-&gt;</span><span class="nv">flight_list</span> <span class="p">).</span>
    <span class="k">ELSEIF</span> <span class="nv">flight_list</span> <span class="ow">IS NOT INITIAL</span><span class="p">.</span>
      <span class="nv">flights</span> <span class="o">=</span> <span class="nv">REF</span> <span class="err">#</span><span class="p">(</span> <span class="nv">flight_list</span><span class="o">-&gt;</span><span class="nv">flight_list</span> <span class="p">).</span>
    <span class="k">ELSE</span><span class="p">.</span>
      <span class="k">RAISE</span> <span class="k">EXCEPTION</span> <span class="k">TYPE </span><span class="nv">cx_no_flights</span><span class="p">.</span>
    <span class="k">ENDIF</span><span class="p">.</span>
  <span class="k">ENDMETHOD</span><span class="p">.</span>
  <span class="k">METHOD</span> <span class="nf">create_flight_list</span><span class="p">.</span>
    <span class="k">DATA</span><span class="p">:</span> <span class="nv">flight_list</span>  <span class="k">TYPE REF TO</span> <span class="nv">cl_demo_flight_list</span><span class="p">,</span>
          <span class="nv">exc_ref</span>      <span class="k">TYPE REF TO</span> <span class="nv">cx_no_flights</span><span class="p">.</span>
    <span class="k">DATA</span><span class="p">(</span><span class="nv">area_handle</span><span class="p">)</span> <span class="o">=</span> <span class="nv">cl_demo_flights</span><span class="o">=&gt;</span><span class="nf">attach_for_write</span><span class="p">(</span> <span class="p">).</span>
    <span class="k">CREATE OBJECT</span> <span class="nv">flight_list</span> <span class="nv">AREA</span> <span class="nv">HANDLE</span> <span class="nv">area_handle</span><span class="p">.</span>
    <span class="nv">area_handle</span><span class="o">-&gt;</span><span class="nf">set_root</span><span class="p">(</span> <span class="nv">flight_list</span> <span class="p">).</span>
    <span class="k">TRY</span><span class="p">.</span>
        <span class="nv">flight_list</span><span class="o">-&gt;</span><span class="nf">set_flight_list</span><span class="p">(</span> <span class="p">).</span>
      <span class="k">CATCH</span> <span class="nv">cx_no_flights</span> <span class="k">INTO</span> <span class="nv">exc_ref</span><span class="p">.</span>
        <span class="nv">area_handle</span><span class="o">-&gt;</span><span class="nf">detach_rollback</span><span class="p">(</span> <span class="p">).</span>
        <span class="k">RAISE</span> <span class="k">EXCEPTION</span> <span class="nv">exc_ref</span><span class="p">.</span>
    <span class="k">ENDTRY</span><span class="p">.</span>
    <span class="nv">area_handle</span><span class="o">-&gt;</span><span class="nf">detach_commit</span><span class="p">(</span> <span class="p">).</span>
  <span class="k">ENDMETHOD</span><span class="p">.</span>
<span class="k">ENDCLASS</span><span class="p">.</span>

<span class="k">CLASS</span> <span class="nv">shm_demo</span> <span class="k">DEFINITION</span><span class="p">.</span>
  <span class="k">PUBLIC SECTION</span><span class="p">.</span>
    <span class="k">CLASS-METHODS</span> <span class="nv">main</span><span class="p">.</span>
<span class="k">ENDCLASS</span><span class="p">.</span>
<span class="k">CLASS</span> <span class="nv">shm_demo</span> <span class="k">IMPLEMENTATION</span><span class="p">.</span>
  <span class="k">METHOD</span> <span class="nf">main</span><span class="p">.</span>
    <span class="k">DATA</span><span class="p">:</span> <span class="nv">flight_list_handler</span> <span class="k">TYPE REF TO</span> <span class="nv">demo_flight_list_handler</span><span class="p">,</span>
          <span class="nv">flight_list</span> <span class="k">TYPE REF TO</span> <span class="nv">spfli_tab</span><span class="p">.</span>
    <span class="nv">flight_list_handler</span> <span class="o">=</span>
      <span class="nv">demo_flight_list_handler</span><span class="o">=&gt;</span><span class="nv">flight_list_handler</span><span class="p">.</span>
    <span class="k">TRY</span><span class="p">.</span>
        <span class="nv">flight_list</span> <span class="o">=</span> <span class="nv">flight_list_handler</span><span class="o">-&gt;</span><span class="nf">get_flight_list</span><span class="p">(</span> <span class="p">).</span>
      <span class="k">CATCH</span> <span class="nv">cx_no_flights</span><span class="p">.</span>
         <span class="nv">cl_demo_output</span><span class="o">=&gt;</span><span class="nf">display_text</span><span class="p">(</span> <span class="s1">&#39;No flight list available&#39;</span> <span class="p">).</span>
        <span class="k">RETURN</span><span class="p">.</span>
    <span class="k">ENDTRY</span><span class="p">.</span>
    <span class="nv">cl_demo_output</span><span class="o">=&gt;</span><span class="nf">display_data</span><span class="p">(</span> <span class="nv">flight_list-&gt;*</span> <span class="p">).</span>
  <span class="k">ENDMETHOD</span><span class="p">.</span>
<span class="k">ENDCLASS</span><span class="p">.</span>

<span class="k">START-OF-SELECTION</span><span class="p">.</span>
  <span class="nv">shm_demo</span><span class="o">=&gt;</span><span class="nf">main</span><span class="p">(</span> <span class="p">).</span>
</code></pre></div>
<a name="@@ITOC@@DESCRIPTION_2"></a></p>
<h2 id="description">Description</h2>
<p><a name="@@ITOC@@AREAROOTCLASS_3"></a></p>
<h3 id="area-root-class">Area Root Class</h3>
<p>The global class <span class="lnkgrey">CL_DEMO_FLIGHT_LIST</span> is used as an area root class. It
contains the internal table FLIGHT_LIST (of type SPFLI_TAB from ABAP Dictionary) as a public attribute,
which is filled by the method SET_FLIGHT_LIST. This table represents the unchangeable data that is accessed from different programs.</p>
<p><a name="@@ITOC@@AREA_4"></a></p>
<h3 id="area">Area</h3>
<p><span class="lnkgrey">CL_DEMO_FLIGHTS</span> is used as an area, whose properties are edited in transaction <span class="lnkgrey">SHMA</span>. The default values were applied apart from two exceptions:</p>
<ul>

<li>Versioning is deactivated because the data in the area instance should not be changed during the program runtime.</li>

</ul>

<ul>

<li>The lifetime after the last access is restricted to five minutes. This prevents memory space from being occupied in the shared memory without a program requiring the memory.</li>

</ul>

<p><a name="@@ITOC@@BROKERSANDLOADERS_5"></a></p>
<h3 id="brokers-and-loaders">Brokers and Loaders</h3>
<p>The class <code style="display: inline;"><span class="qtext">demo_flight_list_handler</span></code> encapsulates the access to the area before
the client (in the real world, this would be a global class). The static constructor creates one instance
of this class (singleton).  The method <code style="display: inline;"><span class="qtext">get_flight_list</span></code> is used as a broker. It attempts to set a shared lock for an area instance. Within an
<a href="../abeninternal_session_glosry" class="grey" title="Glossary Entry">internal session</a>,
only one shared lock is possible for an area instance. Therefore the system first queries whether an
area handle area already exists. The alternative would have been to handle the exception CX_SHM_READ_LOCK_ACTIVE.
However, this would have been less effective in this example. If the operation is not successful, the
method <code style="display: inline;"><span class="qtext">create_flight_list</span></code> is called, which acts as a loader. This attempts
to set a exclusive lock and to build an area instance with a root object. Any exceptions that occur
are propagated to the calling method. A DETACH_ ROLLBACK is executed before any possible CX_NO_FLIGHTS
exceptions from SET_FLIGHT_LIST are forwarded to the calling program. If the change lock is not removed explicitly, the program is terminated at the end of the current internal session or possibly even beforehand.</p>
<p>If the area was built, <code style="display: inline;"><span class="qtext">get_flight_list</span></code> attempts to set a shared lock again.
If the area instance could not be built, <code style="display: inline;"><span class="qtext">get_flight_list</span></code> creates an object
of class ZCL_FLIGHT_LIST (as an emergency measure) in the current internal session and fills the internal
table <code style="display: inline;"><span class="qtext">flight_list</span></code>. Finally, a data reference to the flight list is assigned to the return value of the method (either in the root object of the shared object or in the local object).</p>
<p>The exclusive lock in <code style="display: inline;"><span class="qtext">create_flight_list</span></code> is closed explicitly, whereas a
shared lock in <code style="display: inline;"><span class="qtext">get_flight_list</span></code> is persisted until the end of the internal
session. The latter point (shared lock) is only possible for areas without versioning, if no more data-changing accesses are expected once an area has been built.</p>
<p><a name="@@ITOC@@CLIENTS_6"></a></p>
<h3 id="clients">Clients</h3>
<p>The class <code style="display: inline;"><span class="qtext">shm_demo</span></code> demonstrates a client. The method <code style="display: inline;"><span class="qtext">main</span></code>
creates an object of the class <code style="display: inline;"><span class="qtext">demo_flight_list_handler</span></code> and attempts to read
a reference to the flight list. If the access is successful, the flight list is displayed in the <span class="qtext">
display</span> method. It is not important for the client whether the data is actually contained in
the shared memory or (if an error occurs) in a local object of class CL_DEMO_FLIGHT_LIST. If no data can be read from the database, a message is displayed.</p>
<p>After the program call, the area instance version can be examined using transaction <span class="lnkgrey">SHMM</span>.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>