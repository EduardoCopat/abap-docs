


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abencds f1 define role - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#this-functionality-is-not-yet-released-and-must-not-be-used" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abencds f1 define role
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.40/abencds_f1_define_role.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_dictionary" class="blue">ABAP Dictionary</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds" class="blue">ABAP CDS in ABAP Dictionary</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_authorizations" class="blue">ABAP CDS - Authorizations</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_f1_dcl_syntax" class="blue">ABAP CDS - DCL Statements</a>&#xA0;</small></p>
<h3 id="this-functionality-is-not-yet-released-and-must-not-be-used">This functionality is not yet released and must not be used</h3>
<h1 id="abap-cds-define-role">ABAP CDS - DEFINE ROLE</h1>
<p><a name="@@ITOC@@SYNTAX_1"></a>
Other versions: 
 <s><i>7.31</i></s> | <b>7.40</b> | <a href="../../7.54/abencds_f1_define_role">7.54</a></p>
<h2 id="syntax">Syntax</h2>
<p><pre><code class="hljs abap abap-docs-syntax-block">
<span class="qtext400">[<a href="../abencds_f1_dcl_role_annotations" class="blue">@EndUserText.label: &apos;...&apos;</a>] <br>
[<a href="../abencds_f1_dcl_role_annotations" class="blue">@MappingRole: true|false</a>] <br>[<a href="../abencds_annotations" class="blue">@role_annot1</a>] <br>
[<a href="../abencds_annotations" class="blue">@role_annot2</a>] <br>... <br>[DEFINE] ROLE role_name { <br>
&#xA0;&#xA0; GRANT SELECT ON cds_entity [WHERE <a href="../abencds_dcl_role_conditions" class="blue">condition</a> [AND|OR
<a href="../abencds_dcl_role_conditions" class="blue">condition</a>] ...]; <br>&#xA0;&#xA0;[GRANT SELECT ON cds_entity ...;] <br>&#xA0;&#xA0;&#xA0;&#xA0;... }</span>
</code></pre></p>
<h3 id="effect">Effect</h3>
<p>In <a href="../abencds_source_code_glosry" class="grey" title="Glossary Entry">CDS</a> source code, defines a CDS role called <span class="qtext400">role_name</span> that specifies how
<a href="../abencds_entity_glosry" class="grey" title="Glossary Entry">CDS entities</a> are accessed. Optional
<a href="../abencds_f1_dcl_role_annotations" class="blue">annotations</a> can be specified before the actual definition of the role in <span class="qtext400">DEFINE ROLE</span>:</p>
<ul>

<li>The annotation <a href="../abencds_f1_dcl_role_annotations" class="blue"><span class="qtext400">@EndUserText.label</span></a> makes it possible to create a short description of the role.</li>

</ul>

<ul>

<li>The annotation <a href="../abencds_f1_dcl_role_annotations" class="blue"><span class="qtext400">@MappingRole</span></a> is used to specify whether the role is a
<a href="../abenmapping_role_glosry" class="grey" title="Glossary Entry">mapping role</a> or an <a href="../abenassignment_role_glosry" class="grey" title="Glossary Entry">assignment role</a>.</li>

</ul>

<ul>

<li>Self-defined annotations <a href="../abencds_annotations" class="blue"><span class="qtext400">@role_annot1</span></a>,
<a href="../abencds_annotations" class="blue"><span class="qtext400">@role_annot2</span></a>, ... can be used to enrich the role with custom information.</li>

</ul>

<p>A CDS role associates one or more <a href="../abencds_entity_glosry" class="grey" title="Glossary Entry">CDS
entities</a> <span class="qtext400">cds_entity</span> with user-specific access conditions <a href="../abencds_dcl_role_conditions" class="blue">
<span class="qtext400">condition</span></a> in rules introduced using <span class="qtext400">GRANT SELECT ON</span>. Currently, CDS entities of
<a href="../abencds_view_glosry" class="grey" title="Glossary Entry">CDS views</a> defined using <a href="../abencds_f1_define_view" class="blue">
<span class="qtext400">DEFINE VIEW</span></a> can be specified for <span class="qtext400">cds_entity</span>.
If a CDS entity is specified in the definition of a role, the access condition is checked implicitly
if the CDS entity is accessed using Open SQL. In <a href="../abapselect" class="blue"><code style="display: inline;"><span class="qtext">SELECT</span></code></a>
reads, conditions are added to this statement implicitly here that restrict the results set to the entries
that meet the access condition for the current user. If the current user does not have an assigned role, no data is read.</p>
<p>At least one rule introduced using <span class="qtext400">GRANT SELECT ON</span> must be specified within the curly brackets. Multiple rules are separated using a semicolon
(<span class="qtext400">;</span>). Each rule defines how the specified CDS entity <span class="qtext400">cds_entity</span> is compared with user-specific values when the entity is accessed using
<a href="../abenopen_sql_glosry" class="grey" title="Glossary Entry">Open SQL</a> with the aim of preventing
access to all values for which there is no authorization. The various rules of a role are joined using a logical &quot;or&quot;.</p>
<p>The rules are defined using an optional <span class="qtext400">WHERE</span> clause.. If no <span class="qtext400">WHERE</span>
clause is specified, any user to which the role is assigned has unrestricted access to the CDS entity.
The condition of each <span class="qtext400">WHERE</span> clause can consist of subconditions <a href="../abencds_dcl_role_conditions" class="blue">
<span class="qtext400">condition</span></a> joined using the operators <span class="qtext400">AND</span>
or <span class="qtext400">OR</span>. Here, <span class="qtext400">AND</span> is a stronger join than <span class="qtext400">OR</span>. Subconditions can be placed in parentheses, <span class="qtext400">(
)</span>, explicitly.</p>
<p>The conditions <a href="../abencds_dcl_role_conditions" class="blue"><span class="qtext400">condition</span></a>
of the <span class="qtext400">WHERE</span> clauses are determined by the type of role in question. There are two types of roles:</p>
<ul>

<li>Mapping roles that map CDS entities to classic <a href="../abenbc_authority_check" class="blue">authorizations</a>.</li>

</ul>

<dd>
A mapping role is defined by specifying the value <span class="qtext400">true</span> for the annotation
<a href="../abencds_f1_dcl_role_annotations" class="blue"><span class="qtext400">@MappingRole</span></a>. It maps authorization-relevant attributes of CDS to the classic
<a href="../abenauthorization_object_glosry" class="grey" title="Glossary Entry">authorization objects</a>
in AS ABAP. Mapping roles enable the user administrator to reuse any classic authorization assigned
to a user. A mapping role is assigned to every user automatically, independently of the client. The CDS authorizations of the user are then determined by the classic roles of the user.
</dd>

<ul>

<li>Assignment roles based on the CDS data model</li>

</ul>

<dd>
An assignment role is defined by specifying the default value <span class="qtext400">false</span> for
the annotation <a href="../abencds_f1_dcl_role_annotations" class="blue"><span class="qtext400">@MappingRole</span></a>.
The role can be constructed in full in the CDS data model. Unlike mapping roles, CDS roles are dependent
on the data defined by the user administrator when the role is assigned to a user. Currently, however, SAP does not provide a tool for assigning an assignment role to users.
</dd>

<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>The <span class="qtext400">WHERE</span> clause of the DCL provides options that are not supported by the DDL:</li>

<p></ul>
<ul class="circlem2"></p>
<li>Mapping roles have proprietary syntax.</li>

<p></ul>
<ul class="circlem2"></p>
<li>Assignment roles support a syntax that would be incomplete in the DDL.</li>

<p></ul>
<ul></p>
<li>Separate CDS source code must be created for each CDS role. The CDS source code in a CDS role is edited in a different editor from the CDS source code of
<a href="../abencds_view_glosry" class="grey" title="Glossary Entry">CDS view</a>. The ADT documentation describes how the different types of source code are created.</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following assignment role <span class="qtext400">demo_role</span> grants unrestricted access to
the entity <span class="qtext400">sacm_cds_snwd_so</span> of a CDS view. Any user to which this role is assigned has unrestricted access to this view.</p>
<p><span class="qtext400">EndUserText.label: &apos;Role to view sales orders&apos; <br>ROLE demo_role { <br>&#xA0;&#xA0; GRANT SELECT ON sacm_cds_snwd_so; }</span></p>
</div>

<h3 id="continue">Continue</h3>
<p><a href="../abencds_f1_dcl_role_annotations" class="blue">ABAP CDS - DEFINE ROLE, role_annot</a></p>
<p><a href="../abencds_dcl_role_conditions" class="blue">ABAP CDS - DEFINE ROLE, condition</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>