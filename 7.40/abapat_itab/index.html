


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abapat itab - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#at-control-level-processing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abapat itab
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
    <nav class="md-nav" aria-label="Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extras" class="md-nav__link">
    Extras
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-1" class="md-nav__link">
    Addition 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_1" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-2" class="md-nav__link">
    Addition 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_2" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-3" class="md-nav__link">
    Addition 3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_3" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exceptions" class="md-nav__link">
    Exceptions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#continue" class="md-nav__link">
    Continue
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.40/abapat_itab.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP - Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_data_working" class="blue">Processing Internal Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenitab" class="blue">Internal Tables</a>&#xA0;&#x2192;&#xA0;
<a href="../abentable_processing_statements" class="blue">Processing Statements for Internal Tables</a>&#xA0;&#x2192;&#xA0;
<a href="../abaploop_at_itab_variants" class="blue">LOOP AT itab</a>&#xA0;&#x2192;&#xA0;
<a href="../abaploop_at_itab" class="blue">LOOP AT itab - Basic Form</a>&#xA0;</small></p>
<h1 id="at-control-level-processing">AT - Control Level Processing</h1>
<p><a href="../abapat_shortref" class="blue">Short Reference</a>  </p>
<p><a name="@@AT - itab@@!ABAP_STATEMENT!@@"></a>
Other versions: 
 <a href="../../7.31/abapat_itab">7.31</a> | <b>7.40</b> | <a href="../../7.54/abapat_itab">7.54</a></p>
<h2 id="syntax">Syntax</h2>
<p><pre><code class="hljs abap abap-docs-syntax-block">
<span class="qtext"><a href="../abaploop_at_itab" class="blue">LOOP AT itab</a> <a href="../abaploop_at_itab_result" class="blue">result</a>
[<a href="../abaploop_at_itab_cond" class="blue">cond</a>].</span> <br><span class="qtext">&#xA0;&#xA0;[AT FIRST.</span> <br>
<span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0; ...</span> <br><span class="qtext">&#xA0;&#xA0; ENDAT.]</span> <br>
<span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0;[AT NEW <a href="../abenitab_components" class="blue">comp1</a>.</span> <br>
<span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ...</span> <br><span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0; ENDAT.</span> <br>
<span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; [AT NEW <a href="../abenitab_components" class="blue">comp2</a>.</span> <br>
<span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ...</span> <br><span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ENDAT.</span> <br>
<span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; [...]]]</span> <br><span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; [ ... ]</span> <br>
<span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; [[[...]</span> <br><span class="qtext">&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0; AT END OF <a href="../abenitab_components" class="blue">comp2</a>.</span> <br>
<span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ...</span> <br><span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ENDAT.]</span> <br>
<span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0; AT END OF <a href="../abenitab_components" class="blue">comp1</a>.</span> <br>
<span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ...</span> <br><span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0; ENDAT.]</span> <br>
<span class="qtext">&#xA0;&#xA0;[AT LAST.</span> <br><span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0; ...</span> <br><span class="qtext">&#xA0;&#xA0;ENDAT.]</span> <br><span class="qtext">ENDLOOP.</span> 
</code></pre></p>
<h3 id="extras">Extras</h3>
<p><a href="#!ABAP_ADDITION_1@1@" class="blue"> 1. <code style="display: inline;"><span class="qtext">...&#xA0;&#xA0;FIRST</span></code> </a> <br>
<br><a href="#!ABAP_ADDITION_2@2@" class="blue"> 2. <code style="display: inline;"><span class="qtext">... {NEW}|{END OF} compi</span></code> </a> <br>
<br><a href="#!ABAP_ADDITION_3@3@" class="blue"> 3. <code style="display: inline;"><span class="qtext">...&#xA0;&#xA0;LAST</span></code> </a>  </p>
<h3 id="effect">Effect</h3>
<p>The statement block of a <a href="../abaploop_at_itab" class="blue"><code style="display: inline;"><span class="qtext">LOOP</span></code></a>
without the addition <a href="../abaploop_at_itab_group_by" class="blue"><code style="display: inline;"><span class="qtext">GROUP BY</span></code></a> can contain control structures for
<a href="../abencontrol_level_processin_glosry" class="grey" title="Glossary Entry">control level processing</a>.
The corresponding control statement is <code style="display: inline;"><span class="qtext">AT</span></code>. The statements <code style="display: inline;"><span class="qtext">AT</span></code> and <code style="display: inline;"><span class="qtext">ENDAT</span></code> define statement blocks that are executed at
<a href="../abencontrol_break_glosry" class="grey" title="Glossary Entry">control breaks</a>, meaning in the transition of a
<a href="../abencontrol_level_glosry" class="grey" title="Glossary Entry">control level</a> to another
control level. The additions of the statements <code style="display: inline;"><span class="qtext">AT</span></code> define the criteria for
a control break and hence the control levels. Control breaks between control levels are a result of
the row structure and the processing order in which the <code style="display: inline;"><span class="qtext">LOOP</span></code> reads the rows
of the internal table. Within the statement blocks, the statement <a href="../abapsum" class="blue"><code style="display: inline;"><span class="qtext">SUM</span></code></a> can be specified to total the numeric components of a control level.</p>
<p>Apart from the special variants <code style="display: inline;"><span class="qtext">AT FIRST</span></code> and <code style="display: inline;"><span class="qtext">AT LAST</span></code>,
control levels are defined using the variant <code style="display: inline;"><span class="qtext">AT NEW</span></code> and the sequence of rows
in the internal table. These are the rows that have the same content in a control key defined in their
initial parts. It is possible, from a syntax point of view, to arrange <code style="display: inline;"><span class="qtext">AT</span></code>
control structures in any order and to nest them, however effective control level processing is usually
only achieved by the arrangement above. Here, the control structures are specified in accordance with the arrangement of the components in the control key and are not nested.</p>
<p>The statement blocks within the <code style="display: inline;"><span class="qtext">AT</span></code>-<code style="display: inline;"><span class="qtext">ENDAT</span></code> control
structures are executed if an appropriate control break is made in the current table row. Statements
in the <code style="display: inline;"><span class="qtext">LOOP</span></code>-<code style="display: inline;"><span class="qtext">ENDLOOP</span></code> control structure that are
not executed within an <code style="display: inline;"><span class="qtext">AT</span></code>-<code style="display: inline;"><span class="qtext">ENDAT</span></code> control structure are executed in each pass of the loop. The following rules must be followed for effective control level processing:</p>
<ul>

<li>
A table key specified in <code style="display: inline;"><span class="qtext">LOOP</span></code> in <a href="../abaploop_at_itab_cond" class="blue"><span class="qtext">
cond</span></a> must be chosen so that it produces the required processing order of the imported rows. 
</li>
<li>
A restricting condition specified in <code style="display: inline;"><span class="qtext">LOOP</span></code> in <a href="../abaploop_at_itab_cond" class="blue"><code style="display: inline;"><span class="qtext">cond</span></code></a> must select a contiguous row block in the internal table. 
</li>
<li>
The internal table cannot be modified within the <code style="display: inline;"><span class="qtext">LOOP</span></code> loop. 
</li>
<li>
A work area <code style="display: inline;"><span class="qtext">wa</span></code> specified in the <code style="display: inline;"><span class="qtext">LOOP</span></code> statement after the addition <code style="display: inline;"><span class="qtext">INTO</span></code> must be
<a href="../abencompatible_glosry" class="grey" title="Glossary Entry">compatible</a> with the row type of the table. 
</li>
<li>
A field symbol <code style="display: inline;"><span class="qtext">&lt;fs&gt;</span></code> specified in the statement <code style="display: inline;"><span class="qtext">LOOP</span></code> after the addition <code style="display: inline;"><span class="qtext">ASSIGNING</span></code> must be typed with the row type of the table. 
</li>
<li>
The content of a work area <code style="display: inline;"><span class="qtext">wa</span></code> specified in the statement <code style="display: inline;"><span class="qtext">LOOP</span></code> after the addition <code style="display: inline;"><span class="qtext">INTO</span></code> cannot be modified.
<br></li>

</ul>

<p>If the addition <a href="../abaploop_at_itab_result" class="blue"><code style="display: inline;"><span class="qtext">INTO</span></code></a>
is used in the statement <a href="../abaploop_at_itab" class="blue"><code style="display: inline;"><span class="qtext">LOOP</span></code></a>
to assign the content of the current row to a work area <code style="display: inline;"><span class="qtext">wa</span></code>, its content is
modified as follows when the <code style="display: inline;"><span class="qtext">AT</span></code>-<code style="display: inline;"><span class="qtext">ENDAT</span></code> control structure is entered:</p>
<ul>

<li>
The components of the current control key remain unchanged. 
</li>
<li>
All components with a character-like <a href="../abenflat_glosry" class="grey" title="Glossary Entry">flat</a> data type to the right of the current control key are set to character &quot;*&quot; in every position. 
</li>
<li>
All the other components to the right of the current control key are set to their <a href="../abeninitial_value_glosry" class="grey" title="Glossary Entry">initial value</a>.
<br></li>

</ul>

<p>When the <code style="display: inline;"><span class="qtext">AT</span></code>-<code style="display: inline;"><span class="qtext">ENDAT</span></code> control structure is exited, the content of the current table row is assigned to the entire work area <code style="display: inline;"><span class="qtext">wa</span></code>.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>
When the additions <a href="../abaploop_at_itab_result" class="blue"><code style="display: inline;"><span class="qtext">ASSIGNING</span></code></a>
and <a href="../abaploop_at_itab_result" class="blue"><code style="display: inline;"><span class="qtext">REFERENCE INTO</span></code></a>
are used, the referenced table rows are not modified when entering and exiting the <code style="display: inline;"><span class="qtext">AT</span></code>-<code style="display: inline;"><span class="qtext">ENDAT</span></code> control structure.
</li>

<li>
If <code style="display: inline;"><span class="qtext">INTO</span></code> is used, note that &quot;
<a href="../abencharlike_data_object_glosry" class="grey" title="Glossary Entry">character-like</a>&quot; has a different definition in
<a href="../abenunicode_program_glosry" class="grey" title="Glossary Entry">Unicode programs</a> and
<a href="../abennon_unicode_obsolete" class="blue">obsolete</a>
<a href="../abennon_unicode_program_glosry" class="grey" title="Glossary Entry">non-Unicode programs</a>, which means that identical structures can produce different results.
</li>

<li>
Control level processing with the statement <code style="display: inline;"><span class="qtext">AT</span></code> is not possible in <code style="display: inline;"><span class="qtext">LOOP</span></code>s
across row groups with the addition <a href="../abaploop_at_itab_group_by" class="blue"><span class="qtext">GROUP
BY</span></a>, including member loops using <a href="../abaploop_at_group" class="blue"><code style="display: inline;"><span class="qtext">LOOP AT GROUP</span></code></a>.
</li>

<li>
A common case is when the internal table is sorted exactly by the order of the components of its row
type, by the first component first, then the second component, and so on. In this case, control level
processing can also be expressed using a grouping with the addition <a href="../abaploop_at_itab_group_by" class="blue"><code style="display: inline;"><span class="qtext">GROUP BY</span></code></a>.
</li>

<li>
If possible, the use of the addition <a href="../abaploop_at_itab_group_by" class="blue"><span class="qtext">GROUP
BY</span></a> is recommended, since the grouping is not determined by the structure of the rows and the processing order in this case. <br>
</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>See <a href="../abenat_itab_abexas" class="blue">Examples of Control Level Processing</a>.  </p>
<p><a name="@@FIRST@@AT - itab@@"></a>
</div></p>
<h3 id="addition-1">Addition 1</h3>
<p><code style="display: inline;"><span class="qtext">...&#xA0;&#xA0;FIRST</span></code>   <br><!-- /A --></p>
<h3 id="effect_1">Effect</h3>
<p>The control level is defined by the first row of the internal table. The control break takes place when this row is read.  </p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>In the control level <code style="display: inline;"><span class="qtext">AT FIRST</span></code>, the current control key does not contain any
components and all character-like components of the work area <code style="display: inline;"><span class="qtext">wa</span></code> are filled with &quot;*&quot; and all remaining components are set to their initial value.  </p>
<p><a name="@@NEW@@AT - itab@@"></a>
<a name="@@END OF@@AT -itab@@"></a>
</div></p>
<h3 id="addition-2">Addition 2</h3>
<p><code style="display: inline;"><span class="qtext">... {NEW}|{END OF} compi</span></code>   <br><!-- /A --></p>
<h3 id="effect_2">Effect</h3>
<p>Control levels are defined by the beginning or end of a group of rows with the same content in the component
<code style="display: inline;"><span class="qtext">compi</span></code> (where <code style="display: inline;"><span class="qtext">i</span></code> = <code style="display: inline;"><span class="qtext">1</span></code>,
<code style="display: inline;"><span class="qtext">2</span></code>, and so on) and in the components to the left of <code style="display: inline;"><span class="qtext">compi</span></code>.
The content of these components determines the control key. The control breaks take place when the content
of the component <code style="display: inline;"><span class="qtext">compi</span></code> or another component to the left of <code style="display: inline;"><span class="qtext">compi</span></code> changes.</p>
<p>The <code style="display: inline;"><span class="qtext">compi</span></code> components can be specified as described in
<a href="../abenitab_components" class="blue">Specification of Components</a>, with the limitation that access to data objects using references is not possible here. The following is therefore not possible:</p>
<ul>

<li>
Specifying data objects using data references
</li>
<li>
Specifying attributes of objects using object references
<br></li>

</ul>

<p>Otherwise, the specified components can have any data type. The relevant <a href="../abenlogexp_rules" class="blue">comparison rules</a> apply to the evaluation.  </p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>
In this case, control levels consist of the contiguous rows of the internal table that have the same content in an initial part.
</li>

<li>
An <a href="../abapat_itab_obsolete" class="blue">obsolete variant</a> allows field symbols to also be specified, outside of classes <code style="display: inline;"><span class="qtext">compi</span></code>. <br>
</li>

<p></ul>
<a name="@@LAST@@AT - itab@@"></a>
</div></p>
<h3 id="addition-3">Addition 3</h3>
<p><code style="display: inline;"><span class="qtext">...&#xA0;&#xA0;LAST</span></code>   <br><!-- /A --></p>
<h3 id="effect_3">Effect</h3>
<p>The control level is defined by the last row of the internal table. The control break takes place when this row is read.  </p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>In the control level <code style="display: inline;"><span class="qtext">AT LAST</span></code>, the current control key does not contain any
components and all character-like components of the work area <code style="display: inline;"><span class="qtext">wa</span></code> are filled with &quot;*&quot; and all remaining components are set to their initial value.  </p>
</div>

<h3 id="exceptions">Exceptions</h3>
<p><br style="display: block">
<div markdown="span" class="admonition tip">
<p class="admonition-title">Non-Catchable Exceptions</p>
<ul></p>
<li>
<span class="italic">Cause:</span> Invalid substring access when the control break criterion is specified dynamically. <br><span class="italic">Runtime Error:</span> <code style="display: inline;"><span class="qtext">AT_BAD_PARTIAL_FIELD_ACCESS</span></code>
</li>

<li>
<span class="italic">Cause:</span> The control break criterion is specified dynamically using the field symbol and the field symbol does not point to the <code style="display: inline;"><span class="qtext">LOOP</span></code> output area. <br>
<span class="italic">Runtime Error:</span> <code style="display: inline;"><span class="qtext">AT_ITAB_FIELD_INVALID</span></code>
</li>

<li>
<span class="italic">Cause:</span> The control break criterion is specified dynamically using <span class="qtext">
(name)</span> and the <code style="display: inline;"><span class="qtext">name</span></code> field does not contain a valid substring name. <br><span class="italic">Runtime Error:</span> <code style="display: inline;"><span class="qtext">ITAB_ILLEGAL_COMPONENT</span></code>
</li>

<li>
<span class="italic">Cause:</span> Overflow of totals with <code style="display: inline;"><span class="qtext">SUM</span></code>. <br><span class="italic">Runtime Error:</span> <code style="display: inline;"><span class="qtext">SUM_OVERFLOW</span></code> <br>
</li>

</ul>

</div>

<h3 id="continue">Continue</h3>
<p><a href="../abapsum" class="blue">SUM</a></p>
<p><a href="../abapendat" class="blue">ENDAT</a></p>
<p><a href="../abenat_itab_abexas" class="blue">Examples of Control Level Processing</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>