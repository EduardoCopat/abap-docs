


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Components of the Persistence Service - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#components-of-the-persistence-service" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Components of the Persistence Service
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="ABAP docs" class="md-nav__link">
      ABAP docs
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cl_persistent" class="md-nav__link">
    CL_persistent
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ca_persistent-and-cb_persistent-classes" class="md-nav__link">
    CA_persistent and CB_persistent classes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interfaces-for-the-class-agent" class="md-nav__link">
    Interfaces for the Class Agent
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#management-interface-for-the-persistent-class" class="md-nav__link">
    Management Interface for the Persistent Class
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-interfaces-and-classes" class="md-nav__link">
    Other Interfaces and Classes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agent-attribute-of-the-class-agent" class="md-nav__link">
    AGENT Attribute of the Class Agent
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#most-important-methods-of-the-class-agent" class="md-nav__link">
    Most Important Methods of the Class Agent
  </a>
  
    <nav class="md-nav" aria-label="Most Important Methods of the Class Agent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#methods-inherited-from-cb_persistent" class="md-nav__link">
    Methods inherited from CB_persistent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods-of-the-interface-if_os_factory" class="md-nav__link">
    Methods of the Interface IF_OS_FACTORY
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods-of-the-interface-if_os_ca_persistency" class="md-nav__link">
    Methods of the Interface IF_OS_CA_PERSISTENCY
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods-of-the-interface-if_os_ca_instance" class="md-nav__link">
    Methods of the Interface IF_OS_CA_INSTANCE
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#methods-of-if_os_state" class="md-nav__link">
    Methods of IF_OS_STATE
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.40/abenos_persistence_comps.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="components-of-the-persistence-service">Components of the Persistence Service</h1>
<p>The persistence service is a software layer that manages persistent objects. This software layer consists
of a general part and a class-specific part. It is made up of global classes and interfaces from the Class Library. The class-specific part is specially generated for each existing persistent class.</p>
<ul>

<li><a href="#@@ITOC@@CL_PERSISTENT_1" class="blue">CL_persistent</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@CA_PERSISTENTANDCB_PERSISTENTCLASSES_2" class="blue">CA_persistent and CB_persistent classes</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@INTERFACESFORTHECLASSAGENT_3" class="blue">Interfaces for the Class Agent</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@MANAGEMENTINTERFACEFORTHEPERSISTENTCLASS_4" class="blue">Management Interface for the Persistent Class</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@OTHERINTERFACESANDCLASSES_5" class="blue">Other Interfaces and Classes</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@AGENTATTRIBUTEOFTHECLASSAGENT_6" class="blue">AGENT Attribute of the Class Agent</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@MOSTIMPORTANTMETHODSOFTHECLASSAGENT_7" class="blue">Most Important Methods of the Class Agent</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@METHODSINHERITEDFROMCB_PERSISTENT_8" class="blue">Methods inherited from CB_persistent</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@METHODSOFTHEINTERFACEIF_OS_FACTORY_9" class="blue">Methods of the Interface IF_OS_FACTORY</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@METHODSOFTHEINTERFACEIF_OS_CA_PERSISTENCY_10" class="blue">Methods of the Interface IF_OS_CA_PERSISTENCY</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@METHODSOFTHEINTERFACEIF_OS_CA_INSTANCE_11" class="blue">Methods of the Interface IF_OS_CA_INSTANCE</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@METHODSOFIF_OS_STATE_12" class="blue">Methods of IF_OS_STATE</a></li>

</ul>

<p><a name="@@ITOC@@CL_PERSISTENT_1"></a>
<s><i>7.31</i></s> <b>7.40</b> <a href="../abenos_persistence_comps">7.54</a></p>
<p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP - Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_language_external_data" class="blue">Processing External Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_sql" class="blue">ABAP Database Accesses</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_object_services" class="blue">Object Services</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_object_services_persist" class="blue">Persistence Service</a>&#xA0;</small></p>
<h2 id="cl_persistent">CL_persistent</h2>
<p>The class CL_persistent is a class created as a persistent class using Class Builder. The objects of
this class are managed by the persistence service. These objects are known as managed objects (note
that a managed object does not necessarily have to be a persistent object). Class Builder generates the SET and GET methods for the attributes of this class.</p>
<p><a name="@@ITOC@@CA_PERSISTENTANDCB_PERSISTENTCLASSES_2"></a></p>
<h2 id="ca_persistent-and-cb_persistent-classes">CA_persistent and CB_persistent classes</h2>
<p>For each persistent class (CL_persistent), Class Builder generated two further classes: CA_persistent
and CB_persistent. These classes form the class-specific part of the persistence service. CB_persistent is a subclass of a general abstract superclass of all class agents, <span class="lnkgrey">CL_OS_CA_COMMON</span>.</p>
<p>CA_persistent is known as the class agent (or class actor), which is used to manage the managed object
of the class CL_persistent, and where database accesses actually take place. The class agent inherits
its methods from the abstract superclass CB_persistent. The developer can extend the class agent and
redefine its methods (in particular, those for accessing the database). The superclass CB_persistent
cannot be modified. Each class agent is a friend of the managed class. The class agent is a singleton: only one instance of a class agent is created when it is accessed for the first time.</p>
<p><a name="@@ITOC@@INTERFACESFORTHECLASSAGENT_3"></a></p>
<h2 id="interfaces-for-the-class-agent">Interfaces for the Class Agent</h2>
<p>The class agent implements the interfaces <span class="lnkgrey">IF_OS_FACTORY</span>, <span class="lnkgrey">IF_OS_CA_PERSISTENCY</span>
and <span class="lnkgrey">IF_OS_CA_INSTANCE</span>. The interface methods can be used alongside the
class methods. Interfaces also offer generic access by means of interface reference variables. In the
ABAP program, interface reference variables of the same type can be used to access different class agents for different persistent classes. The interfaces represent the general part of the persistence service.</p>
<p><a name="@@ITOC@@MANAGEMENTINTERFACEFORTHEPERSISTENTCLASS_4"></a></p>
<h2 id="management-interface-for-the-persistent-class">Management Interface for the Persistent Class</h2>
<p>The persistent class implements the management interface <span class="lnkgrey">IF_OS_STATE</span>, which enables the managed objects of different persistent classes to be accessed in the same way.</p>
<p><a name="@@ITOC@@OTHERINTERFACESANDCLASSES_5"></a></p>
<h2 id="other-interfaces-and-classes">Other Interfaces and Classes</h2>
<p>The persistent class and the class agent are related to other interfaces and classes in the persistence
service, but these are mainly used internally. To find the names of these object types, refer to the definition of the persistent class and class agent in Class Builder.</p>
<p><a name="@@ITOC@@AGENTATTRIBUTEOFTHECLASSAGENT_6"></a></p>
<h2 id="agent-attribute-of-the-class-agent">AGENT Attribute of the Class Agent</h2>
<p>The AGENT static attribute is a reference variable with the type of the class CA_persistent. The first
time this attribute is accessed in an ABAP program, the static constructor of the class CA_persistent
generates exactly one instance of this class, to which the AGENT attribute then points. This object
is part of the persistence service; its methods are then used to manage the object of the persistent
class. There is only one object of the class CA_persistent. The class agent manages one or more objects of the appropriate class. Each object must have a unique key.</p>
<p><a name="@@ITOC@@MOSTIMPORTANTMETHODSOFTHECLASSAGENT_7"></a></p>
<h2 id="most-important-methods-of-the-class-agent">Most Important Methods of the Class Agent</h2>
<p>Class Builder generates the following methods when the persistent class is created. They can then be
redefined in the class CA_persistent. There are other methods available for internal use within the persistence service.</p>
<p><a name="@@ITOC@@METHODSINHERITEDFROMCB_PERSISTENT_8"></a></p>
<h3 id="methods-inherited-from-cb_persistent">Methods inherited from CB_persistent</h3>
<ul>

<li>CREATE_PERSISTENT</li>

<p></ul>
<dd>
Creates a new persistent object. The interface is generated according to the
<a href="../abenos_persistence_mapping" class="blue">mapping</a> of the persistent class to the ABAP
Dictionary. If the persistent object is managed using business keys, the interface will contain the
relevant input parameters. If the persistent object is managed using GUIDs, a new instance GUID is generated
when the object is created. There are optional importing parameters for all persistent attributes, regardless
of which keys manage the object. The return value RESULT has the type of the persistent class and contains
a reference to the generated persistent object. Each program can contain only one object for each key.
The object is saved to the database using the <code style="display: inline;"><span class="qtext">COMMIT WORK</span></code> statement. When
the persistence service creates the object, it does not check whether the object already exists in the
database. An error occurs only when an attempt is made to save an existing object. It is therefore best to check whether the object already exists using the GET_PERSISTENT method.
</dd>
<ul></p>
<li>GET_PERSISTENT</li>

<p></ul>
<dd>
Loads a persistent object from the database and generates a suitable runtime object in the ABAP program.
The interface is generated according to the mapping between the persistent class and the ABAP Dictionary.
The method is only available if the persistent object is managed using business keys, and has the relevant
input parameters. The return value <code style="display: inline;"><span class="qtext">RESULT</span></code> has the type of the persistent
class and contains a reference to the loaded persistent object. If an object with the same key already
exists in the program, it is not loaded again; instead, the system returns the reference to the object
already loaded. Changes to the object&#x2019;s attributes are saved to the database using the <code style="display: inline;"><span class="qtext">COMMIT WORK</span></code> statement.
</dd>
<ul></p>
<li>DELETE_PERSISTENT</li>

<p></ul>
<dd>
Deletes a persistent object. To delete the persistent object in the database as well, the statement
<code style="display: inline;"><span class="qtext">COMMIT WORK</span></code> must be executed. The interface is generated according to the
mapping between the persistent class and the ABAP Dictionary. The method is only available if the persistent object is managed using business keys, and has the relevant input parameters.
</dd>
<ul></p>
<li>CREATE_TRANSIENT</li>

<p></ul>
<dd>
Generates a transient object of the persistent class. The method interface is the same as the interface
for the CREATE_PERSISTENT method. Objects created using CREATE_TRANSIENT are managed by the persistence
service but have no connection to the database. CREATE_TRANSIENT cannot be used to generate more than one object with the same key in the program.
</dd>
<ul></p>
<li>GET_TRANSIENT</li>

<p></ul>
<dd>
Gets the reference to a transient object of the persistent class. The method interface is the same as
the interface for the CREATE_PERSISTENT method. The object must have already been created with the CREATE_TRANSIENT method. The system does not look for a corresponding persistent object in the database.
</dd>
<a name="@@ITOC@@METHODSOFTHEINTERFACEIF_OS_FACTORY_9"></a></p>
<h3 id="methods-of-the-interface-if_os_factory">Methods of the Interface IF_OS_FACTORY</h3>
<ul>

<li>IF_OS_FACTORY~CREATE_PERSISTENT</li>

<p></ul>
<dd>
If the persistent class is not managed using business keys, this interface method can be used (instead
of the class method CREATE_PERSISTENT) to generate a persistent object of the class CL_persistent. The
return value RESULT has the type of the persistent class and contains a reference to the generated persistent object. When the object is created, a new instance GUID is generated.
</dd>
<ul></p>
<li>IF_OS_FACTORY~CREATE_PERSISTENT_BY_KEY</li>

<p></ul>
<dd>
If the persistent class is managed using business keys, this interface method can be used (instead of
the class method CREATE_PERSISTENT) to generate a persistent object of the class CL_persistent. The
key is passed as a structure (with key fields as components) to the generic parameter I_KEY of type
ANY. The return value RESULT has the general type <code style="display: inline;"><span class="qtext">REF TO OBJECT</span></code> and contains
a reference to the generated persistent object. If the persistent object is managed using GUIDs, a new instance GUID is generated when the object is created.
</dd>
<ul></p>
<li>IF_OS_FACTORY~REFRESH_PERSISTENT</li>

<p></ul>
<dd>
This method forces the system to load the current attributes of a persistent object from the database
into the ABAP program. It does this by passing the object reference to the input parameter I_OBJECT
of type IF_OS_STATE. The current attributes are then fetched from the database when it is next accessed
(on-request loading). The management state of the object must be either OSCON_OSTATUS_LOADED or OSCON_OSTATUS_NOT_LOADED.
Immediately after the method has been executed, but before the attribute has been accessed, the management state is OSCON_OSTATUS_NOT_LOADED.
</dd>
<ul></p>
<li>IF_OS_FACTORY~DELETE_PERSISTENT</li>

<p></ul>
<dd>
Deletes a persistent object. It does this by passing the object reference to the input parameter I_OBJECT
of type IF_OS_STATE. To delete the persistent object in the database as well, the statement <code style="display: inline;"><span class="qtext">COMMIT WORK</span></code> must be executed.
</dd>
<ul></p>
<li>IF_OS_FACTORY~CREATE_TRANSIENT</li>

<p></ul>
<dd>
If the persistent class is not managed using business keys, this interface method can be used (instead
of the class method CREATE_TRANSIENT) to generate a transient object of the class CL_persistent. The return value RESULT has the type of the persistent class and contains a reference to the generated persistent object.
</dd>
<ul></p>
<li>IF_OS_FACTORY~CREATE_TRANSIENT_BY_KEY</li>

<p></ul>
<dd>
If the persistent class is managed using business keys, this interface method can be used (instead of
the class method CREATE_TRANSIENT) to generate a persistent object of the class CL_persistent. The key
is passed to the generic parameter I_KEY of type ANY as a structure whose components are the key fields.
The return value RESULT has the general type <code style="display: inline;"><span class="qtext">REF TO OBJECT</span></code> and contains a reference to the generated transient object.
</dd>
<ul></p>
<li>IF_OS_FACTORY~RELEASE</li>

<p></ul>
<dd>
Completely removes an object managed by the class agent from the management of the persistence service.
It does this by passing the object reference to the input parameter I_OBJECT of type IF_OS_STATE. The management state of the object must be either OSCON_OSTATUS_LOADED or OSCON_OSTATUS_NOT_LOADED.
</dd>
<a name="@@ITOC@@METHODSOFTHEINTERFACEIF_OS_CA_PERSISTENCY_10"></a></p>
<h3 id="methods-of-the-interface-if_os_ca_persistency">Methods of the Interface IF_OS_CA_PERSISTENCY</h3>
<ul>

<li>IF_OS_CA_PERSISTENCY~GET_PERSISTENT_BY_OID</li>

<p></ul>
<dd>
If the persistent class is not managed using business keys, this interface method can be used (instead
of the class method GET_PERSISTENT) to get a persistent object from the database and generate a suitable
runtime object in the ABAP program. The object ID is passed to the parameter I_OID of type OS_GUID.
The return value RESULT has the general type <code style="display: inline;"><span class="qtext">REF TO OBJECT</span></code> and contains a reference to the persistent object.
</dd>
<ul></p>
<li>IF_OS_CA_PERSISTENCY~GET_PERSISTENT_BY_KEY</li>

<p></ul>
<dd>
If the persistent class is managed using business keys, this interface method can be used (instead of
the class method GET_PERSISTENT) to get a persistent object from the database and generate a suitable
runtime object in the ABAP program. The key is passed as a structure (with key fields as components)
to the generic parameter I_KEY of type ANY. The return value RESULT has the general type <code style="display: inline;"><span class="qtext">REF TO OBJECT</span></code> and contains a reference to the persistent object.
</dd>
<ul></p>
<li>IF_OS_CA_PERSISTENCY~GET_PERSISTENT_BY_OID_TAB</li>

<p></ul>
<dd>
If the persistent class is managed using business keys, this interface method can be used to get more
than one persistent object simultaneously from the database and to generate suitable runtime objects
in the ABAP program. The object IDs are passed to the I_OID_TAB parameter of type INDEX TABLE in an
internal table. The return value RESULT is of general type OSREFTAB and contains a table of references
to the persistent objects loaded. For each entry in the table, the result table has a corresponding
entry at the same position that either contains an object reference to the loaded object or is initial if no object was found for the relevant ID. There is no corresponding method in the class agent.
</dd>
<ul></p>
<li>IF_OS_CA_PERSISTENCY~GET_PERSISTENT_BY_KEY_TAB</li>

<p></ul>
<dd>
If the persistent class is managed using business keys, this interface method can be used to get more
than one persistent object simultaneously from the database and to generate suitable runtime objects
in the ABAP program. The object keys are passed in an internal table, whose row type has the key fields
as components, to generic parameter I_KEY_TAB of type INDEX TABLE. The return value RESULT is of general
type OSREFTAB and contains a table of references to the persistent objects loaded. For each entry in
the key table, the result table has a corresponding entry at the same position that either contains
an object reference to the loaded object or is initial if no object was found for the relevant key.
There is no corresponding method in the class agent. This method can only be used if the persistent class must have been generated for multiple access.
</dd>
<ul></p>
<li>IF_OS_CA_PERSISTENCY~GET_PERSISTENT_BY_QUERY</li>

<p></ul>
<dd>
This interface method can be used to get more than one persistent object simultaneously from the database
and to generate suitable runtime objects in the ABAP program. A logical expression, which compares the
attributes of the persistent class with a choice of parameters or values, determines which persistent
objects are loaded. The logical expression is implemented by an instance of a class that implements
the interface <span class="lnkgrey">IF_OS_QUERY</span>. An instance of this type is a query object,
often abbreviated to query, and can be generated using the method CREATE_QUERY of the interface <span class="lnkgrey">
IF_OS_QUERY_MANAGER</span>. A reference to the query is passed to the parameter I_QUERY. The comparison
values for the query are passed in an internal table to the I_PARAMETER_TAB parameter. If the query
requires a maximum of three comparison values with an elementary type, these can also be passed individually
to parameters I_PAR1, I_PAR2, and I_PAR3. Use the I_SUBCLASSES parameter to determine whether instances
of subclasses of the persistent class are also loaded. Use the I_UPTO parameter to determine the maximum
number of instances that can be loaded. The return value RESULT is of general type OSREFTAB and contains
a table of references to the persistent objects loaded. The query can also be used to determine how
the object references are sorted. There is no corresponding method in the class agent. This method can only be used if the persistent class must have been generated for multiple access.
</dd>
<a name="@@ITOC@@METHODSOFTHEINTERFACEIF_OS_CA_INSTANCE_11"></a></p>
<h3 id="methods-of-the-interface-if_os_ca_instance">Methods of the Interface IF_OS_CA_INSTANCE</h3>
<ul>

<li>IF_OS_CA_INSTANCE~GET_STATUS</li>

<p></ul>
<dd>
Gets the management state of a managed object. The input parameter, with the general type <span class="qtext">REF
TO OBJECT</span>, passes a reference to the managed object. The return value RESULT has the type OS_STATUS
and can have the value 0, 1, 2, 3, 4, or 10. This corresponds to the constants OSTATUS_... of the type group OSCON.
</dd>
<ul></p>
<li>IF_OS_CA_INSTANCE~GET_NOT_LOADED</li>

<p></ul>
<dd>
Gets all the objects managed by the class agent in the management state OSCON_OSTATUS_NOT_LOADED (0). The return value is an internal table with the general row type <code style="display: inline;"><span class="qtext">REF TO object</span></code>.
</dd>
<ul></p>
<li>IF_OS_CA_INSTANCE~GET_CREATED</li>

<p></ul>
<dd>
Gets all the objects managed by the class agent in the management state OSCON_OSTATUS_NEW (1). The return value is an internal table with the general row type <code style="display: inline;"><span class="qtext">REF TO object</span></code>.
</dd>
<ul></p>
<li>IF_OS_CA_INSTANCE~GET_LOADED</li>

<p></ul>
<dd>
Gets all the objects managed by the class agent in the management state OSCON_OSTATUS_LOADED (2). The return value is an internal table with the general row type <code style="display: inline;"><span class="qtext">REF TO object</span></code>.
</dd>
<ul></p>
<li>IF_OS_CA_INSTANCE~GET_CHANGED</li>

<p></ul>
<dd>
Gets all the objects managed by the class agent in the management state OSCON_OSTATUS_CHANGED (3). The return value is an internal table with the general row type <code style="display: inline;"><span class="qtext">REF TO object</span></code>.
</dd>
<ul></p>
<li>IF_OS_CA_INSTANCE~GET_DELETED</li>

<p></ul>
<dd>
Gets all the objects managed by the class agent in the management state OSCON_OSTATUS_DELETED (4). The return value is an internal table with the general row type <code style="display: inline;"><span class="qtext">REF TO object</span></code>.
</dd>
<ul></p>
<li>IF_OS_CA_INSTANCE~TRANSIENT</li>

<p></ul>
<dd>
Gets all the objects managed by the class agent in the management state OSCON_OSTATUS_TRANSIENT (10). The return value is an internal table with the general row type <code style="display: inline;"><span class="qtext">REF TO object</span></code>.
</dd>
<a name="@@ITOC@@METHODSOFIF_OS_STATE_12"></a></p>
<h2 id="methods-of-if_os_state">Methods of IF_OS_STATE</h2>
<p>The interface <span class="lnkgrey">IF_OS_STATE</span> defines the interface of a class that can be managed with Object Services. It enables the objects of this class to be monitored and managed.</p>
<ul>

<li>IF_OS_STATE~INIT</li>

</ul>

<dd>
Is called when a persistent or transient object is created and when a persistent object is loaded after
persistent attributes have been set. Here, for example, transient attributes can be initialized and checking agents or event handlers registered.
</dd>

<ul>

<li>IF_OS_STATE~INVALIDATE</li>

</ul>

<dd>
Is called; when a persistent object is deleted, when forcing the reload of a persistent object, and
when starting a subsequent transaction after resetting the persistent attributes for persistent objects.
Here, for example, transient attributes can be reset and event handlers deregistered. It is also called when the UNDO service is used for resetting.
</dd>

<ul>

<li>IF_OS_STATE~HANDLE_EXCEPTION</li>

</ul>

<dd>
Is called when an exception occurs in the GET and SET methods. It raises the exception, which is passed
as a parameter. The exceptions raised can be handled here. In general, however, the exceptions should be handled by the user of these methods.
</dd>

<ul>

<li>IF_OS_STATE~GET and IF_OS_STATE~SET</li>

</ul>

<dd>
These methods are for internal use and must not be changed.
</dd>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../abenos_persistence_commit/" title="Saving Persistent Objects" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Saving Persistent Objects
              </div>
            </div>
          </a>
        
        
          <a href="../abenos_persistence_inheritance/" title="Inheritance of Persistent Classes" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Inheritance of Persistent Classes
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>