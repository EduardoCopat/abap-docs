


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Shared Objects - CL_SHM_AREA - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#shared-objects-cl_shm_area" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Shared Objects - CL_SHM_AREA
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="ABAP docs" class="md-nav__link">
      ABAP docs
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instance-attributes" class="md-nav__link">
    Instance Attributes
  </a>
  
    <nav class="md-nav" aria-label="Instance Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#properties" class="md-nav__link">
    PROPERTIES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inst_name" class="md-nav__link">
    INST_NAME
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client" class="md-nav__link">
    CLIENT
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#static-methods" class="md-nav__link">
    Static Methods
  </a>
  
    <nav class="md-nav" aria-label="Static Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multi_attach" class="md-nav__link">
    MULTI_ATTACH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inputoutput-parameters" class="md-nav__link">
    Input/Output Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#input-parameters" class="md-nav__link">
    Input Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#caution" class="md-nav__link">
    Caution
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-parameters" class="md-nav__link">
    Output Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detach_all_areas" class="md-nav__link">
    DETACH_ALL_AREAS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#return-value" class="md-nav__link">
    Return Value
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instance-methods" class="md-nav__link">
    Instance Methods
  </a>
  
    <nav class="md-nav" aria-label="Instance Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#detach" class="md-nav__link">
    DETACH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exceptions" class="md-nav__link">
    Exceptions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detach_commit" class="md-nav__link">
    DETACH_COMMIT
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exceptions_1" class="md-nav__link">
    Exceptions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detach_rollback" class="md-nav__link">
    DETACH_ROLLBACK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exceptions_2" class="md-nav__link">
    Exceptions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_lock_kind" class="md-nav__link">
    GET_LOCK_KIND
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#return-value_1" class="md-nav__link">
    Return Value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_root" class="md-nav__link">
    GET_ROOT
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#return-value_2" class="md-nav__link">
    Return Value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exceptions_3" class="md-nav__link">
    Exceptions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instance-events" class="md-nav__link">
    Instance Events
  </a>
  
    <nav class="md-nav" aria-label="Instance Events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shm_commit_event" class="md-nav__link">
    SHM_COMMIT_EVENT
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shm_rollback_event" class="md-nav__link">
    SHM_ROLLBACK_EVENT
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#continue" class="md-nav__link">
    Continue
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.40/abenshm_cl_shm_area.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="shared-objects-cl_shm_area">Shared Objects - CL_SHM_AREA</h1>
<p>The class <span class="lnkgrey">CL_SHM_AREA</span> is a subclass of
<a href="../abenshm_cl_abap_memory_area" class="blue">CL_ABAP_MEMORY_AREA</a> and the superclass of
all area classes that are generated when an area is created using transaction <span class="lnkgrey">SHMA</span>. This class contains general attributes and methods for the corresponding
<a href="../abenarea_handle_glosry" class="grey" title="Glossary Entry">area handles</a>.</p>
<ul>

<li><a href="#@@ITOC@@INSTANCEATTRIBUTES_1" class="blue">Instance Attributes</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@PROPERTIES_2" class="blue">PROPERTIES</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@INST_NAME_3" class="blue">INST_NAME</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@CLIENT_4" class="blue">CLIENT</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@STATICMETHODS_5" class="blue">Static Methods</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@MULTI_ATTACH_6" class="blue">MULTI_ATTACH</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@DETACH_ALL_AREAS_7" class="blue">DETACH_ALL_AREAS</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@INSTANCEMETHODS_8" class="blue">Instance Methods</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@DETACH_9" class="blue">DETACH</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@DETACH_COMMIT_10" class="blue">DETACH_COMMIT</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@DETACH_ROLLBACK_11" class="blue">DETACH_ROLLBACK</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@GET_LOCK_KIND_12" class="blue">GET_LOCK_KIND</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@GET_ROOT_13" class="blue">GET_ROOT</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@INSTANCEEVENTS_14" class="blue">Instance Events</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@SHM_COMMIT_EVENT_15" class="blue">SHM_COMMIT_EVENT</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@SHM_ROLLBACK_EVENT_16" class="blue">SHM_ROLLBACK_EVENT</a></li>

</ul>

<p><a name="@@ITOC@@INSTANCEATTRIBUTES_1"></a>
<s><i>7.31</i></s> <b>7.40</b> <a href="../abenshm_cl_shm_area">7.54</a></p>
<p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP - Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abencreate_objects" class="blue">Creating Objects and Values</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_shared_objects" class="blue">Shared Objects</a>&#xA0;&#x2192;&#xA0;
<a href="../abenshm_classes" class="blue">Shared Objects - Classes and Interfaces</a>&#xA0;&#x2192;&#xA0;
<a href="../abenshm_cl_abap_memory_area" class="blue">Shared Objects - CL_ABAP_MEMORY_AREA</a>&#xA0;</small></p>
<h2 id="instance-attributes">Instance Attributes</h2>
<p><a name="@@ITOC@@PROPERTIES_2"></a></p>
<h3 id="properties">PROPERTIES</h3>
<p>Structure of type SHM_PROPERTIES with the READ-ONLY property. The components in the structure contain area properties that are generally set using transaction SHMA. The components in the structure are:</p>
<ul>

<li>AUTO_BUILD</li>

</ul>

<dd>
If the value is ABAP_TRUE, the area instance versions of an area can be built automatically. The prerequisite
for the value ABAP_TRUE is that the component AUTO_BUILD_CLASS is not initial. If the value is ABAP_FALSE, the area instance versions of an area cannot be built automatically.
</dd>

<ul>

<li>AUTO_BUILD_CLASS</li>

</ul>

<dd>
Contains the name of the <a href="../abenshm_area_constructor_class" class="blue">area constructor class</a>, which implements the BUILD constructor using the
<a href="../abenshm_if_shm_build_instance" class="blue">IF_SHM_BUILD_INSTANCE</a> interface to build
area instance versions automatically. This component is only filled if the area handle is bound by an exclusive lock to an area instance version, and is otherwise initial.
</dd>

<ul>

<li>BUILD_KIND</li>

</ul>

<dd>
Specifies when area instance versions of the area are built automatically using the area constructor in the
<a href="../abenshm_area_constructor_class" class="blue">area constructor class</a>: If the value is
CL_SHM_AREA=&gt;BUILD_KIND_NONE, area instances versions are not built automatically. This is always the
case if the component AUTO_BUILD has the value ABAP_FALSE. If the component AUTO_BUILD has the value
ABAP_TRUE, the component BUILD_KIND can have the values CL_SHM_AREA=&gt;BUILD_KIND_DUE_TO_READ_REQUEST
or CL_SHM_AREA=&gt;BUILD_KIND_DUE_TO_INVALIDATION. If the component has the value CL_SHM_AREA=&gt;BUILD_KIND_DUE_TO_READ_REQUEST
and no active area instance versions exist, then the area constructor is called automatically for when
a read access occurs. If the component has the value CL_SHM_AREA=&gt;BUILD_KIND_DUE_TO_INVALIDATION, the
area constructor is called in the same way as with the CL_SHM_AREA=&gt;BUILD_KIND_DUE_TO_READ_REQUEST value.
The constructor is still called during the transition from an active version to an obsolete or expired version, without creating an active area instance version.
</dd>

<ul>

<li>CLIENT_DEPENDENT</li>

</ul>

<dd>
If the value is ABAP_TRUE, the area is client-specific. With area instance versions of the same area,
the version names and the current client identifier in the CLIENT attribute are used to distinguish
the versions. If the component has the value ABAP_FALSE (default setting), the area is not client-specific and CLIENT is initial.
</dd>

<ul>

<li>DISPLACE_KIND</li>

</ul>

<dd>
Controls whether area instance versions of the area may be displaced. If the value is CL_SHM_AREA=&gt;DISPLACE_KIND_NONE,
they are not displaceable (default setting). If the value is CL_SHM_AREA=&gt;DISPLACE_KIND_SERIALIZABLE,
they are displaceable. Before displacement, the content is serialized and is saved persistently. It
is reloaded into the shared memory with a read or update access to the area instance version. The prerequisite
for this is that each class instantiated in the area instance has to implement the <span class="lnkgrey">IF_SERIALIZABLE_OBJECT</span>
interface. If the component has the value CL_SHM_AREA=&gt;DISPLACE_KIND_DISPLACABLE, the area instance
versions are displaceable, and the content is lost with a displacement (complete displacement). Displacement
takes place as long as no area handle is bound to an area instance version of the displaceable area instance at the same time.
</dd>

<ul>

<li>HAS_VERSIONS</li>

</ul>

<dd>
If the value is ABAP_TRUE, the area supports versioning. If the value is ABAP_FALSE, there is a maximum of one single area instance version.
</dd>

<ul>

<li>IDLE_TIME</li>

</ul>

<dd>
Specifies how many minutes an area instance version remains in the shared memory (after an exclusive
or shared lock has been released) before it is automatically deleted. If the value is 0 (default setting),
the area instance version is not deleted automatically. Values other than 0 are only possible if the
components INVALIDATE_TIME and REFRESH_TIME both have the value 0. In the case of transactional areas, time measurement begins with the first database commit after a lock is released using the method DETACH_COMMIT.
</dd>

<ul>

<li>INVALIDATE_TIME</li>

</ul>

<dd>
Specifies after how many minutes an area instance version becomes obsolete after an exclusive lock has
been released. If the value is 0 (default setting), an area instance version never becomes obsolete.
Values other than 0 are only possible if the components IDLE_TIME and REFRESH_TIME both have the value
0. With transactional areas, time measurement begins with the first database commit after a lock is released using the method DETACH_COMMIT.
</dd>

<ul>

<li>LIFE_CONTEXT</li>

</ul>

<dd>
Sets the visibility and lifetime of the area instance versions of the area. If this method has the value
CL_SHM_AREA=&gt;LIFE_CONTEXT_APPSERVER, the area instance versions exist until the application server is
shut down (default value). If it has the value CL_SHM_AREA=&gt;LIFE_CONTEXT_SESSION, the area instances exist until the current user&#x2019;s last
<a href="../abenmain_session_glosry" class="grey" title="Glossary Entry">ABAP session</a> ends. If
it has the value CL_SHM_AREA=&gt;LIFE_CONTEXT_MODE, the area instances exist for as long as the current
ABAP session is active. If it has the value CL_SHM_AREA=&gt;LIFE_CONTEXT_MEMORY, the area instances exist for as long as the data exists in the ABAP memory of the current call sequence.
</dd>

<ul>

<li>MAX_AREA_SIZE</li>

</ul>

<dd>
Specifies the maximum permitted size of an area in KB. The size of an area corresponds to the total memory requirement for all area instance versions. The default value is currently 0 and does not restrict the size.
</dd>

<ul>

<li>MAX_VERSION_SIZE</li>

</ul>

<dd>
Specifies the maximum permitted size of an area in KB. The size of an area corresponds to the total memory requirement for all area instance versions. The default value is currently 0 and does not restrict the size.
</dd>

<ul>

<li>MAX_VERSIONS</li>

</ul>

<dd>
Specifies the maximum number of area instance versions for an area instance of an area. Obsolete areas
are not counted. The default value is 0 and does not restrict the size. If the component HAS_VERSIONS
has the value ABAP_FALSE, MAX_VERSIONS is always 1. Otherwise, MAX_VERSIONS can be any non-negative number that is not 1.
</dd>

<ul>

<li>REFRESH_TIME</li>

</ul>

<dd>
Specifies after how many minutes an area instance version is built by the automatic call of the area
constructor. If the value is 0 (default setting), an area instance version is never built automatically.
Values other than 0 are only possible if the components IDLE_TIME and INVALIDATE_TIME both have the
value 0. In the case of transactional areas, time measurement begins with the first database commit
after a lock is released using the method DETACH_COMMIT. The prerequisite is that an active version
of the area instance version is present at the start of the build. If the method DETACH_COMMIT was not
successful, the preceding area instance version is preserved (if area are versioned) and the automatic
rebuild raises appropriate exceptions. The area constructor can catch the exceptions CATCH CX_SHM_ERROR
and CX_SHM_FAILURE itself and, for example, call the method INVALIDATE_INSTANCE of the area class to
delete a preceding area instance version explicitly. If an automatic area build fails due to the failure of the method DETACH_COMMIT, no automatic rebuilds take place until the method is executed successfully.
</dd>

<ul>

<li>TRANSACTIONAL</li>

</ul>

<dd>
If the value is ABAP_TRUE, the area is transactional (default setting). Changes to the area instance
versions of the area do not become active until after the method DETACH_COMMIT is executed with the
next database commit. If the value is ABAP_FALSE, the area is not transactional and changes become active immediately after the method DETACH_COMMIT is executed.
</dd>

<p><a name="@@ITOC@@INST_NAME_3"></a></p>
<h3 id="inst_name">INST_NAME</h3>
<p>Text field of type SHM_INST_NAME with the READ-ONLY property. This attribute contains the name of the current area instance. This attribute is set when an area instance is created using the method ATTACH_FOR_WRITE of the
<a href="../abenshm_area_class" class="blue">area class</a>.</p>
<p><a name="@@ITOC@@CLIENT_4"></a></p>
<h3 id="client">CLIENT</h3>
<p>Text field of type MANDT with the READ-ONLY property. In client-specific areas (the component CLIENT_DEPENDENT
of the structure PROPERTIES has the value ABAP_TRUE), this attribute contains the current client identifier of the area instance. The attribute is initial in a cross-client area.</p>
<p><a name="@@ITOC@@STATICMETHODS_5"></a></p>
<h2 id="static-methods">Static Methods</h2>
<p><a name="@@ITOC@@MULTI_ATTACH_6"></a></p>
<h3 id="multi_attach">MULTI_ATTACH</h3>
<p>Enables read, write or update locks to be set at the same time on multiple area instances of one or
more areas. The method MULTI_ATTACH is the only way to have change access to multiple area instances at the same time or in other words, set multiple exclusive locks at once.</p>
<h3 id="inputoutput-parameters">Input/Output Parameters</h3>
<ul>

<li>ATTACH_TAB of type SHM_ATTACH_TAB</li>

<p></ul>
<dd>
Internal table whose rows contain information about the individually requested locks. The components of the rows are:
</dd>
<ul class="circlem2"></p>
<li>AREA_NAME of type SHM_AREA_NAME <br> <br>Area name</li>

<p></ul>
<ul class="circlem2"></p>
<li>INST_NAME of type SHM_INST_NAME <br> <br>Name of the area instance. If the area instance should be accessed with the default name, the value CL_SHM_AREA=&gt;DEFAULT_INSTANCE must be passed.</li>

<p></ul>
<ul class="circlem2"></p>
<li>CLIENT of type MANDT <br> <br>Client identifier for client-specific areas. If the area instance
should be accessed with the current client identifier, the current client must also be passed. The component must be initial in the case of cross-client areas.</li>

<p></ul>
<ul class="circlem2"></p>
<li>LOCK_KIND of type SHM_LOCK_KIND <br> <br>Access type, possible values: CL_SHM_AREA=&gt;LOCK_KIND_READ, CL_SHM_AREA=&gt;LOCK_KIND_WRITE or CL_SHM_AREA=&gt;LOCK_KIND_UPDATE.</li>

<p></ul>
<ul class="circlem2"></p>
<li>ATTACH_MODE of type SHM_ATTACH_MODE <br> <br>Behavior for change accesses. Possible values: CL_SHM_AREA=&gt;ATTACH_MODE_DEFAULT, CL_SHM_AREA=&gt;ATTACH_MODE_DETACH_READER or CL_SHM_AREA=&gt;ATTACH_MODE_WAIT.</li>

<p></ul>
<ul class="circlem2"></p>
<li>LEVEL of type <code style="display: inline;"><span class="qtext">i</span></code> <br> <br>Order in which the locks are set. Table rows
with smaller values in the column are evaluated before table rows with larger values. If the values are equal, the order of the rows in the table is used as the deciding factor.</li>

<p></ul>
<ul class="circlem2"></p>
<li>HANDLE of type <code style="display: inline;"><span class="qtext">REF TO cl_shm_area</span></code> <br> <br>This column returns a reference
to an area handle for the area instance version for which the lock was requested (provided that this
was successful). If an exception is raised, the value of the column is initial for either all rows or for the affected rows (depending on the value of the input parameter IGNORE_ERRORS).</li>

<p></ul>
<ul class="circlem2"></p>
<li>EXCEPTION of type <code style="display: inline;"><span class="qtext">REF TO cx_root</span></code> <br> <br>If an exception is raised,
this column returns a reference to the exception object for either one or all relevant rows (depending
on the value of IGNORE_ERRORS). In addition to the exceptions of ATTACH methods for setting individual
locks in the area class, the exception CX_SHM_MULTI_ATTACH_ERROR can also be raised if: A write and
update lock is requested at the same time on an area instance version (exception text: DUPLICATE_CHANGE_LOCK),
a lock for a client other than the current client is requested on an area instance version with automatic
area building (exception text: ILLEGAL_AUTO_BUILD_CLIENT), a client identifier is specified for a cross-client area (exception text: ILLEGAL_CLIENT_FOR_AREA), in success cases, the column is initial..</li>

<p></ul>
<dd>
For more information about the individual components, see also the description of the parameters from the ATTACH methods for setting individual locks in the <a href="../abenshm_area_class" class="blue">area class</a>.
</dd></p>
<h3 id="input-parameters">Input Parameters</h3>
<ul>

<li>IGNORE_ERRORS of type ABAP_BOOL</li>

<p></ul>
<dd>
Controls error handling of methods. Possible values are ABAP_TRUE and ABAP_FALSE.
</dd>
<ul class="circlem2"></p>
<li>If ABAP_TRUE is passed, the system attempts to set the remaining locks following an exception when
the lock was set. In the rows of the ATTACH_TAB parameter where an error occurred, the reference to
the area handle in the HANDLE column is initialized and the reference in the EXCEPTION column is set to the corresponding exception object.</li>

<p></ul>
<ul class="circlem2"></p>
<li>If ABAP_FALSE is passed, the method is terminated following an exception while trying to set a lock.
The HANDLE column is initialized in all rows of the ATTACH_TAB parameter. The reference in the EXCEPTION column to the corresponding exception object is set in the row where the error occurred.</li>

<p></ul>
<dd>
All area instances for which an error occurred in the method MULTI_ATTACH , have the same state after
the method ends as they did before the method was called. This means the previous locks and the statuses remain the same.
</dd>
<ul></p>
<li>WAIT_TIME of type <code style="display: inline;"><span class="qtext">i</span></code></li>

<p></ul>
<dd>
Specifies the wait time in milliseconds for all rows of the ATTACH_TAB parameter, where the value CL_SHM_AREA=&gt;ATTACH_MODE_WAIT
is specified in the ATTACH_MODE column. The wait time must be greater than or equal to 0 and is distributed
to the relevant lock requests. If multiple exclusive locks are to be set and the first lock can be set
in the wait time, the remaining wait time is left over for the other locks. The time available for the remaining rows is therefore reduced by the wait time used each time such a row is evaluated.
</dd></p>
<h3 id="caution">Caution</h3>
<p>For change locks with a wait time that are set with MULTI_ATTACH, the same mutual exclusions apply as
to methods ATTACH_FOR_WRITE and ATTACH_FOR_UPDATE of the area class. This may prevent locks from being
set in certain cases. For example, if a MULTI_ATTACH with a wait time is executed in parallel in two
programs, where program 1 first sets exclusive lock A and an exclusive lock B, and program 2 does this
in reverse order and lock A is set in program 1 and lock B is set in program 2, at least one second
lock cannot be set. If there is a lock request for the second lock (lock B in program 1 and lock A in program 2), each program has to wait for the other program&#x2019;s wait time to expire.</p>
<h3 id="output-parameters">Output Parameters</h3>
<ul>

<li>ERROR_FLAG of type ABAP_BOOL</li>

<p></ul>
<dd>
Specifies whether the method resulted in one or more exceptions during the method. If ERROR_FLAG has
the value ABAP_FALSE, this means all locks were set successfully. If ERROR_FLAG has the value ABAP_TRUE,
not all locks could be set. The locks contain references to the exception object(s) for either one or
more rows (depending on the value of the IGNORE_ERRORS input parameter) of the EXCEPTION column of the ATTACH_TAB parameters.
</dd>
<a name="@@ITOC@@DETACH_ALL_AREAS_7"></a></p>
<h3 id="detach_all_areas">DETACH_ALL_AREAS</h3>
<p>Releases all of the locks of the current <a href="../abeninternal_session_glosry" class="grey" title="Glossary Entry">
internal session</a> on any area instance versions of any areas, which deactivates all of the internal
session&apos;s area handles. If a write or update lock is released, this rejects any changes that were made up to then to area instance versions.</p>
<h3 id="return-value">Return Value</h3>
<ul>

<li>RC of type SHM_RC</li>

<p></ul>
<dd>
Possible values:
</dd>
<ul class="circlem2"></p>
<li>CL_SHM_AREA=&gt;RC_DONE if all locks were released.</li>

<p></ul>
<ul class="circlem2"></p>
<li>CL_SHM_AREA=&gt;RC_NOTHING_TO_BE_DONE, if no locks were released because no locks existed in the first place.</li>

<p></ul>
<br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>The method DETACH_ALL_AREAS does not require any input parameters for the client identifier, since it
accesses both client-specific and cross-client area instances independently of the client. To delete
all locks in a special client, the corresponding area handles must be accessed individually. These can be managed in an internal table.</p>
<p><a name="@@ITOC@@INSTANCEMETHODS_8"></a>
</div></p>
<h2 id="instance-methods">Instance Methods</h2>
<p><a name="@@ITOC@@DETACH_9"></a></p>
<h3 id="detach">DETACH</h3>
<p>Releases the lock on the current area handle. The area handle is then inactive.</p>
<h3 id="exceptions">Exceptions</h3>
<ul>

<li><span class="lnkgrey">CX_SHM_WRONG_HANDLE</span></li>

<p></ul>
<dd>
An exclusive lock was active and not a shared lock (exception text: READ_HANDLE_REQUIRED)
</dd>
<ul></p>
<li><span class="lnkgrey">CX_SHM_ALREADY_DETACHED</span></li>

<p></ul>
<dd>
No read lock was active.
</dd>
<a name="@@ITOC@@DETACH_COMMIT_10"></a></p>
<h3 id="detach_commit">DETACH_COMMIT</h3>
<p>Releases a change lock (write or update lock) on the current area handle and confirms the changes that
were made. The area handle is then inactive. The prerequisite for this is that the current area instance version must contain an instance of the area root class
(<a href="../abenroot_object_glosry" class="grey" title="Glossary Entry">root
object</a>). In addition, there must not be any references from the area instance version to a different area instance of the shared objects memory, or to the
<a href="../abeninternal_session_glosry" class="grey" title="Glossary Entry">internal session</a>.</p>
<p>If an exception is raised when the method is executed, the change lock is not released correctly. Although
it remains, the lock cannot be released a second time using the method DETACH_COMMIT. The DETACH_ROLLBACK can be used instead.</p>
<p>In the case of non-transactional areas (the component TRANSACTIONAL of the structure PROPERTIES has
the value ABAP_FALSE), changes to the current area instance version become active immediately after
the method DETACH_COMMIT is executed. In the case of transactional areas (the component TRANSACTIONAL
of the structure PROPERTIES has the value ABAP_TRUE), the changes that are completed when the method
DETACH_COMMIT is executed are not active until the next database commit. The following rules apply during the time between the completion of the method DETACH_COMMIT and the next database commit:</p>
<ul>

<li>With transactional areas with versioning, all requested read locks access the previous version.</li>

</ul>

<ul>

<li>No read access is possible for transactional areas without versioning.</li>

</ul>

<ul>

<li>It is not possible to set a new change lock for areas with or without versioning.</li>

</ul>

<p>When the method DETACH_COMMIT is called, the event SHM_COMMIT_EVENT of the generated area class is triggered automatically.</p>
<h3 id="exceptions_1">Exceptions</h3>
<ul>

<li><span class="lnkgrey">CX_SHM_WRONG_HANDLE</span></li>

<p></ul>
<dd>
A shared lock was active instead of an exclusive lock (exception text: WRITE_HANDLE_REQUIRED)
</dd>
<ul></p>
<li><span class="lnkgrey">CX_SHM_ALREADY_DETACHED</span></li>

<p></ul>
<dd>
No change lock was active.
</dd>
<ul></p>
<li><span class="lnkgrey">CX_SHM_COMPLETION_ERROR</span></li>

<p></ul>
<dd>
Subclasses:
</dd>
<ul class="circlem2"></p>
<li><span class="lnkgrey">CX_SHM_ROOT_OBJECT_INITIAL</span> <br>No root object was assigned to the area instance version.</li>

<p></ul>
<ul class="circlem2"></p>
<li><span class="lnkgrey">CX_SHM_EXTERNAL_REFERENCE</span> <br>There are still references from the current area instance version to a different area instance of the shared objects memory, or to the internal session.</li>

<p></ul>
<ul class="circlem2"></p>
<li><span class="lnkgrey">CX_SHM_EVENT_EXECUTION_FAILED</span> <br>An exception was raised when an event handler was executed for SHM_COMMIT_EVENT. The exception raised can be read using the attribute PREVIOUS.</li>

<p></ul>
<ul></p>
<li><span class="lnkgrey">CX_SHM_SECONDARY_COMMIT</span></li>

<p></ul>
<dd>
An attempt was made to release a change lock again (release attempt had already failed previously) using DETACH_COMMIT instead of DETACH_ROLLBACK.
</dd></p>
<p>CX_SHM_COMPLETION_ERROR and CX_SHM_SECONDARY_COMMIT are subclasses of CX_SHM_DETACH_ERROR.</p>
<p><a name="@@ITOC@@DETACH_ROLLBACK_11"></a></p>
<h3 id="detach_rollback">DETACH_ROLLBACK</h3>
<p>Releases a change lock (write or update lock) on the current area handle and discards the changes that were made. The area handle is then inactive.</p>
<p>For areas without versioning, no active version of the area is available once the method has been executed.
The previous version is still available for areas with versioning. With transactional areas, a new exclusive
lock can be set on the relevant area instance (even before the next database commit) once the method DETACH_ROLLBACK has been executed.</p>
<p>When the method DETACH_ROLLBACK is called, the event SHM_ROLLBACK_EVENT is triggered automatically before it is executed.</p>
<h3 id="exceptions_2">Exceptions</h3>
<ul>

<li><span class="lnkgrey">CX_SHM_WRONG_HANDLE</span></li>

<p></ul>
<dd>
A shared lock was active instead of an exclusive lock (exception text: WRITE_HANDLE_REQUIRED)
</dd>
<ul></p>
<li><span class="lnkgrey">CX_SHM_ALREADY_DETACHED</span></li>

<p></ul>
<dd>
No change lock was active.
</dd>
<ul></p>
<li><span class="lnkgrey">CX_SHM_EVENT_EXECUTION_FAILED</span></li>

<p></ul>
<dd>
An exception was raised when an event handler was executed for SHM_ROLLBACK_EVENT. The exception raised can be read using the attribute PREVIOUS.
</dd></p>
<p>CX_SHM_EVENT_EXECUTION_FAILED is a subclass of CX_SHM_COMPLETION_ERROR, which is a subclass of CX_SHM_DETACH_ERROR.</p>
<p><a name="@@ITOC@@GET_LOCK_KIND_12"></a></p>
<h3 id="get_lock_kind">GET_LOCK_KIND</h3>
<p>Returns the type of the current lock for an area handle.</p>
<h3 id="return-value_1">Return Value</h3>
<ul>

<li>LOCK_KIND of type SHM_LOCK_KIND</li>

<p></ul>
<dd>
Possible values:
</dd>
<ul class="circlem2"></p>
<li>CL_SHM_AREA=&gt;LOCK_KIND_READ if the area handle holds a read lock.</li>

<p></ul>
<ul class="circlem2"></p>
<li>CL_SHM_AREA=&gt;LOCK_KIND_WRITE if the area handle holds a write lock.</li>

<p></ul>
<ul class="circlem2"></p>
<li>CL_SHM_AREA=&gt;LOCK_KIND_UPDATE if the area handle holds an update lock.</li>

<p></ul>
<ul class="circlem2"></p>
<li>CL_SHM_AREA=&gt;LOCK_KIND_COMPLETION_ERROR, if the area handle holds a change lock, after the method DETACH_COMMIT was ended with an exception.</li>

<p></ul>
<ul class="circlem2"></p>
<li>CL_SHM_AREA=&gt;LOCK_KIND_DETACHED, if the area handle does not hold any locks or if it is not bound to an area instance version.</li>

<p></ul>
<a name="@@ITOC@@GET_ROOT_13"></a></p>
<h3 id="get_root">GET_ROOT</h3>
<p>Returns a reference to the <a href="../abenroot_object_glosry" class="grey" title="Glossary Entry">root
object</a> (instance of the area root class) for an area handle. The method is intended for the unlikely
case where multiple handles need to be handled for different areas with different area root classes. Otherwise the attribute ROOT of the
<a href="../abenshm_area_class" class="blue">area class</a> can be accessed directly.</p>
<h3 id="return-value_2">Return Value</h3>
<ul>

<li>ROOT of type <code style="display: inline;"><span class="qtext">REF TO object</span></code></li>

</ul>

<h3 id="exceptions_3">Exceptions</h3>
<ul>

<li><span class="lnkgrey">CX_SHM_ALREADY_DETACHED</span></li>

<p></ul>
<dd>
The area handle is not bound to an area instance version.
</dd>
<a name="@@ITOC@@INSTANCEEVENTS_14"></a></p>
<h2 id="instance-events">Instance Events</h2>
<p><a name="@@ITOC@@SHM_COMMIT_EVENT_15"></a></p>
<h3 id="shm_commit_event">SHM_COMMIT_EVENT</h3>
<p>This event is triggered by the area handle automatically when the method DETACH_COMMIT is called.</p>
<p><a name="@@ITOC@@SHM_ROLLBACK_EVENT_16"></a></p>
<h3 id="shm_rollback_event">SHM_ROLLBACK_EVENT</h3>
<p>This event is triggered by the area handle automatically when the method DETACH_ROLLBACK is called.</p>
<h3 id="continue">Continue</h3>
<p><a href="../abenshm_area_class" class="blue">Shared Objects - Area Classes</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../abenshm_cl_imode_area/" title="Shared Objects - CL_IMODE_AREA" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Shared Objects - CL_IMODE_AREA
              </div>
            </div>
          </a>
        
        
          <a href="../abenshm_classes/" title="Shared Objects - Classes and Interfaces" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Shared Objects - Classes and Interfaces
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>