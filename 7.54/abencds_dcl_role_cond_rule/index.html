


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abencds dcl role cond rule - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#abap-cds-define-role-conditional_rule" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abencds dcl role cond rule
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
    <nav class="md-nav" aria-label="Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-1" class="md-nav__link">
    Addition 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-2" class="md-nav__link">
    Addition 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-3" class="md-nav__link">
    Addition 3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#continue" class="md-nav__link">
    Continue
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abencds_dcl_role_cond_rule.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_dictionary" class="blue">ABAP - Dictionary</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds" class="blue">ABAP CDS in ABAP Dictionary</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_authorizations" class="blue">ABAP CDS - Access Control</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_f1_dcl_syntax" class="blue">ABAP CDS - DCL Statements</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_f1_define_role" class="blue">ABAP CDS - DEFINE ROLE</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_dcl_role_rules" class="blue">ABAP CDS - DEFINE ROLE, access_rules</a>&#xA0;</small></p>
<h1 id="abap-cds-define-role-conditional_rule">ABAP CDS - DEFINE ROLE, conditional_rule</h1>
<p><a name="@@ITOC@@ABENCDS_DCL_ROLE_COND_RULE_1"></a>
Other versions: 
 <s><i>7.31</i></s> | <s><i>7.40</i></s> | <b>7.54</b></p>
<h2 id="syntax">Syntax</h2>
<p><pre><code class="hljs abap abap-docs-syntax-block">
<span class="qtext400">GRANT SELECT ON cds_entity <br>&#xA0;&#xA0;&#xA0;&#xA0;<i class="bn">[</i>COMBINATION MODE OR <i class="bn">|</i> COMBINATION MODE AND <i class="bn">|</i> REDEFINITION<i class="bn">]</i> <br>&#xA0;&#xA0;&#xA0;&#xA0;WHERE
<a href="../abencds_dcl_role_cond_expr" class="blue">cond_expr</a>;</span></p>
<p></code></pre></p>
<h3 id="effect">Effect</h3>
<p>Conditional access rule in the statement <a href="../abencds_f1_define_role" class="blue"><span class="qtext400">DEFINE ROLE</span></a> of the
<a href="../abencds_dcl_glosry" class="grey" title="Glossary Entry">CDS DCL</a>. A conditional access
rule <span class="qtext400">GRANT SELECT ON</span> with the addition <span class="qtext400">WHERE</span> restricts access to a CDS entity <span class="qtext400">cds_entity</span> using
<a href="../abenaccess_condition_glosry" class="grey" title="Glossary Entry">access conditions</a> <a href="../abencds_dcl_role_cond_expr" class="blue"><span class="qtext400">cond_expr</span></a>.</p>
<p>A single CDS entity can be specified in multiple access rules of a CDS role and multiple CDS roles can contain access rules for a single CDS entity.</p>
<p>If a CDS entity is specified in multiple access rules of a CDS role or in multiple CDS roles, the resulting
access conditions are joined using the method specified by the addition <span class="qtext400">COMBINATION MODE</span>.</p>
<h3 id="addition-1">Addition 1</h3>
<p><span class="qtext400">... WHERE</span><br><!-- /A --></p>
<p>A <span class="qtext400">WHERE</span> clause is used to define an
<a href="../abenaccess_condition_glosry" class="grey" title="Glossary Entry">access condition</a> <a href="../abencds_dcl_role_cond_expr" class="blue">
<span class="qtext400">cond_expr</span></a> for the CDS entity <span class="qtext400">cds_entity</span>.
When a CDS entity is accessed using ABAP SQL, and an access rule is configured for this entity in a
role, the access conditions are evaluated implicitly. This means their selection is restricted accordingly
and hence any <a href="../abapselect" class="blue"><code style="display: inline;"><span class="qtext">SELECT</span></code></a> reads use
a logical &quot;and&quot; to add the access condition to the select condition of the statement passed to the database by the database interface.</p>
<h3 id="addition-2">Addition 2</h3>
<p><span class="qtext400">... COMBINATION MODE AND<i class="bn">|</i>OR</span></p>
<p>The optional addition <span class="qtext400">COMBINATION MODE AND<i class="bn">|</i>OR</span> can be used
to define how the access conditions of multiple access rules for the same CDS entity <span class="qtext400">cds_entity</span>
are combined. This addition can be applied regardless of whether other access rules already exist for the CDS entity.</p>
<p><span class="qtext400">COMBINATION MODE OR</span> is used to join the access conditions using the logical operator &quot;or&quot;. If created, these access rules make the restrictions less strong.</p>
<p><span class="qtext400">COMBINATION MODE AND</span> combines the current access rule with the logical operator &quot;and&#x201D; and the other access rules. This means the restrictions are made stronger.</p>
<p>If multiple access rules with the combination methods
&quot;<span class="qtext400">AND</span>&quot; (<span class="qtext400">cond_and_1</span>, <span class="qtext400">cond_and_2</span>, ...), and
&quot;<span class="qtext400">OR</span>&quot; (<span class="qtext400">cond_or_1</span>, <span class="qtext400">cond_or_2</span>, ...) exist, the following expression produces the full condition:</p>
<p><span class="qtext400">( cond_or_1 OR cond_or_2 OR ... ) AND cond_and_1 AND cond_and_2 AND ...</span></p>
<p>A full access rule overrides the construction above, however, and produces a full access rule as the end result, even if there are rules with the mode <span class="qtext400">COMBINATION MODE AND</span>.</p>
<p>The following applies to the addition <span class="qtext400">COMBINATION MODE OR</span>:</p>
<ul>

<li>The addition <span class="qtext400">COMBINATION MODE OR</span> does not need to be specified explicitly.
If there are multiple access rules for a CDS entity, they are joined implicitly using the logical operator
&quot;or&quot;. For reasons of consistency, however, the addition <span class="qtext400">COMBINATION MODE OR</span> is recommended.</li>

</ul>

<ul>

<li>Any existing access controls without the explicit addition <span class="qtext400">COMBINATION MODE OR</span> are valid.</li>

</ul>

<h3 id="addition-3">Addition 3</h3>
<p><span class="qtext400">... REDEFINITION</span></p>
<p>The optional addition <span class="qtext400">REDEFINITION</span> is used to indicate that the access
rule in question is the only existing access rule for the CDS entity and any other access rules are
ignored. The addition makes it possible for customers and partners to replace all access rules delivered
by SAP for CDS entity with their own access rules without making modifications. The language element
<span class="qtext400">INHERITING CONDITIONS FROM SUPER</span> can, however, be used to incorporate conditions delivered by SAP in customer or partner access rules.</p>
<p>The following applies to the addition <span class="qtext400">REDEFINITION</span>:</p>
<ul>

<li>This addition can be used in customer systems only. SAP does not deliver access rules of this type.</li>

</ul>

<ul>

<li>The addition can also be applied if there are no other access rules for an entity. It ensures that the conditions defined here are not disabled by any later access rules.</li>

</ul>

<ul>

<li>The addition can be used for a maximum of one access rule for a CDS entity. If used more than once, an activation error or import error occurs.</li>

</ul>

<ul>

<li>This addition also disables existing full access rules for a CDS entity. SAP does not deliver full
access rules, which means that this statement applies only to customer full access rules that are themselves overridden by customer <span class="qtext400">REDEFINITION</span> rules.</li>

</ul>

<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>No <a href="../abenabstract_entity_glosry" class="grey" title="Glossary Entry">abstract CDS entities</a> can be specified for <span class="qtext400">cds_entity</span>.</p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following CDS role defines an access condition for the CDS view <span class="qtext400">demo_cds_auth_lit_pfcg</span> in an access rule. Both a
<a href="../abencds_f1_cond_pfcg" class="blue">PFCG condition</a> for the
<a href="../abenauthorization_object_glosry" class="grey" title="Glossary Entry">authorization object</a> S_CARRID and a
<a href="../abencds_f1_cond_literal" class="blue">literal condition</a> for the currency field are specified.</p>
<dd>
<span class="qtext400">@MappingRole: true <br>define role demo_cds_role_lit_pfcg { <br>&#xA0;&#xA0;grant select on demo_cds_auth_lit_pfcg <br>
&#xA0;&#xA0;where (carrid) = <br>&#xA0;&#xA0;aspect pfcg_auth (s_carrid, carrid, actvt=&apos;03&apos;) and <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; currcode = &apos;EUR&apos;; }</span>
</dd>

<p>The CDS view is as follows:</p>
<dd>
<span class="qtext400">@AbapCatalog.sqlViewName: &apos;DEMO_CDS_LITPFCG&apos; <br>@AccessControl.authorizationCheck: #CHECK <br>
define view demo_cds_auth_lit_pfcg <br> as select from <br> scarr <br> { <br> key carrid, <br> carrname, <br> currcode, <br> url <br> };&#xA0;&#xA0;&#xA0;&#xA0;</span>
</dd>

<p>The program <span class="lnkgrey">DEMO_CDS_AUTH_LIT_PFCG</span> uses <a href="../abapselect" class="blue"><span class="qtext">
SELECT</span></a> to access the view. CDS access control limits selections to that data for which the
current user has an authorization (in the classic role editor in <span class="lnkgrey">transaction PFCG</span>) and that meets the literal condition.</p>
</div>

<h3 id="continue">Continue</h3>
<p><a href="../abencds_dcl_role_cond_expr" class="blue">ABAP CDS - DEFINE ROLE, cond_expr</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>