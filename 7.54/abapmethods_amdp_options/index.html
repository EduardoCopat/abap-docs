


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>[CLASS-]METHODS - AMDP OPTIONS - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#class-methods-amdp-options" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              [CLASS-]METHODS - AMDP OPTIONS
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="ABAP docs" class="md-nav__link">
      ABAP docs
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
    <nav class="md-nav" aria-label="Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extras" class="md-nav__link">
    Extras
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-1" class="md-nav__link">
    Addition 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_1" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-2" class="md-nav__link">
    Addition 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_2" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abapmethods_amdp_options.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="class-methods-amdp-options">[CLASS-]METHODS - AMDP OPTIONS</h1>
<p><a href="../abapmethods_shortref" class="blue">Quick Reference</a>  </p>
<p><s><i>7.31</i></s> <s><i>7.40</i></s> <b>7.54</b></p>
<p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP &#x2212; Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_language_external_data" class="blue">Processing External Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_sql" class="blue">ABAP Database Access</a>&#xA0;&#x2192;&#xA0;
<a href="../abenamdp" class="blue">AMDP - ABAP Managed Database Procedures</a>&#xA0;&#x2192;&#xA0;
<a href="../abenamdp_methods" class="blue">AMDP - Methods</a>&#xA0;</small></p>
<h2 id="syntax">Syntax</h2>
<p><pre><code class="hljs abap abap-docs-syntax-block">
<span class="qtext">[CLASS-]METHODS meth ... AMDP OPTIONS <i class="bn">[</i>READ-ONLY<i class="bn">]</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;<i class="bn">[</i>CDS SESSION CLIENT clnt<i class="bn">|</i>CURRENT<i class="bn">]</i> ...</span> 
</code></pre></p>
<h3 id="extras">Extras</h3>
<p><a href="#!ABAP_ADDITION_1@1@" class="blue"> 1. <code style="display: inline;"><span class="qtext">... READ-ONLY</span></code> </a>  </p>
<p><a href="#!ABAP_ADDITION_2@2@" class="blue"> 2. <code style="display: inline;"><span class="qtext">... CDS SESSION CLIENT clnt<i class="bn">|</i>CURRENT</span></code> </a>  </p>
<h3 id="effect">Effect</h3>
<p>The addition <code style="display: inline;"><span class="qtext">AMDP OPTIONS</span></code> for <a href="../abapmethods" class="blue"><span class="qtext">
METHODS</span></a> and <a href="../abapclass-methods" class="blue"><code style="display: inline;"><span class="qtext">CLASS-METHODS</span></code></a> statements can be used to declare attributes of
<a href="../abenamdp_methods" class="blue">AMDP methods</a> of global classes or interfaces. After <code style="display: inline;"><span class="qtext">AMDP OPTIONS</span></code>, at least one attribute must be specified.</p>
<p>If the addition <code style="display: inline;"><span class="qtext">AMDP OPTIONS</span></code> is used in the declaration of a method, but
the method is implemented as a normal ABAP method without the addition <a href="../abapmethod_by_db_proc" class="blue">
<code style="display: inline;"><span class="qtext">BY DATABASE PROCEDURE|FUNCTION</span></code></a>, the attributes specified by<span class="qtext">AMDP
OPTIONS</span> are ignored. However, the following restrictions for AMDP methods apply to the method declaration:</p>
<ul>

<li>
If there is no <code style="display: inline;"><span class="qtext">RETURNING</span></code> parameter, the restrictions for <a href="../abenamdp_procedure_methods" class="blue">AMDP procedure implementations</a> apply.
</li>
<li>
If there is a <code style="display: inline;"><span class="qtext">RETURNING</span></code> parameter, the restrictions described for <a href="../abenamdp_function_methods" class="blue">AMDP function implementations</a> also apply.
<br></li>

</ul>

<p>A prerequisite for using this addition is that the global class or the interface must contain a
<a href="../abentag_interface_glosry" class="grey" title="Glossary Entry">tag interface</a>
<a href="../abenamdp_classes" class="blue">IF_AMDP_MARKER_...</a> for
<a href="../abenamdp_class_glosry" class="grey" title="Glossary Entry">AMDP classes</a>. <code style="display: inline;"><span class="qtext">AMDP OPTIONS</span></code> cannot be used in local classes, for the
<a href="../abenconstructor_glosry" class="grey" title="Glossary Entry">constructors</a> <a href="../abapmethods_constructor" class="blue">
<code style="display: inline;"><span class="qtext">constructor</span></code></a> or <a href="../abapclass-methods_constructor" class="blue"><code style="display: inline;"><span class="qtext">class_constructor</span></code></a>, for
<a href="../abenevent_handler_glosry" class="grey" title="Glossary Entry">event handlers</a> declared with <a href="../abapmethods_event_handler" class="blue"><code style="display: inline;"><span class="qtext">FOR EVENT</span></code></a>, for
<a href="../abenredefinition_glosry" class="grey" title="Glossary Entry">redefinitions</a>
declared with <a href="../abapmethods_redefinition" class="blue"><code style="display: inline;"><span class="qtext">REDEFINITION</span></code></a>, or for
<a href="../abenamdp_function_method_glosry" class="grey" title="Glossary Entry">AMDP function implementations</a> for
<a href="../abencds_table_function_glosry" class="grey" title="Glossary Entry">CDS table functions</a>
declared with <a href="../abapclass-methods_for_tabfunc" class="blue"><code style="display: inline;"><span class="qtext">FOR TABLE FUNCTION</span></code></a>.  </p>
<p><a name="@@READ-ONLY@@METHODS@@"></a>
<a name="@@READ-ONLY@@CLASS-METHODS@@"></a></p>
<h3 id="addition-1">Addition 1</h3>
<p><code style="display: inline;"><span class="qtext">... READ-ONLY</span></code>   <br><!-- /A --></p>
<h3 id="effect_1">Effect</h3>
<p>If the option <code style="display: inline;"><span class="qtext">READ-ONLY</span></code> is specified, only reads of database tables are allowed in the
<a href="../abapmethod_by_db_proc" class="blue">implementation</a> of the
<a href="../abendatabase_procedure_glosry" class="grey" title="Glossary Entry">database procedure</a> or
<a href="../abendatabase_function_glosry" class="grey" title="Glossary Entry">database function</a>.
Only database procedures or database functions of other AMDP methods that are also marked as <code style="display: inline;"><span class="qtext">READ-ONLY</span></code> can be called. This is checked by the syntax check or at runtime.</p>
<p>This attribute can also be specified using the addition <code style="display: inline;"><span class="qtext">OPTIONS</span></code> in the implementation
of an AMDP method with <a href="../abapmethod_by_db_proc" class="blue"><span class="qtext">METHOD meth
BY DATABASE PROCEDURE|FUNCTION</span></a>. It applies when specified either in the declaration or in the implementation of the method, or both.</p>
<p>The option <code style="display: inline;"><span class="qtext">READ-ONLY</span></code> must be specified at least once in the implementation of an
<a href="../abenamdp_function_glosry" class="grey" title="Glossary Entry">AMDP</a> function or an
<a href="../abenamdp_hdb_l_internal" class="blue">L procedure</a>. If the addition <span class="qtext">AMDP
OPTIONS</span> is used in the declaration of a method with a <code style="display: inline;"><span class="qtext">RETURNING</span></code> parameter, the option <code style="display: inline;"><span class="qtext">READ-ONLY</span></code> must already be specified in the declaration.  </p>
<p><a name="@@CDS SESSION CLIENT@@METHODS@@"></a>
<a name="@@CURRENT@@METHODS@@"></a>
<a name="@@CDS SESSION CLIENT@@CLASS-METHODS@@"></a>
<a name="@@CURRENT@@CLASS-METHODS@@"></a></p>
<h3 id="addition-2">Addition 2</h3>
<p><code style="display: inline;"><span class="qtext">... CDS SESSION CLIENT clnt<i class="bn">|</i>CURRENT</span></code>   <br><!-- /A --></p>
<h3 id="effect_2">Effect</h3>
<p>If the option <code style="display: inline;"><span class="qtext">CDS SESSION CLIENT</span></code> is used, the
<a href="../abensession_variable_glosry" class="grey" title="Glossary Entry">session variable</a> of the database that can be addressed in the CDS DDL of the
<a href="../abencds_ddl_glosry" class="grey" title="Glossary Entry">ABAP CDS</a> under the name <a href="../abencds_f1_session_variable" class="blue">
<span class="qtext400">$session.client</span></a> is supplied with a value when the AMDP method is called from ABAP. In the
<a href="../abenhana_database_glosry" class="grey" title="Glossary Entry">SAP HANA database</a> this
is the ABAP-specific session variable <a href="../abenhana_session_variables" class="blue"><span class="qtext400">CDS_CLIENT</span></a>. The value is determined as follows:</p>
<ul>

<li>
The name of an input parameter of the current method can be specified for <code style="display: inline;"><span class="qtext">clnt</span></code>. Its type must be compatible with the built in type
<a href="../abenddic_builtin_types" class="blue">CLNT</a> in ABAP Dictionary. The session variable
is set to the value passed to this parameter during the call, or to the value of the replacement parameter declared with <a href="../abapmethods_parameters" class="blue"><code style="display: inline;"><span class="qtext">DEFAULT</span></code></a>.
</li>
<li>
If <code style="display: inline;"><span class="qtext">CURRENT</span></code> is specified, the session variable is set to its default value,
that is, to the nominal value of the ABAP system field <a href="../abensystem_fields" class="blue"><code style="display: inline;"><span class="qtext">sy-mandt</span></code></a> or the
<a href="../abenclient_glosry" class="grey" title="Glossary Entry">client</a> of the current
<a href="../abenlogon_glosry" class="grey" title="Glossary Entry">logon</a>. In this case there can be no input parameters with the name <code style="display: inline;"><span class="qtext">current</span></code>.
<br></li>

</ul>

<p>The session variable is only set when the AMDP method is called from ABAP. If the associated database
procedure or function is called from another AMDP method or from a database procedure or function that is not managed by AMDP, the session variable is not affected.</p>
<p>If the database procedure or function of an AMDP method that is declared with the option <span class="qtext">CDS
SESSION CLIENT</span> is called from an AMDP procedure or function implementation or during a <a href="../abapselect" class="blue"><code style="display: inline;"><span class="qtext">SELECT</span></code></a> statement, the following rules apply:</p>
<ul>

<li>
AMDP method as call target
<br></li>

</ul>

<ul class="circlem2">

<li>The implementation of an AMDP method that is declared with the addition <code style="display: inline;"><span class="qtext">CURRENT</span></code>
can only be called in implementations of methods with the addition <code style="display: inline;"><span class="qtext">CURRENT</span></code>,
and not during the execution of a <a href="../abapselect" class="blue"><code style="display: inline;"><span class="qtext">SELECT</span></code></a>
statement with the addition <a href="../abapselect_client" class="blue"><code style="display: inline;"><span class="qtext">USING CLIENT</span></code></a>.</li>

</ul>

<ul class="circlem2">

<li>The implementation of an AMDP method declared with <code style="display: inline;"><span class="qtext">clnt</span></code> can only be called
in implementations of methods where the addition <code style="display: inline;"><span class="qtext">CURRENT</span></code> or <code style="display: inline;"><span class="qtext">clnt</span></code>
is specified, and during the execution of a <a href="../abapselect" class="blue"><code style="display: inline;"><span class="qtext">SELECT</span></code></a>
statement with the addition <a href="../abapselect_client" class="blue"><code style="display: inline;"><span class="qtext">USING CLIENT</span></code></a>.</li>

</ul>

<ul class="circlem2">

<li>The implementation of an AMDP method that is declared without any additions can be called from any
implementations and during the execution of any <a href="../abapselect" class="blue"><code style="display: inline;"><span class="qtext">SELECT</span></code></a> statements.</li>

</ul>

<ul>

<li>
AMDP method as caller
<br></li>

</ul>

<ul class="circlem2">

<li>The implementation of an AMDP method that is declared with the addition <code style="display: inline;"><span class="qtext">CURRENT</span></code> can call any implementations.</li>

</ul>

<ul class="circlem2">

<li>The implementation of an AMDP method declared with <code style="display: inline;"><span class="qtext">clnt</span></code> cannot call any implementations of methods where <code style="display: inline;"><span class="qtext">CURRENT</span></code> is specified.</li>

</ul>

<ul class="circlem2">

<li>The implementation of an AMDP method that is declared without any additions can only call other implementations without additions.</li>

</ul>

<p>A call can occur during a <a href="../abapselect" class="blue"><code style="display: inline;"><span class="qtext">SELECT</span></code></a> statement if it directly or indirectly accesses a
<a href="../abencds_table_function_glosry" class="grey" title="Glossary Entry">CDS table function</a>, because this is implemented as an
<a href="../abenamdp_table_function_glosry" class="grey" title="Glossary Entry">AMDP table function</a>.</p>
<p>If an AMDP method accesses the <a href="../abencds_database_view_glosry" class="grey" title="Glossary Entry">CDS database view</a> of a
<a href="../abencds_view_glosry" class="grey" title="Glossary Entry">CDS view</a> whose
<a href="../abencds_client_handling" class="blue">client handling</a> is defined by the annotation
<a href="../abencds_client_handling" class="blue"><span class="qtext400">@ClientHandling.algorithm:</p>
<h1 id="session_variable-it-must-be-declared-with-the-option-cds-session-client-if-not-a-syntax-error-occurs">SESSION_VARIABLE</span></a>, it must be declared with the option <code style="display: inline;"><span class="qtext">CDS SESSION CLIENT</span></code>. If not, a syntax error occurs.</h1>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>
The option <code style="display: inline;"><span class="qtext">CDS SESSION CLIENT</span></code> is mainly required if an AMDP method accesses the
<a href="../abencds_database_view_glosry" class="grey" title="Glossary Entry">CDS database view</a> of a
<a href="../abencds_view_glosry" class="grey" title="Glossary Entry">CDS view</a> whose
<a href="../abencds_client_handling" class="blue">client handling</a> is determined by the annotation
<a href="../abencds_client_handling" class="blue"><span class="qtext400">@ClientHandling.algorithm:
#SESSION_VARIABLE</span></a>. In database views like this, the session variable associated with <a href="../abencds_f1_session_variable" class="blue">
<span class="qtext400">$session.client</span></a> is usually evaluated in comparisons with a client
column. If the option <code style="display: inline;"><span class="qtext">CDS SESSION CLIENT</span></code> is not used when calling AMDP methods
(or the addition <a href="../abapselect_client" class="blue"><code style="display: inline;"><span class="qtext">USING CLIENT</span></code></a>
in ABAP SQL), the default value for the session variable would be the nominal value of the ABAP system
field <a href="../abensystem_fields" class="blue"><code style="display: inline;"><span class="qtext">sy-mandt</span></code></a>. If the session variable is set when an AMDP method is called, the
<a href="../abencds_database_view_glosry" class="grey" title="Glossary Entry">CDS database views</a> that are used select the data of the required
<a href="../abenclient_glosry" class="grey" title="Glossary Entry">client</a>. If, in the implementation
of the AMDP method, the client ID that is selected when the CDS database view is accessed does not match the value of the session variable, the results set is empty.
</li>

<li>
If <code style="display: inline;"><span class="qtext">CDS SESSION CLIENT</span></code> is used for an AMDP method, the AMDP framework sets
the session variable belonging to <a href="../abencds_f1_session_variable" class="blue"><span class="qtext400">$session.client</span></a>
exactly once when this method is called from ABAP. The following recommendations apply:
<br></li>

<p></ul>
<ul class="circlem2"></p>
<li>The value of the input parameter marked with <code style="display: inline;"><span class="qtext">clnt</span></code> should be treated as
a constant and should not be changed when executing the implementation, so that it always matches the
value of the session variable. When calling other implementations of AMDP methods that are declared
with <code style="display: inline;"><span class="qtext">CDS SESSION CLIENT</span></code>, only the client ID that matches the value of the session variable should be passed.</li>

<p></ul>
<ul class="circlem2"></p>
<li>The value of the session variable should not be overwritten using database methods.</li>

</ul>

<dd>
Whether the input parameter is used explicitly in self-programmed conditions or implicitly in CDS database views, this ensures that the data of the same
<a href="../abenclient_glosry" class="grey" title="Glossary Entry">client</a> is accessed.
</dd>

<ul>

<li>
The rules governing how AMDP methods declared with the option <code style="display: inline;"><span class="qtext">CDS SESSION CLIENT</span></code> call each other support the previous point:
<br></li>

</ul>

<ul class="circlem2">

<li>In a call chain that leads to a method with the addition <code style="display: inline;"><span class="qtext">CURRENT</span></code>, the
session variable that belongs to <a href="../abencds_f1_session_variable" class="blue"><span class="qtext400">$session.client</span></a>
can only have the nominal value of the ABAP system field <a href="../abensystem_fields" class="blue"><code style="display: inline;"><span class="qtext">sy-mandt</span></code></a>.</li>

</ul>

<ul class="circlem2">

<li>In a call chain that leads to a method that specifies <code style="display: inline;"><span class="qtext">clnt</span></code>, the session
variable that belongs to <a href="../abencds_f1_session_variable" class="blue"><span class="qtext400">$session.client</span></a> can have a value defined explicitly by <code style="display: inline;"><span class="qtext">clnt</span></code>.</li>

</ul>

<ul>

<li>In AMDP methods that do not access a <a href="../abencds_database_view_glosry" class="grey" title="Glossary Entry">CDS database view</a> of a
<a href="../abencds_view_glosry" class="grey" title="Glossary Entry">CDS view</a> whose
<a href="../abencds_client_handling" class="blue">client handling</a> is defined by the annotation
<a href="../abencds_client_handling" class="blue"><span class="qtext400">@ClientHandling.algorithm:
#SESSION_VARIABLE</span></a>, the option <code style="display: inline;"><span class="qtext">CDS SESSION CLIENT</span></code> can be used to
set <a href="../abencds_f1_session_variable" class="blue"><span class="qtext400">$session.client</span></a>
to a particular value, but this is generally not necessary. Instead of accessing the session variables for the client ID in the implementation, these should be passed to an input parameter and this should then be used (see the
<a href="../abenamdp_abexa" class="blue">executable example</a>).</li>

</ul>

<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following implementation of an AMDP method accesses the
<a href="../abencds_database_view_glosry" class="grey" title="Glossary Entry">CDS database view</a> <span class="lnkgrey">DEMO_CDS_PRJCT0A</span> of a client-specific CDS view:</p>
<dd>
<span class="qtext">METHOD get_spfli_view BY DATABASE PROCEDURE FOR HDB <br>&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;LANGUAGE SQLSCRIPT <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;USING demo_cds_prjct0a. <br>
&#xA0;&#xA0;connections&#xA0;&#xA0;= select * <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;from DEMO_CDS_PRJCT0A; <br>ENDMETHOD.</span>
</dd>

<p>The <a href="../abenddl_source_code_glosry" class="grey" title="Glossary Entry">DDL source code</a> used to define the actual
<a href="../abencds_entity_glosry" class="grey" title="Glossary Entry">CDS entity</a> DEMO_CDS_SPFLI_CLIENT_0A is as follows:</p>
<dd>
<span class="qtext400">@AbapCatalog.sqlViewName: &apos;DEMO_CDS_PRJCT0A&apos; <br>@AccessControl.authorizationCheck: #NOT_ALLOWED <br>
@ClientHandling.type: #CLIENT_DEPENDENT <br>@ClientHandling.algorithm: #SESSION_VARIABLE <br>define view demo_cds_spfli_client_0a <br>
&#xA0;&#xA0;as select from <br>&#xA0;&#xA0;&#xA0;&#xA0;spfli <br>&#xA0;&#xA0;&#xA0;&#xA0;{ <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;key spfli.carrid, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;key spfli.connid, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;spfli.cityfrom, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;spfli.cityto <br>&#xA0;&#xA0;&#xA0;&#xA0;}</span>
</dd>

<p>The client handling is defined using the annotation <span class="qtext400">@ClientHandling.algorithm:</p>
<h1 id="session_variable-for-this-reason-the-version-of-the-view-in-the-database-contains-the-following-where-condition-in-this-case-for-the-sap-hana-database">SESSION_VARIABLE</span>. For this reason, the version of the view in the database contains the following <span class="qtext400">WHERE</span> condition (in this case for the SAP HANA database):</h1>
<dd>
<span class="qtext400">WHERE ( &quot;SPFLI&quot;.&quot;MANDT&quot; = SESSION_CONTEXT( &apos;CDS_CLIENT&apos;) )</span>
</dd>

<p>This <span class="qtext400">WHERE</span> condition applies each time the view is accessed. If the <span class="qtext400">
SELECT</span> statement in the above AMDP method had its own <span class="qtext400">WHERE</span> condition
for the client column <span class="qtext400">MANDT</span> and this selected a client other than the
session variable <span class="qtext400">CDS_CLIENT</span>, the results set would be empty. For this
reason, accessing such a CDS database view in an AMDP method causes the syntax check to issue a warning
by default. This warning can be bypassed by using the addition <code style="display: inline;"><span class="qtext">AMDP OPTIONS CDS SESSION CLIENT</span></code> when declaring the method in the class <span class="lnkgrey">CL_DEMO_AMDP_SESSION_CLIENT</span>:</p>
<p><span class="qtext">CLASS cl_demo_amdp_session_client DEFINITION <br>&#xA0;&#xA0;PUBLIC <br>&#xA0;&#xA0;FINAL <br>
&#xA0;&#xA0;CREATE PUBLIC. <br> <br>&#xA0;&#xA0;PUBLIC SECTION. <br>&#xA0;&#xA0;&#xA0;&#xA0;INTERFACES if_amdp_marker_hdb . <br>
&#xA0;&#xA0;&#xA0;&#xA0;TYPES t_connections TYPE STANDARD TABLE OF demo_cds_prjct0a <br>&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;WITH EMPTY KEY. <br>
&#xA0;&#xA0;&#xA0;&#xA0;METHODS get_spfli_view <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;AMDP OPTIONS READ-ONLY <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; CDS SESSION CLIENT clnt <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;IMPORTING VALUE(clnt)&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;TYPE sy-mandt <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;EXPORTING VALUE(connections) TYPE t_connections <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;RAISING&#xA0;&#xA0; cx_amdp_error.</span></p>
<p>When the method is called from ABAP, the session variable <span class="qtext400">CDS_CLIENT</span> is
set to the value passed to the input parameter <code style="display: inline;"><span class="qtext">clnt</span></code>. The program <span class="lnkgrey">DEMO_AMDP_SESSION_CLIENT</span>
calls the AMDP method and it is possible to enter different values for the client ID. The data of the client in question is selected.</p>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../abapmethods_abstract_final/" title="METHODS - ABSTRACT, FINAL" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                METHODS - ABSTRACT, FINAL
              </div>
            </div>
          </a>
        
        
          <a href="../abapmethods_constructor/" title="METHODS - constructor" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                METHODS - constructor
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>