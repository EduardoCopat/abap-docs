


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abenddic cds cycle problems - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#abap-cds-cyclical-dependencies" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abenddic cds cycle problems
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abenddic_cds_cycle_problems.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_dictionary" class="blue">ABAP - Dictionary</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds" class="blue">ABAP CDS in ABAP Dictionary</a>&#xA0;&#x2192;&#xA0;
<a href="../abenddic_cds_entities" class="blue">ABAP CDS - Data Definitions</a>&#xA0;</small></p>
<h1 id="abap-cds-cyclical-dependencies">ABAP CDS - Cyclical Dependencies</h1>
<p>In ABAP CDS, <a href="../abencds_entity_glosry" class="grey" title="Glossary Entry">CDS entities</a> can be defined with mutual dependencies. For example, a
<a href="../abencds_view_glosry" class="grey" title="Glossary Entry">CDS view</a> accesses a different CDS view CDS entity as a data source or exposes a CDS view in a
<a href="../abencds_association_glosry" class="grey" title="Glossary Entry">CDS association</a>. A
CDS entity that consumes another CDS entity is dependent on the consumed entity. A distinction should be made between the following:</p>
<ul>

<li>Technical dependencies</li>

</ul>

<dd>
CDS entities have a technical dependency on each other when the database entities created by their activation are also dependent on each other.
</dd>

<ul>

<li>Semantic dependencies</li>

</ul>

<dd>
CDS entities have a semantic dependency on each other when the dependency is produced by metadata not reflected in the database entities in question.
</dd>

<p>A cyclical dependency (or cycle) is produced if a chain of dependencies starting from one CDS entity leads back to the same CDS entity. Two categories of cyclical dependencies can be distinguished:</p>
<ul>

<li>Cycle of technical dependencies</li>

</ul>

<dd>
Once the entities in question are activated, the technical dependencies would also incur a cyclical
dependency between the generated database entities. It is not possible to characterize a cyclical dependency between entities on the database and a set of entities joined in this way cannot be activated. Examples:
</dd>

<ul class="circlem2">

<li>CDS views in which a CDS entity is used as a direct data source and the CDS view is directly or
indirectly dependent on this source. CDS entities of this type can usually be detected by syntax errors, since the consumed entities cannot exist in active versions.</li>

</ul>

<ul class="circlem2">

<li>A CDS view consumes a CDS association from another view in a path expression and a cyclical dependency
is detected when the path expression is transformed to a join expression in the database. Usually, the error does not occur until the entity is activated.</li>

</ul>

<ul>

<li>Cycle caused by semantic dependencies</li>

</ul>

<dd>
If a cycle contains semantic dependencies and removing the semantic dependencies would remove the cyclical
dependency, activating the entities in question does not produce a cyclical dependency between the associated
database entities. This can be the case when CDS views are joined using CDS associations, but not all
CDS associations are characterized by consuming path expressions. Sets of entities that have dependencies like this can be activated.
</dd>

<p>A set of CDS entities that exists for for a semantic cycle cannot be activated in a single step:</p>
<ul>

<li>In mass activations, the ABAP Dictionary activation tool attempts to activate the set in multiple
steps (if possible). It first attempts an activation without the semantic relationships and then with them. This function does not yet, however, work in all situations.</li>

</ul>

<ul>

<li>If it is not possible to resolve a semantic cyclical dependency using step-by-step activations,
a cycle problem exists and it can only be solved by intervening manually. Here, CDS source code must be modified manually before individual activation steps to remove the semantic dependencies temporarily.</li>

</ul>

<p>When solving a cycle problem manually in a system, it should be remembered that CDS entities in a cyclical
dependency display the same problems after a transport into a target system. This requires consecutive
transports of subsets of objects. If this is not possible (if cycle problems cannot be solved manually),
the cyclical dependencies in question must be removed from the data model. For example, consumed CDS
associations can be replaced by explicit join expressions, which then only produce dependencies where they actually exist.</p>
<p>Other versions: 
 <s><i>7.31</i></s> | <s><i>7.40</i></s> | <b>7.54</b></p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>To avoid activation problems, cyclical dependencies should be kept to a minimum, even if the CDS
entities in question could in principle be activated. The data model should enable a hierarchical view
of the data and in this way remove the need for cyclical dependencies, even if they are not characterized on the database.</li>

<p></ul>
<ul></p>
<li>A solution for full resolution of semantic cyclical dependencies using step-by-step activation in mass activation of CDS entities is currently being developed and will be shipped in a future release.</li>

<p></ul>
<ul></p>
<li><a href="../abenddic_classical_objects" class="blue">Classic objects in ABAP Dictionary</a> cannot
have technical dependencies on each other, but they can have semantic dependencies. Classic views, for
example, cannot contain other views as data sources. Semantic references, however, are possible, for
example using foreign key relationships or value tables. Mass activations of classic dictionary objects resolve any semantic cyclical dependencies using step-by-step activation.</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following two CDS views consume each other as data sources, which creates a technical cycle. Both
of the views have incorrect syntax and cannot be activated as long as the other view does not exist
in an active version. One option is to remove the dependency on the other view from one of the views
and then activate both views. If the dependency is then applied again, the view has correct syntax but still cannot be activated. This is because the associated
<a href="../abencds_database_view_glosry" class="grey" title="Glossary Entry">CDS database views</a> cannot have cyclical dependencies on each other.</p>
<dd>
<span class="qtext400">@AbapCatalog.sqlViewName: &apos;TEST1&apos; <br>define view test_view1 as <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; select from <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; test_view2 <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; { * }</span>
</dd>

<dd>
<span class="qtext400">@AbapCatalog.sqlViewName: &apos;TEST2&apos; <br>define view test_view2 as <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;select from <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;test_view1 <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;{ * }</span>
</dd>

<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The cyclical dependency of the following views is produced by <a href="../abencds_association_glosry" class="grey" title="Glossary Entry">CDS associations</a> and has a semantic background.</p>
<ul>

<li>The view <span class="qtext400">test_view1</span> defines and exposes a CDS association <span class="qtext400">_assoc1</span> with the view <span class="qtext400">test_view2</span>.</li>

</ul>

<ul>

<li>The view <span class="qtext400">test_view2</span> defines and exposes a CDS association <span class="qtext400">_assoc2</span> with the view <span class="qtext400">test_view3</span>.</li>

</ul>

<ul>

<li>The view <span class="qtext400">test_view3</span> consumes <span class="qtext400">test_view1</span> as a data source and consumes its CDS association <span class="qtext400">_assoc1</span> in a specified path.</li>

</ul>

<p>This means that <span class="qtext400">test_view2</span> makes <span class="qtext400">test_view1</span>
dependent on <span class="qtext400">test_view3</span>, which itself is dependent on <span class="qtext400">test_view1</span>.
The views, however, do not contain any path expressions that characterize the dependencies between <span class="qtext400">
test_view1</span> and <span class="qtext400">test_view2</span> and between <span class="qtext400">test_view2</span>
and <span class="qtext400">test_view3</span> as join expressions on the database, which means there
is no technical cycle and they can be activated in principle. Mass activations of all the views, however,
is not currently possible. Situations of this type do not usually arise only after transports into target
systems and not during the development phase. In this case, activations are only possible manually.
This is done by removing the dependency of the view <span class="qtext400">test_view3</span> on <span class="qtext400">
test_view2</span> (by deleting the CDS association <span class="qtext400">_assoc2</span> in <span class="qtext400">test_view2</span>)
and applying the dependency again after the three views are activated. This would have to be done in every target system of a transport.</p>
<dd>
<span class="qtext400">@AbapCatalog.sqlViewName: &apos;TEST1&apos; <br>define view test_view1 as <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; select from <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; table1 <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; association to test_view2 as _assoc1 <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;on table1.field =&#xA0;&#xA0;_assoc1.field <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; { _assoc1, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; field } <br>
 <br>@AbapCatalog.sqlViewName: &apos;TEST2&apos; <br>define view test_view2 as <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; select from <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; table2 <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; association to test_view3 as _assoc2 <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;on table2.field =&#xA0;&#xA0;_assoc2.field <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; { _assoc2, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; field } <br>
 <br>@AbapCatalog.sqlViewName: &apos;TEST3&apos; <br>define view test_view3 as <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; select from <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; test_view1 <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; { _assoc1.field }</span>
</dd>

</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>