


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abencl osql replace - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cl_osql_replace-replacement-service" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abencl osql replace
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#defining-replacement-rules" class="md-nav__link">
    Defining Replacement Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-methods" class="md-nav__link">
    Additional Methods
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restrictions-and-special-features" class="md-nav__link">
    Restrictions and Special Features
  </a>
  
    <nav class="md-nav" aria-label="Restrictions and Special Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data-sources-of-reads" class="md-nav__link">
    Data Sources of Reads
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#targets-of-writes" class="md-nav__link">
    Targets of Writes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abencl_osql_replace.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP &#x2212; Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_language_external_data" class="blue">Processing External Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_sql" class="blue">ABAP Database Access</a>&#xA0;&#x2192;&#xA0;
<a href="../abenopensql" class="blue">ABAP SQL</a>&#xA0;&#x2192;&#xA0;
<a href="../abencl_osql" class="blue">ABAP SQL - System Classes</a>&#xA0;</small></p>
<h1 id="cl_osql_replace-replacement-service">CL_OSQL_REPLACE - Replacement Service</h1>
<p>The system class <span class="lnkgrey">CL_OSQL_REPLACE</span> implements a replacement service that can be used to redirect access to data sources in
<a href="../abenopen_sql_glosry" class="grey" title="Glossary Entry">ABAP SQL</a> statements during the execution of
<a href="../abenunit_test_glosry" class="grey" title="Glossary Entry">unit tests</a>
<a href="../abenabap_unit_glosry" class="grey" title="Glossary Entry">ABAP Unit</a>. The system class CL_OSQL_REPLACE can only be used in
<a href="../abentest_class_glosry" class="grey" title="Glossary Entry">test classes</a> by <a href="../abenabap_unit_glosry" class="grey" title="Glossary Entry">ABAP Unit</a>.</p>
<ul>

<li><a href="#@@ITOC@@ABENCL_OSQL_REPLACE_1" class="blue">Defining Replacement Rules</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@ABENCL_OSQL_REPLACE_2" class="blue">Additional Methods</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@ABENCL_OSQL_REPLACE_3" class="blue">Restrictions and Special Features</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@ABENCL_OSQL_REPLACE_4" class="blue">Data Sources of Reads</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@ABENCL_OSQL_REPLACE_5" class="blue">Targets of Writes</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@ABENCL_OSQL_REPLACE_6" class="blue">Example</a></li>

</ul>

<p><a name="@@ITOC@@ABENCL_OSQL_REPLACE_1"></a>
Other versions: 
 <s><i>7.31</i></s> | <s><i>7.40</i></s> | <b>7.54</b></p>
<h2 id="defining-replacement-rules">Defining Replacement Rules</h2>
<p>The static method ACTIVATE_REPLACEMENT of the system class <span class="lnkgrey">CL_OSQL_REPLACE</span> is used to define replacement rules.</p>
<ul>

<li>A three-column internal table is passed to the parameter REPLACEMENT_TABLE:</li>

</ul>

<ul class="circlem2">

<li>The first column, SOURCE, contains the name of a data source defined in ABAP Dictionary, namely a database table, a classic view, or a non-abstract CDS entity.</li>

</ul>

<ul class="circlem2">

<li>The second column, TARGET, contains the name of a database object in the current database to which an ABAP SQL access to the data source named in the first column is redirected.</li>

</ul>

<ul class="circlem2">

<li>The third column, SCHEMA, contains the name of a
<a href="../abendatabase_schema_glosry" class="grey" title="Glossary Entry">database schema</a> to be searched to find the database object from the second column. If the third column is empty, the
<a href="../abenabap_db_schema_glosry" class="grey" title="Glossary Entry">ABAP database schema</a> is used.</li>

</ul>

<ul>

<li>An ID can be passed to the parameter FLG_DML to define whether the redirection also applies to write ABAP SQL statements:</li>

</ul>

<ul class="circlem2">

<li>If the value <code style="display: inline;"><span class="qtext">abap_false</span></code> is passed to the parameter FLG_DML, the redirection only applies to
<a href="../abenquery_glosry" class="grey" title="Glossary Entry">queries</a>, that is, to the
<a href="../abenmainquery_glosry" class="grey" title="Glossary Entry">main queries</a> of
<a href="../abenopen_sql_reading" class="blue">reads</a> and for the <a href="../abensubquery_glosry" class="grey" title="Glossary Entry">subqueries</a> of all accesses.</li>

</ul>

<ul class="circlem2">

<li>If the value <code style="display: inline;"><span class="qtext">abap_true</span></code> is passed to the parameter FLG_DML, the redirection also applies to the database tables to be changed by
<a href="../abenopen_sql_writing" class="blue">writes</a>.</li>

</ul>

<ul>

<li>An ID can be passed to the parameter FLG_SURVIVE_SUBMIT to define whether the redirection also applies to called programs:</li>

</ul>

<ul class="circlem2">

<li>If the value of <code style="display: inline;"><span class="qtext">abap_false</span></code> is passed to the parameter FLG_SURVIVE_SUBMIT, the redirection applies only to the current program.</li>

</ul>

<ul class="circlem2">

<li>If the value of <code style="display: inline;"><span class="qtext">abap_true</span></code> is passed to the parameter FLG_SURVIVE_SUBMIT,
the redirection also applies to programs called using <a href="../abapsubmit" class="blue"><code style="display: inline;"><span class="qtext">SUBMIT</span></code></a>,
<a href="../abapcall_transaction" class="blue"><code style="display: inline;"><span class="qtext">CALL TRANSACTION</span></code></a>, and <a href="../abapcall_dialog" class="blue"><code style="display: inline;"><span class="qtext">CALL DIALOG</span></code></a>.</li>

</ul>

<p>The redirection can be made to any database objects, in particular variants of the database tables or
views defined in the ABAP Dictionary. The database objects that are redirected to must have the same structure as the object that is redirected from, otherwise the result is database specific and exceptions may arise.</p>
<p>A successful redirection applies for the entire execution of a module test until the
<a href="../abeninternal_session_glosry" class="grey" title="Glossary Entry">internal session</a> is
ended or there is another redirection. A redirection is ended explicitly if an empty internal table is passed to the method ACTIVATE_REPLACEMENT.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>From a technical perspective, a redirection replaces the names of the database objects in the platform-specific SQL statements, which the
<a href="../abendatabase_interface_glosry" class="grey" title="Glossary Entry">database interface</a> generates from the ABAP SQL statements and passes to the database system.</li>

<p></ul>
<ul></p>
<li>Redirection of the data sources used by ABAP SQL is used during module tests so that test tables
and test data can be processed instead of the actual tables and their data. In particular, this enables testing of system programs that access system tables.</li>

<p></ul>
<ul></p>
<li>In the case of redirections in called programs using the parameter FLG_SURVIVE_SUBMIT, program calls
using <a href="../abapsubmit" class="blue"><code style="display: inline;"><span class="qtext">SUBMIT</span></code></a> without the addition <code style="display: inline;"><span class="qtext">AND RETURN</span></code> are pointless.</li>

<p></ul>
<a name="@@ITOC@@ABENCL_OSQL_REPLACE_2"></a>
</div></p>
<h2 id="additional-methods">Additional Methods</h2>
<p>As well as the method ACTIVATE_REPLACEMENT, <span class="lnkgrey">CL_OSQL_REPLACE</span> has the following methods:</p>
<ul>

<li>The methods IS_REPLACEMENT_ACTIVE and IS_REPLACEMENT_ACTIVE_DML are used to check whether a redirection is active and whether it also applies to writes.</li>

</ul>

<ul>

<li>The methods SET_ACTIVE_FOR_DML and TOGGLE_ACTIVE_FOR_DML are used to set or change the setting for writes for an existing redirection.</li>

</ul>

<p><a name="@@ITOC@@ABENCL_OSQL_REPLACE_3"></a></p>
<h2 id="restrictions-and-special-features">Restrictions and Special Features</h2>
<p><a name="@@ITOC@@ABENCL_OSQL_REPLACE_4"></a></p>
<h3 id="data-sources-of-reads">Data Sources of Reads</h3>
<p>The following applies to data sources of reads:</p>
<ul>

<li>The data source of a read can only be redirected to an object defined in ABAP Dictionary if the object appears in the database with the name that it is defined with in ABAP Dictionary.</li>

</ul>

<ul>

<li>To redirect a read from a <a href="../abenprojection_view_glosry" class="grey" title="Glossary Entry">projection view</a> to another data source, the underlying database table can be redirected.</li>

</ul>

<ul>

<li>It is not possible to redirect to the following:</li>

</ul>

<ul class="circlem2">

<li><a href="../abenprojection_view_glosry" class="grey" title="Glossary Entry">Projection views</a></li>

</ul>

<ul class="circlem2">

<li><a href="../abencds_entity_glosry" class="grey" title="Glossary Entry">CDS entities</a></li>

</ul>

<ul>

<li>If the data source of a subquery in the <code style="display: inline;"><span class="qtext">WHERE</span></code> condition of a write statement is redirected to the target of the write, the behavior is undefined and unexpected errors may occur.</li>

</ul>

<ul>

<li>The following should be noted for <a href="../abencds_view_glosry" class="grey" title="Glossary Entry">CDS entities</a>:</li>

</ul>

<ul class="circlem2">

<li>If a read is redirected to a CDS view or a CDS table function for which one or more
<a href="../abencds_access_control_glosry" class="grey" title="Glossary Entry">CDS roles</a> are defined as part of
<a href="../abencds_role_glosry" class="grey" title="Glossary Entry">CDS access control</a>, the associated
access conditions are evaluated independently of the target of the redirection. CDS roles that are defined for the target of a redirection are ignored.</li>

</ul>

<ul>

<li>The following should be noted for <a href="../abencds_table_function_glosry" class="grey" title="Glossary Entry">CDS table functions</a>:</li>

</ul>

<ul class="circlem2">

<li>A CDS table function can only be redirected to a
<a href="../abentable_function_glosry" class="grey" title="Glossary Entry">table function</a>. However, this does not have to be an
<a href="../abenamdp_function_glosry" class="grey" title="Glossary Entry">AMDP function</a>.</li>

</ul>

<ul class="circlem2">

<li>If a direct or indirect read of a CDS table function is redirected to another data source, the
<a href="../abenstatic_constructor_glosry" class="grey" title="Glossary Entry">static constructor</a> of the
<a href="../abenamdp_class_glosry" class="grey" title="Glossary Entry">AMDP class</a> in which the associated
<a href="../abenamdp_table_function_glosry" class="grey" title="Glossary Entry">AMDP table function</a> is implemented is executed.</li>

</ul>

<ul class="circlem2">

<li>If a read of a data source is redirected to an
<a href="../abenamdp_table_function_glosry" class="grey" title="Glossary Entry">AMDP</a> table function that is known in the current AS ABAP, the
<a href="../abenamdp_glosry" class="grey" title="Glossary Entry">AMDP</a> framework creates the associated variant in the database if necessary, and the
<a href="../abenstatic_constructor_glosry" class="grey" title="Glossary Entry">static constructor</a> of the associated
<a href="../abenamdp_class_glosry" class="grey" title="Glossary Entry">AMDP</a> class is executed.</li>

</ul>

<ul>

<li>If the source or target of a redirection is a database table of the
<a href="../abenabap_db_schema_glosry" class="grey" title="Glossary Entry">ABAP database schema</a> defined in ABAP Dictionary, for which a
<a href="../abenreplacement_object_glosry" class="grey" title="Glossary Entry">replacement object</a> is defined, the redirection is evaluated first and then the replacement object.</li>

</ul>

<ul class="circlem2">

<li>If a data source of a read is redirected to a database table for which a replacement object is defined, a redirect to the replacement object is made.</li>

</ul>

<ul class="circlem2">

<li>If a database table is redirected for which a replacement object is defined, the redirection is applied. The replacement object is ignored.</li>

</ul>

<ul class="circlem2">

<li>If a replacement object is defined for a database table and the replacement object is redirected, the redirection is ignored. The replacement object is accessed here.</li>

</ul>

<ul>

<li>A redirection always bypasses <a href="../abensap_buffering_glosry" class="grey" title="Glossary Entry">table buffering</a>.</li>

</ul>

<p><a name="@@ITOC@@ABENCL_OSQL_REPLACE_5"></a></p>
<h3 id="targets-of-writes">Targets of Writes</h3>
<p>The same restrictions apply to the target of a write as to the data sources of reads, if applicable. In addition, targets of writes cannot be redirected to the following objects defined in ABAP Dictionary:</p>
<ul>

<li><a href="../abenclassical_view_glosry" class="grey" title="Glossary Entry">Classic views</a></li>

</ul>

<ul>

<li>Database tables with active <a href="../abensap_buffering_glosry" class="grey" title="Glossary Entry">table buffering</a></li>

</ul>

<ul>

<li>Database tables with active <a href="../abenddic_database_tables_protocol" class="blue">logging</a></li>

</ul>

<p>Writes to a <a href="../abenprojection_view_glosry" class="grey" title="Glossary Entry">projection
view</a> cannot be redirected if the rows to be changed are defined by a work area or an internal table.
Therefore, it is only possible to redirect accesses to the database table of a projection view if there
are no writes to the view (except with the statements <a href="../abapdelete_dbtab" class="blue"><span class="qtext">
DELETE</span></a> with a <code style="display: inline;"><span class="qtext">WHERE</span></code> condition or <a href="../abapupdate" class="blue"><span class="qtext">
UPDATE</span></a> with the addition <code style="display: inline;"><span class="qtext">SET</span></code>). Otherwise, a runtime error occurs.</p>
<p><a name="@@ITOC@@ABENCL_OSQL_REPLACE_6"></a>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>See the program <span class="lnkgrey">DEMO_CL_OSQL_REPLACE</span>.</p>
<ul>

<li>A production class <code style="display: inline;"><span class="qtext">prod</span></code> reads data from the database table SCARR in the
method <code style="display: inline;"><span class="qtext">select</span></code>, and deletes a row from this table in the method <code style="display: inline;"><span class="qtext">delete</span></code>.</li>

</ul>

<ul>

<li>The test class <code style="display: inline;"><span class="qtext">test_prod</span></code> tests the methods of the production class.</li>

</ul>

<ul class="circlem2">

<li>In the method <code style="display: inline;"><span class="qtext">setup</span></code>, access to SCARR is redirected for read and write
ABAP SQL statements with <code style="display: inline;"><span class="qtext">cl_osql_replace=&gt;activate_replacement</span></code> to a test
table DEMO_TEST_SCARR, which was defined in ABAP Dictionary as a copy of SCARR. The database schema of DEMO_TEST_SCARR is passed here explicitly for demonstration purposes, but this is not necessary for database objects from the
<a href="../abenabap_db_schema_glosry" class="grey" title="Glossary Entry">ABAP database schema</a>.</li>

</ul>

<ul class="circlem2">

<li>In the method <code style="display: inline;"><span class="qtext">setup</span></code>, the test table DEMO_TEST_SCARR is supplied with two rows of test data from an internal table <code style="display: inline;"><span class="qtext">testdata</span></code>.</li>

</ul>

<ul class="circlem2">

<li>In the method <code style="display: inline;"><span class="qtext">test</span></code>, the method <code style="display: inline;"><span class="qtext">select</span></code> is called
and the return value is compared with the internal table <code style="display: inline;"><span class="qtext">testdata</span></code>. Calling
the method <code style="display: inline;"><span class="qtext">delete</span></code> deletes a row of test data from the test table and checks that the deleted row no longer exists.</li>

</ul>

<ul class="circlem2">

<li>In the method <code style="display: inline;"><span class="qtext">teardown</span></code>, the test data is deleted from the test table.</li>

</ul>

<dd>
Execution of the module test should always be successful, regardless of the content of SCARR.
</dd>

</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>