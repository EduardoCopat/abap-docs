


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abenselect hierarchy generator - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#select-from-hierarchy" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abenselect hierarchy generator
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
    <nav class="md-nav" aria-label="Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extras" class="md-nav__link">
    Extras
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-1" class="md-nav__link">
    Addition 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_1" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-2" class="md-nav__link">
    Addition 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_2" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-3" class="md-nav__link">
    Addition 3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_3" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-4" class="md-nav__link">
    Addition 4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_4" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-5" class="md-nav__link">
    Addition 5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_5" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-6" class="md-nav__link">
    Addition 6
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_6" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-7" class="md-nav__link">
    Addition 7
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_7" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-8" class="md-nav__link">
    Addition 8
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_8" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-9" class="md-nav__link">
    Addition 9
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_9" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-10" class="md-nav__link">
    Addition 10
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_10" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abenselect_hierarchy_generator.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP &#x2212; Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_language_external_data" class="blue">Processing External Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_sql" class="blue">ABAP Database Access</a>&#xA0;&#x2192;&#xA0;
<a href="../abenopensql" class="blue">ABAP SQL</a>&#xA0;&#x2192;&#xA0;
<a href="../abenopen_sql_reading" class="blue">ABAP SQL - Reads</a>&#xA0;&#x2192;&#xA0;
<a href="../abenselect_clauses" class="blue">SELECT clauses</a>&#xA0;&#x2192;&#xA0;
<a href="../abapfrom_clause" class="blue">SELECT - FROM</a>&#xA0;&#x2192;&#xA0;
<a href="../abapselect_data_source" class="blue">SELECT - FROM data_source</a>&#xA0;&#x2192;&#xA0;
<a href="../abenselect_hierarchy_data" class="blue">SELECT - FROM hierarchy_data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenselect_hierarchy" class="blue">SELECT - FROM hierarchy</a>&#xA0;</small></p>
<h1 id="select-from-hierarchy">SELECT - FROM HIERARCHY</h1>
<p><a name="@@ITOC@@ABENSELECT_HIERARCHY_GENERATOR_1"></a>
Other versions: 
 <s><i>7.31</i></s> | <s><i>7.40</i></s> | <b>7.54</b></p>
<h2 id="syntax">Syntax</h2>
<p><pre><code class="hljs abap abap-docs-syntax-block">
<span class="qtext">... HIERARCHY( SOURCE hierarchy_source <i class="bn">[</i>WITH PRIVILEGED ACCESS<i class="bn">]</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; CHILD TO PARENT ASSOCIATION _hierarchy_assoc <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<i class="bn">[</i>PERIOD FROM field1 TO field2 VALID FROM from TO to<i class="bn">]</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; START WHERE <a href="../abenosql_expr_logexp" class="blue">sql_cond</a> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<i class="bn">[</i>SIBLINGS ORDER BY field1 <i class="bn">[</i>ASCENDING<i class="bn">|</i>DESCENDING<i class="bn">]</i><i class="bn">[</i>, <br>&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; field2 <i class="bn">[</i>ASCENDING<i class="bn">|</i>DESCENDING<i class="bn">]</i>, ...<i class="bn">]</i><i class="bn">]</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<i class="bn">[</i>DEPTH depth<i class="bn">]</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<i class="bn">[</i>MULTIPLE PARENTS <i class="bn">{</i>NOT ALLOWED<i class="bn">}</i><i class="bn">{</i>LEAVES ONLY<i class="bn">}</i><i class="bn">|</i>ALLOWED<i class="bn">]</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<i class="bn">[</i>ORPHANS IGNORE<i class="bn">|</i>ERROR<i class="bn">|</i>ROOT<i class="bn">]</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<i class="bn">[</i>CYCLES ERROR<i class="bn">|</i>BREAKUP<i class="bn">]</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<i class="bn">[</i>GENERATE SPANTREE<i class="bn">]</i> ) ...</span> 
</code></pre></p>
<h3 id="extras">Extras</h3>
<p><a href="#!ABAP_ADDITION_1@1@" class="blue"> 1. <code style="display: inline;"><span class="qtext">... SOURCE hierarchy_source <i class="bn">[</i>WITH PRIVILEGED ACCESS<i class="bn">]</i></span></code> </a> <br>
<br><a href="#!ABAP_ADDITION_2@2@" class="blue"> 2. <code style="display: inline;"><span class="qtext">... CHILD TO PARENT ASSOCIATION _hierarchy_assoc</span></code> </a> <br>
<br><a href="#!ABAP_ADDITION_3@3@" class="blue"> 3. <code style="display: inline;"><span class="qtext">... PERIOD FROM field1 TO field2 VALID FROM from TO to</span></code> </a> <br>
<br><a href="#!ABAP_ADDITION_4@4@" class="blue"> 4. <code style="display: inline;"><span class="qtext">... START WHERE sql_cond</span></code> </a> <br>
<br><a href="#!ABAP_ADDITION_5@5@" class="blue"> 5. <code style="display: inline;"><span class="qtext">... SIBLINGS ORDER BY field1 <i class="bn">[</i>ASCENDING<i class="bn">|</i>DESCENDING<i class="bn">]</i>, ...</span></code> </a> <br>
<br><a href="#!ABAP_ADDITION_6@6@" class="blue"> 6. <code style="display: inline;"><span class="qtext">... DEPTH depth</span></code> </a> <br>
<br><a href="#!ABAP_ADDITION_7@7@" class="blue"> 7. <code style="display: inline;"><span class="qtext">... MULTIPLE PARENTS <i class="bn">{</i>NOT ALLOWED<i class="bn">}</i><i class="bn">|</i><i class="bn">{</i>LEAVES ONLY<i class="bn">}</i><i class="bn">|</i>ALLOWED</span></code> </a> <br>
<br><a href="#!ABAP_ADDITION_8@8@" class="blue"> 8. <code style="display: inline;"><span class="qtext">... ORPHANS IGNORE<i class="bn">|</i>ERROR<i class="bn">|</i>ROOT</span></code> </a> <br>
<br><a href="#!ABAP_ADDITION_9@9@" class="blue"> 9. <code style="display: inline;"><span class="qtext">... CYCLES ERROR<i class="bn">|</i>BREAKUP</span></code> </a> <br>
<br><a href="#!ABAP_ADDITION_10@10@" class="blue"> 10. <code style="display: inline;"><span class="qtext">... GENERATE SPANTREE</span></code> </a>  </p>
<h3 id="effect">Effect</h3>
<p>Specifies the <a href="../abenhierarchy_generator_glosry" class="grey" title="Glossary Entry">hierarchy
generator</a> <code style="display: inline;"><span class="qtext">HIERARCHY</span></code> as a hierarchy <a href="../abenselect_hierarchy" class="blue"><code style="display: inline;"><span class="qtext">hierarchy</span></code></a> in an ABAP SQL query. The hierarchy generator generates the
<a href="../abenhierarchy_glosry" class="grey" title="Glossary Entry">hierarchy</a>. The following needs to be specified:</p>
<ul>

<li><code style="display: inline;"><span class="qtext">SOURCE</span></code> must be followed by the source <code style="display: inline;"><span class="qtext">hierarchy_source</span></code> of the hierarchy.</li>

</ul>

<ul>

<li><code style="display: inline;"><span class="qtext">CHILD TO PARENT ASSOCIATION</span></code> must be followed by a
<a href="../abenhierarchy_association_glosry" class="grey" title="Glossary Entry">hierarchy association</a>
<code style="display: inline;"><span class="qtext">_hierarchy_assoc</span></code> published by the source <code style="display: inline;"><span class="qtext">hierarchy_source</span></code>.
The source data source and target data source of this association must be the source <code style="display: inline;"><span class="qtext">hierarchy_source</span></code>. The <span class="qtext400">ON</span> condition of the hierarchy association defines the
<a href="../abenpcr_glosry" class="grey" title="Glossary Entry">parent-child relationships</a> between the
<a href="../abenhierarchy_node_glosry" class="grey" title="Glossary Entry">hierarchy nodes</a>.</li>

</ul>

<ul>

<li><code style="display: inline;"><span class="qtext">START WHERE</span></code> must be followed by a start condition that defines
<a href="../abenroot_node_glosry" class="grey" title="Glossary Entry">root nodes</a> for the
<a href="../abenroot_node_set_glosry" class="grey" title="Glossary Entry">root node set</a> of the hierarchy. The hierarchy consists of the root nodes of the root node set and their
<a href="../abendescendant_node_glosry" class="grey" title="Glossary Entry">descendant nodes</a>.</li>

</ul>

<p>All other additions are optional and define further properties of the hierarchy. The rows of the tabular results set of the hierarchy generator are the
<a href="../abenhierarchy_node_glosry" class="grey" title="Glossary Entry">hierarchy nodes</a> of the
generated hierarchy and their columns comprise the elements of the source specified after <code style="display: inline;"><span class="qtext">SOURCE</span></code> and the additional <a href="../abenddddl_hierarchy" class="blue">hierarchy columns</a>.</p>
<p>The hierarchy navigator <code style="display: inline;"><span class="qtext">HIERARCHY</span></code> publishes all associations of the source
<code style="display: inline;"><span class="qtext">hierarchy_source</span></code> specified after <code style="display: inline;"><span class="qtext">SOURCE</span></code> implicitly and leaves its target data source unchanged.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>The order of the additions is fixed. They must be specified as shown here.</li>

<p></ul>
<ul></p>
<li>Rows of the results set of the source specified after <code style="display: inline;"><span class="qtext">SOURCE</span></code> can occur
more than once in the results set of the hierarchy generator, if selected by appropriate parent-child relationships.</li>

<p></ul>
<ul></p>
<li>The hierarchy generator <code style="display: inline;"><span class="qtext">HIERARCHY</span></code> in ABAP SQL works in the same way as the statement <a href="../abencds_f1_define_hierarchy" class="blue"><span class="qtext400">DEFINE HIERARCHY</span></a> in
<a href="../abenabap_cds_glosry" class="grey" title="Glossary Entry">ABAP CDS</a>. Accessing the hierarchy generator <code style="display: inline;"><span class="qtext">HIERARCHY</span></code> as the data source of a query is the same as accessing a
<a href="../abencds_hierarchy_glosry" class="grey" title="Glossary Entry">CDS hierarchy</a> defined accordingly.</li>

<p></ul>
<ul></p>
<li>An association published implicitly by the hierarchy generator <code style="display: inline;"><span class="qtext">HIERARCHY</span></code> can be used in
<a href="../abenopen_sql_path" class="blue">path expressions</a> or in further hierarchy generators. </li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Specifies the hierarchy generator <code style="display: inline;"><span class="qtext">HIERARCHY</span></code> as the data source of a <span class="qtext">
SELECT</span> statement in the program <span class="lnkgrey">DEMO_HIERARCHY_TREE</span>. The source of the hierarchy generator is a CDS view that uses the
<a href="../abenglobal_temporary_table_glosry" class="grey" title="Glossary Entry">global temporary
table</a> DEMO_SIMPLE_TREE as a data source and whose CDS association <span class="qtext400">_tree</span>
defines the parent-child association. The hierarchy generator selects the row with the value of <code style="display: inline;"><span class="qtext">start_id</span></code> in the column ID as the
<a href="../abenroot_node_glosry" class="grey" title="Glossary Entry">root node</a> and, starting from this node, inserts all
<a href="../abendescendant_node_glosry" class="grey" title="Glossary Entry">descendant nodes</a> in
the results set that meet the <span class="qtext400">ON</span> condition of the hierarchy association. The results set contains all columns of the view DEMO_CDS_SIMPLE_TREE_SOURCE, plus all potential
<a href="../abenddddl_hierarchy" class="blue">hierarchy columns</a>. When <span class="lnkgrey">executed</span>, this program demonstrates the result of the <code style="display: inline;"><span class="qtext">SELECT</span></code> statement.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">DATA</span><span class="p">(</span><span class="nv">start_id</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span> 

<span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> <span class="k">SOURCE </span><span class="nv">demo_cds_simple_tree_source</span> 
                      <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_tree</span> 
                       <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="err">@</span><span class="nv">start_id</span> 
                       <span class="nv">SIBLINGS</span> <span class="k">ORDER BY</span> <span class="nv">parent</span> 
                       <span class="nv">MULTIPLE</span> <span class="nv">PARENTS</span> <span class="ow">NOT</span> <span class="nv">ALLOWED</span> <span class="p">)</span> 
       <span class="k">FIELDS</span> <span class="k">id</span><span class="p">,</span> 
              <span class="nv">parent</span><span class="p">,</span> 
              <span class="nv">name</span><span class="p">,</span> 
              <span class="nv">hierarchy_rank</span><span class="p">,</span> 
              <span class="nv">hierarchy_tree_size</span><span class="p">,</span> 
              <span class="nv">hierarchy_parent_rank</span><span class="p">,</span> 
              <span class="nv">hierarchy_level</span><span class="p">,</span> 
              <span class="nv">hierarchy_is_cycle</span><span class="p">,</span> 
              <span class="nv">hierarchy_is_orphan</span><span class="p">,</span> 
              <span class="nv">node_id</span><span class="p">,</span> 
              <span class="nv">parent_id</span> 
       <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">asql_result</span><span class="p">).</span> 
</code></pre></div>
</div></p>
<h3 id="addition-1">Addition 1</h3>
<p><code style="display: inline;"><span class="qtext">... SOURCE hierarchy_source <i class="bn">[</i>WITH PRIVILEGED ACCESS<i class="bn">]</i></span></code>   <br><!-- /A --></p>
<h3 id="effect_1">Effect</h3>
<p>The addition <code style="display: inline;"><span class="qtext">SOURCE</span></code> specifies <code style="display: inline;"><span class="qtext">hierarchy_source</span></code> as the source of the hierarchy generator. This source must publish the
<a href="../abenhierarchy_association_glosry" class="grey" title="Glossary Entry">hierarchy association</a>
<code style="display: inline;"><span class="qtext">_hierarchy_assoc</span></code> specified after <code style="display: inline;"><span class="qtext">CHILD TO PARENT ASSOCIATION</span></code>. The following are potential sources <code style="display: inline;"><span class="qtext">hierarchy_source</span></code>:</p>
<ul>

<li>A CDS view <code style="display: inline;"><span class="qtext">cds_view</span></code></li>

</ul>

<dd>
<code style="display: inline;"><span class="qtext">cds_view</span></code> can be specified as a
<a href="../abencds_view_glosry" class="grey" title="Glossary Entry">CDS view</a> that
<a href="../abencds_f1_select_list_association" class="blue">publishes</a> the hierarchy association <code style="display: inline;"><span class="qtext">_hierarchy_assoc</span></code> in its <span class="qtext400">SELECT</span> list.
</dd>

<ul>

<li>A common table expression <code style="display: inline;"><span class="qtext">+cte</span></code></li>

</ul>

<dd>
<code style="display: inline;"><span class="qtext">+cte</span></code> can be specified as a preceding
<a href="../abencommon_table_expression_glosry" class="grey" title="Glossary Entry">common table expression</a>
in a <a href="../abapwith" class="blue"><code style="display: inline;"><span class="qtext">WITH</span></code></a> statement that publishes
the hierarchy association <code style="display: inline;"><span class="qtext">_hierarchy_assoc</span></code> using the addition <a href="../abapwith_associations" class="blue">
<code style="display: inline;"><span class="qtext">WITH ASSOCIATIONS</span></code></a>. The self association prerequisite can be met as follows:
</dd>

<ul class="circlem2">

<li>The addition <a href="../abapwith_associations_using" class="blue"><code style="display: inline;"><span class="qtext">REDIRECTED</span></code></a>
is used to replace the target data source of an association of a data source of the common table expression with the common table expression itself.</li>

</ul>

<ul class="circlem2">

<li><a href="../abapwith_associations_defining" class="blue"><code style="display: inline;"><span class="qtext">JOIN TO ONE<i class="bn">|</i>MANY</span></code></a>
is used to define a CTE association as a self association for the common table expression.</li>

</ul>

<ul>

<li>A nested hierarchy <code style="display: inline;"><span class="qtext">hierarchy</span></code></li>

</ul>

<dd>
The hierarchy generator <code style="display: inline;"><span class="qtext">HIERARCHY</span></code> can use other hierarchies <a href="../abenselect_hierarchy" class="blue"><code style="display: inline;"><span class="qtext">hierarchy</span></code></a> as a source. The following applies here:
</dd>

<ul class="circlem2">

<li>A CDS hierarchy <a href="../abenselect_cds_hierarchy" class="blue"><code style="display: inline;"><span class="qtext">cds_hierarchy</span></code></a>
must publish the hierarchy association <code style="display: inline;"><span class="qtext">_hierarchy_assoc</span></code> in its element list.
To meet the self association prerequisite, the association must be an additional association between the source of the CDS hierarchy and the CDS hierarchy.</li>

</ul>

<ul class="circlem2">

<li>The hierarchy generator <code style="display: inline;"><span class="qtext">HIERARCHY</span></code> publishes all associations of its source implicitly.</li>

</ul>

<ul class="circlem2">

<li>A <a href="../abencte_hierarchy_glosry" class="grey" title="Glossary Entry">CTE hierarchy</a> must
use <a href="../abapwith_associations" class="blue"><code style="display: inline;"><span class="qtext">WITH ASSOCIATIONS</span></code></a>
to publish the hierarchy association <code style="display: inline;"><span class="qtext">_hierarchy_assoc</span></code>. Furthermore, the addition
<code style="display: inline;"><span class="qtext">REDIRECTED</span></code> must be used to replace the target data source of the association in such a way that the self association prerequisite is met.</li>

</ul>

<dd>
The hierarchy generator uses the result of a source specified after <code style="display: inline;"><span class="qtext">SOURCE</span></code> as a source (its additional
<a href="../abenddddl_hierarchy" class="blue">hierarchy columns</a> are ignored). An outer hierarchy
generator always adds its own hierarchy columns directly to the columns of the hierarchy specified after
<code style="display: inline;"><span class="qtext">SOURCE</span></code>. Any hierarchy columns listed explicitly in the element list of a
CDS hierarchy that is specified as a source, on the other hand, are part of this hierarchy&apos;s results set and are respected accordingly.
</dd>

<p>If a <a href="../abencds_role_glosry" class="grey" title="Glossary Entry">CDS role</a> is assigned to a CDS view specified as a source, the source is implicitly subject to
<a href="../abencds_access_control_glosry" class="grey" title="Glossary Entry">CDS access control</a> and only nodes that meet the
<a href="../abenaccess_condition_glosry" class="grey" title="Glossary Entry">access conditions</a>
of the CDS role are transferred to the hierarchy. When specifying the optional addition <code style="display: inline;"><span class="qtext">WITH PRIVILEGED ACCESS</span></code>, the access control is deactivated and the access conditions are not evaluated.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>Hierarchies should only be nested in exceptional cases.</p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Uses a CDS view and two common table expressions as the source of the hierarchy generator <code style="display: inline;"><span class="qtext">HIERARCHY</span></code> in the program <span class="lnkgrey">DEMO_HIERARCHY_GENERATOR</span>.</p>
<ul>

<li>The first common table expression accesses the same CDS view and uses a path expression to
<a href="../abapwith_associations_using" class="blue">publish</a> the same hierarchy association. This
expression must use <a href="../abapwith_associations" class="blue"><code style="display: inline;"><span class="qtext">REDIRECTED TO</span></code></a> to redirect the hierarchy association to itself and hence meet the self association requirement.</li>

</ul>

<ul>

<li>The second common table expression accesses the database table DEMO_SIMPLE_TREE in the same way as the CDS view and
<a href="../abapwith_associations_defining" class="blue">defines</a> a separate
<a href="../abencte_association_glosry" class="grey" title="Glossary Entry">CTE association</a> as a self association that is then used as a hierarchy association.</li>

</ul>

<p>All main queries have the same result.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">DATA</span><span class="p">(</span><span class="nv">start_id</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span> 

<span class="c1">&quot;CDS view as source of hierarchy generator </span>
<span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> <span class="k">SOURCE </span><span class="nv">demo_cds_simple_tree_source</span> 
                       <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_tree</span> 
                       <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="err">@</span><span class="nv">start_id</span> 
                       <span class="nv">SIBLINGS</span> <span class="k">ORDER BY</span> <span class="nv">parent</span> 
                       <span class="nv">MULTIPLE</span> <span class="nv">PARENTS</span> <span class="ow">NOT</span> <span class="nv">ALLOWED</span> <span class="p">)</span> 
       <span class="k">FIELDS</span> <span class="nv">name</span> 
       <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">cds_result</span><span class="p">).</span> 

<span class="c1">&quot;CTE with association published as path as source of hierarchy generator </span>
<span class="k">WITH</span> <span class="o">+</span><span class="nv">tree</span> <span class="k">AS</span> <span class="p">(</span> 
        <span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">demo_cds_simple_tree_source</span> <span class="k">AS</span> <span class="nv">tree</span> 
               <span class="k">FIELDS</span> <span class="o">*</span> <span class="p">)</span> 
        <span class="k">WITH</span> <span class="nv">ASSOCIATIONS</span> <span class="p">(</span> <span class="err">\</span><span class="nv">_tree</span> 
                            <span class="nv">REDIRECTED</span> <span class="k">TO</span> <span class="o">+</span><span class="nv">tree</span> 
                            <span class="k">VIA</span> <span class="nv">tree</span> <span class="p">)</span> 
  <span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> 
                <span class="nv">SOURCE</span> <span class="o">+</span><span class="nv">tree</span> 
                <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_tree</span> 
                <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="err">@</span><span class="nv">start_id</span> <span class="p">)</span> 
         <span class="k">FIELDS</span> <span class="nv">name</span> 
         <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">cte_path_result</span><span class="p">).</span> 
<span class="k">ASSERT</span> <span class="nv">cte_path_result</span> <span class="o">=</span> <span class="nv">cds_result</span><span class="p">.</span> 

<span class="c1">&quot;CTE with association defined as join as source of hierarchy generator </span>
<span class="k">WITH</span> <span class="o">+</span><span class="nv">simple_tree_source</span> <span class="k">AS</span> <span class="p">(</span> 
        <span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">demo_simple_tree</span> 
               <span class="k">FIELDS</span> <span class="k">id</span><span class="p">,</span> 
                      <span class="nv">parent_id</span> <span class="k">as</span> <span class="nv">parent</span><span class="p">,</span> 
                      <span class="nv">name</span> <span class="p">)</span> 
        <span class="k">WITH</span> <span class="nv">ASSOCIATIONS</span> <span class="p">(</span> <span class="k">JOIN</span> <span class="k">TO</span> <span class="nv">ONE</span> <span class="o">+</span><span class="nv">simple_tree_source</span> <span class="k">as</span> <span class="nv">_tree</span> 
                             <span class="k">ON</span> <span class="o">+</span><span class="nv">simple_tree_source~parent</span> <span class="o">=</span> <span class="nv">_tree~id</span> <span class="p">)</span> 
  <span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> 
                <span class="nv">SOURCE</span> <span class="o">+</span><span class="nv">simple_tree_source</span> 
                <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_tree</span> 
                <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="err">@</span><span class="nv">start_id</span> <span class="p">)</span> 
         <span class="k">FIELDS</span> <span class="nv">name</span> 
         <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">cte_join_result</span><span class="p">).</span> 
<span class="k">ASSERT</span> <span class="nv">cte_join_result</span> <span class="o">=</span> <span class="nv">cds_result</span><span class="p">.</span>
</code></pre></div>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Nests hierarchies in the hierarchy generator <code style="display: inline;"><span class="qtext">HIERARCHY</span></code> in the program <span class="lnkgrey">
DEMO_HIERARCHY_NESTED</span>. When <span class="lnkgrey">executed</span>, this program demonstrates
the result of the <code style="display: inline;"><span class="qtext">SELECT</span></code> statements. Three tree-like hierarchies that start
at the row with the value 1 in the column <span class="qtext400">ID</span> are restricted to a depth
of 2. From these hierarchies, further hierarchies are selected that start at the row with the value
5 in the column <span class="qtext400">ID</span>. The three inner hierarchies are specified as a CDS hierarchy, the hierarchy generator <code style="display: inline;"><span class="qtext">HIERARCHY</span></code>, and as a
<a href="../abencte_hierarchy_glosry" class="grey" title="Glossary Entry">CTE hierarchy</a>. In the
case of the CDS hierarchy and the CTE hierarchy, the hierarchy association must be verified as a self
association explicitly. The three inner hierarchies have the same results sets, which means that the results of the three <code style="display: inline;"><span class="qtext">SELECT</span></code> statements are also the same.</p>
<p><div class="highlight"><pre><span></span><code><span class="c1">&quot;CDS hierarchy as source of hierarchy generator </span>
<span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> 
             <span class="k">SOURCE </span><span class="nv">demo_cds_simple_tree_redir</span><span class="p">(</span> <span class="nv">p_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> 
                                                <span class="nv">p_depth</span> <span class="o">=</span> <span class="mi">2</span> <span class="p">)</span> 
              <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_redir</span> 
              <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="mi">5</span> <span class="p">)</span> 
       <span class="k">FIELDS</span> <span class="k">id</span><span class="p">,</span> 
              <span class="nv">parent</span><span class="p">,</span> 
              <span class="nv">hierarchy_rank</span><span class="p">,</span> 
              <span class="nv">hierarchy_level</span> 
       <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">hierarchy_cds_hierarchy</span><span class="p">).</span> 

<span class="c1">&quot;Hierarchy generator as source of hierarchy generator </span>
<span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> 
              <span class="k">SOURCE </span><span class="nv">HIERARCHY</span><span class="p">(</span> 
                       <span class="k">SOURCE </span><span class="nv">demo_cds_simple_tree_source</span> 
                       <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_tree</span> 
                       <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="mi">1</span> 
                       <span class="nv">DEPTH</span> <span class="mi">2</span> <span class="p">)</span> 
              <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_tree</span> 
              <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="mi">5</span>  <span class="p">)</span> 
       <span class="k">FIELDS</span> <span class="k">id</span><span class="p">,</span> 
              <span class="nv">parent</span><span class="p">,</span> 
              <span class="nv">hierarchy_rank</span><span class="p">,</span> 
              <span class="nv">hierarchy_level</span> 
       <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">hierarchy_hierarchy</span><span class="p">).</span> 
<span class="k">ASSERT</span> <span class="nv">hierarchy_hierarchy</span> <span class="o">=</span> <span class="nv">hierarchy_cds_hierarchy</span><span class="p">.</span> 

<span class="c1">&quot;CTE hierarchy as source of hierarchy generator </span>
<span class="k">WITH</span> <span class="o">+</span><span class="nv">hierarchy</span> <span class="k">AS</span> <span class="p">(</span> 
        <span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> 
                      <span class="k">SOURCE </span><span class="nv">demo_cds_simple_tree_source</span> 
                      <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_tree</span> 
                      <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="mi">1</span> 
                      <span class="nv">DEPTH</span> <span class="mi">2</span> <span class="p">)</span> <span class="k">AS</span> <span class="nv">hierarchy</span> 
               <span class="k">FIELDS</span> <span class="k">id</span><span class="p">,</span> 
                      <span class="nv">parent</span> <span class="p">)</span> 
        <span class="k">WITH</span> <span class="nv">HIERARCHY</span> <span class="nv">hierarchy</span> 
        <span class="k">WITH</span> <span class="nv">ASSOCIATIONS</span> <span class="p">(</span> <span class="err">\</span><span class="nv">_tree</span> 
                            <span class="nv">REDIRECTED</span> <span class="k">TO</span> <span class="o">+</span><span class="nv">hierarchy</span> 
                            <span class="k">VIA</span> <span class="nv">hierarchy</span> <span class="p">)</span> 
  <span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> 
                <span class="nv">SOURCE</span> <span class="o">+</span><span class="nv">hierarchy</span> 
                <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_tree</span> 
                <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="mi">5</span> 
                <span class="p">)</span> 
         <span class="k">FIELDS</span> <span class="k">id</span><span class="p">,</span> 
                <span class="nv">parent_id</span><span class="p">,</span> 
                <span class="nv">hierarchy_rank</span><span class="p">,</span> 
                <span class="nv">hierarchy_level</span> 
         <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">hierarchy_cte_hierarchy</span><span class="p">).</span> 
<span class="k">ASSERT</span> <span class="nv">hierarchy_cte_hierarchy</span> <span class="o">=</span> <span class="nv">hierarchy_cds_hierarchy</span><span class="p">.</span> 
</code></pre></div>
</div></p>
<h3 id="addition-2">Addition 2</h3>
<p><code style="display: inline;"><span class="qtext">... CHILD TO PARENT ASSOCIATION _hierarchy_assoc</span></code>   <br><!-- /A --></p>
<h3 id="effect_2">Effect</h3>
<p>The addition <code style="display: inline;"><span class="qtext">CHILD TO PARENT ASSOCIATION</span></code> specifies the
<a href="../abenhierarchy_association_glosry" class="grey" title="Glossary Entry">hierarchy association</a> whose <span class="qtext400">ON</span> condition of the hierarchy generator selects the
<a href="../abendescendant_node_glosry" class="grey" title="Glossary Entry">descendant nodes</a> of the
<a href="../abenroot_node_set_glosry" class="grey" title="Glossary Entry">root node set</a>. The hierarchy
association must be published by the source <code style="display: inline;"><span class="qtext">hierarchy_source</span></code> specified after <code style="display: inline;"><span class="qtext">SOURCE</span></code>.</p>
<p>The hierarchy association defines the parent-child relationship between the <a href="../abenhierarchy_node_glosry" class="grey" title="Glossary Entry">hierarchy nodes</a>. The following conditions apply here:</p>
<ul>

<li>The association must be a <a href="../abenself_association_glosry" class="grey" title="Glossary Entry">self-association</a>.</li>

</ul>

<ul>

<li>Only equality comparisons with the operator <span class="qtext400">=</span> and joined using <span class="qtext400">AND</span> can occur in the <span class="qtext400">ON</span> condition of the association.</li>

</ul>

<ul>

<li>In each comparison in the <span class="qtext400">ON</span> condition, one field of the source data
source must be compared with a field (prefixed with <span class="qtext400">_hierarchy_assoc</span>) of the target data source.</li>

</ul>

<ul>

<li>The source data source of the association cannot contain any fields that have the same name as a
<a href="../abenddddl_hierarchy" class="blue">hierarchy column</a>. An alternative element name must be defined for these fields.</li>

</ul>

<p>Each row of the results set of the source <code style="display: inline;"><span class="qtext">hierarchy_source</span></code> that meets the <span class="qtext400">ON</span> condition for an existing hierarchy node is included recursively in the hierarchy as its
<a href="../abenchild_node_glosry" class="grey" title="Glossary Entry">child node</a> (if this is possible).</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>The optional additions define further conditions specifying whether a row can be included as a hierarchy node or not.  </p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following CDS view publishes its CDS association <span class="qtext400">_tree</span>. This CDS association meets all requirements of a hierarchy association and can be used as one.</p>
<dd>
<span class="qtext400">@AbapCatalog.sqlViewName: &apos;DEMOTREESOURCE&apos; <br>@AccessControl.authorizationCheck: #NOT_REQUIRED <br>
define view DEMO_CDS_SIMPLE_TREE_SOURCE <br>&#xA0;&#xA0;as select from <br>&#xA0;&#xA0;&#xA0;&#xA0;demo_simple_tree <br>
&#xA0;&#xA0;&#xA0;&#xA0;association [1..1] to DEMO_CDS_SIMPLE_TREE_SOURCE as _tree on <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;$projection.parent = _tree.id <br>
&#xA0;&#xA0;&#xA0;&#xA0;{ <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;_tree, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;parent_id as parent, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;name <br>&#xA0;&#xA0;&#xA0;&#xA0;}</span>

</dd>

</div>

<h3 id="addition-3">Addition 3</h3>
<p><code style="display: inline;"><span class="qtext">... PERIOD FROM field1 TO field2 VALID FROM from TO to</span></code>   <br><!-- /A --></p>
<h3 id="effect_3">Effect</h3>
<p>Defines a hierarchy as a <a href="../abentemporal_hierarchy_glosry" class="grey" title="Glossary Entry">temporal hierarchy</a> in which the hierarchy nodes are limited by an adjustment of time intervals.</p>
<ul>

<li>With <code style="display: inline;"><span class="qtext">field1</span></code> and <code style="display: inline;"><span class="qtext">field2</span></code>, the fields of the source <code style="display: inline;"><span class="qtext">hierarchy_source</span></code> are specified, which define the lower and upper limits of a
<a href="../abenperiod_glosry" class="grey" title="Glossary Entry">period</a> in the hierarchy details.
<code style="display: inline;"><span class="qtext">field1</span></code> and <code style="display: inline;"><span class="qtext">field2</span></code> must be different fields of the same data type. This can be:</li>

</ul>

<ul class="circlem2">

<li>The built-in type <a href="../abenddic_builtin_types" class="blue">DATS</a> of ABAP Dictionary.</li>

</ul>

<ul class="circlem2">

<li>A data type that is defined by one of the <a href="../abendata_element_glosry" class="grey" title="Glossary Entry">
data elements</a> <span class="lnkgrey">TIMESTAMP</span> or <span class="lnkgrey">TIMESTAMPL</span>.</li>

</ul>

<ul>

<li><code style="display: inline;"><span class="qtext">from</span></code> and <code style="display: inline;"><span class="qtext">to</span></code> define the lower and upper limit of a time interval that acts as a condition for the periods of the
<a href="../abenroot_node_set_glosry" class="grey" title="Glossary Entry">root node set</a>. For <code style="display: inline;"><span class="qtext">from</span></code> and <code style="display: inline;"><span class="qtext">to</span></code>,
<a href="../abenopen_sql_host_variables" class="blue">host variables</a> and
<a href="../abenopen_sql_host_expressions" class="blue">host expressions</a> can be specified, whose
ABAP data type matches the dictionary data type of <code style="display: inline;"><span class="qtext">field1</span></code> and <code style="display: inline;"><span class="qtext">field2</span></code>
exactly. If <code style="display: inline;"><span class="qtext">field1</span></code> and <code style="display: inline;"><span class="qtext">field2</span></code> are date fields
of the type DATS, text field literals of at least length 8 can also be specified for <code style="display: inline;"><span class="qtext">from</span></code> and <code style="display: inline;"><span class="qtext">to</span></code>.</li>

</ul>

<p>A temporal hierarchy is generated as follows:</p>
<ul>

<li>Only <a href="../abenroot_node_glosry" class="grey" title="Glossary Entry">root nodes</a> of the
<a href="../abenroot_node_set_glosry" class="grey" title="Glossary Entry">root node set</a> in which
the period defined using <code style="display: inline;"><span class="qtext">field1</span></code> and <code style="display: inline;"><span class="qtext">field2</span></code> has
a non empty intersection with the time interval defined by <code style="display: inline;"><span class="qtext">from</span></code> and <code style="display: inline;"><span class="qtext">to</span></code> are taken into account. This intersection forms the
<a href="../abenvalidity_interval_glosry" class="grey" title="Glossary Entry">validity interval</a> of the root node.</li>

</ul>

<ul>

<li>Only <a href="../abenchild_node_glosry" class="grey" title="Glossary Entry">child nodes</a> in
which the period defined by <code style="display: inline;"><span class="qtext">field1</span></code> and <code style="display: inline;"><span class="qtext">field2</span></code> has a non empty intersection with the validity interval of the
<a href="../abenparent_node_glosry" class="grey" title="Glossary Entry">parent node</a> are generated. This intersection forms the
<a href="../abenvalidity_interval_glosry" class="grey" title="Glossary Entry">validity interval</a> of the child node.</li>

</ul>

<p>For temporal hierarchies, there are additional <a href="../abenddddl_hierarchy" class="blue">hierarchy columns</a> VALID_FROM and VALID_UNTIL, which contain the interval limits of the
<a href="../abenvalidity_interval_glosry" class="grey" title="Glossary Entry">validity interval</a> of each hierarchy node.</p>
<p>The addition <code style="display: inline;"><span class="qtext">PERIOD</span></code> must not be used with <code style="display: inline;"><span class="qtext">GENERATE SPANTREE</span></code>.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>The validity interval of a descendant node is always a subset of a validity interval of all ancestor
nodes. Validity intervals can only remain the same or become narrower from hierarchy level to hierarchy level, they can never get wider.</li>

<p></ul>
<ul></p>
<li>For a descendant node to belong to a temporal hierarchy, it is not sufficient for its period to
overlap with the time interval defined by <code style="display: inline;"><span class="qtext">from</span></code> and <code style="display: inline;"><span class="qtext">to</span></code>.
Only the validity interval of the parent node is decisive. A path of a normal hierarchy is truncated
in a temporal hierarchy at the position in which there is no intersection between the period and the preceding validity interval.</li>

<p></ul>
<ul></p>
<li>The source data source of the current <a href="../abenhierarchy_association_glosry" class="grey" title="Glossary Entry">
hierarchy association</a> must not have any fields called VALID_FROM or VALID_UNTIL. An alternative element name must be defined for these fields.</li>

<p></ul>
<ul></p>
<li>The value of <code style="display: inline;"><span class="qtext">to</span></code> can also be less than the value of <code style="display: inline;"><span class="qtext">from</span></code>.
However, a validity interval is formed where necessary. In contrast, if the value of the lower interval limit of the period is greater than the value of the upper interval limit, the validity interval is empty.</li>

<p></ul>
<ul></p>
<li>Additions such as <code style="display: inline;"><span class="qtext">MULTIPLE PARENTS</span></code> or <code style="display: inline;"><span class="qtext">CYCLES</span></code>
affect the temporal hierarchy. Nodes that would raise an exception in a normal hierarchy can be hidden in a temporal hierarchy.</li>

<p></ul>
<ul></p>
<li>To generate a temporal hierarchy, in an <a href="../abenhana_database_glosry" class="grey" title="Glossary Entry">SAP HANA database</a>, the hierarchy generator function <a href="https://help.sap.com/viewer/4f9859d273254e04af6ab3e9ea3af286/2.0.03/en-US/a93c356d32ef4e7fbd6143b554278eab.html" target="blank" class="blue">
<span class="qtext400">HIERARCHY_TEMPORAL</span></a> there is called. </li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Generation of two <a href="../abentemporal_hierarchy_glosry" class="grey" title="Glossary Entry">temporal
hierarchies</a> in the program <span class="lnkgrey">DEMO_HIERARCHY_TEMPORAL</span>, where in one date fields and in the other time stamp fields are used as
<a href="../abenperiod_glosry" class="grey" title="Glossary Entry">periods</a>.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> 
  <span class="k">SOURCE </span><span class="nv">demo_cds_parent_child_src_prd</span> 
  <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_relat</span> 
  <span class="nv">PERIOD</span> <span class="k">FROM</span> <span class="nv">date_from</span> <span class="k">TO</span> <span class="nv">date_to</span> 
   <span class="nv">VALID</span> <span class="k">FROM</span> <span class="err">@</span><span class="p">(</span> <span class="nv">CONV</span> <span class="nv">d</span><span class="p">(</span> <span class="nv">sy</span><span class="o">-</span><span class="nv">datlo</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">)</span> 
           <span class="k">TO</span> <span class="err">@</span><span class="p">(</span> <span class="nv">CONV</span> <span class="nv">d</span><span class="p">(</span> <span class="nv">sy</span><span class="o">-</span><span class="nv">datlo</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">)</span> 
  <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;A&#39;</span> 
  <span class="nv">SIBLINGS</span> <span class="k">ORDER BY</span> <span class="k">id</span> <span class="p">)</span> 
       <span class="k">FIELDS</span> <span class="k">id</span><span class="p">,</span> 
              <span class="nv">parent</span><span class="p">,</span> 
              <span class="nv">valid_from</span><span class="p">,</span> 
              <span class="nv">valid_until</span> 
       <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">asql_date_period</span><span class="p">)</span> <span class="cs">##TYPE</span><span class="p">.</span> 

<span class="k">GET TIME STAMP</span> <span class="k">FIELD</span> <span class="k">DATA</span><span class="p">(</span><span class="nv">ts</span><span class="p">).</span> 
<span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> 
  <span class="k">SOURCE </span><span class="nv">demo_cds_parent_child_src_prd</span> 
  <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_relat</span> 
  <span class="nv">PERIOD</span> <span class="k">FROM</span> <span class="nv">ts_from</span> <span class="k">TO</span> <span class="nv">ts_to</span> 
   <span class="nv">VALID</span> <span class="k">FROM</span> <span class="err">@</span><span class="p">(</span> <span class="nv">CONV</span> <span class="k">timestamp</span><span class="p">(</span> 
                  <span class="nv">cl_abap_tstmp</span><span class="o">=&gt;</span><span class="nf">subtractsecs</span><span class="p">(</span> 
                     <span class="nv">tstmp</span> <span class="o">=</span> <span class="nv">ts</span> 
                     <span class="nv">secs</span>  <span class="o">=</span> <span class="mi">86400</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> 
           <span class="k">TO</span> <span class="err">@</span><span class="p">(</span> <span class="nv">CONV</span> <span class="k">timestamp</span><span class="p">(</span> 
                  <span class="nv">cl_abap_tstmp</span><span class="o">=&gt;</span><span class="nf">add</span><span class="p">(</span> 
                     <span class="nv">tstmp</span> <span class="o">=</span> <span class="nv">ts</span> 
                     <span class="nv">secs</span>  <span class="o">=</span> <span class="mi">86400</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> 
  <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;A&#39;</span> 
  <span class="nv">SIBLINGS</span> <span class="k">ORDER BY</span> <span class="k">id</span> <span class="p">)</span> 
       <span class="k">FIELDS</span> <span class="k">id</span><span class="p">,</span> 
              <span class="nv">parent</span><span class="p">,</span> 
              <span class="nv">valid_from</span><span class="p">,</span> 
              <span class="nv">valid_until</span> 
       <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">asql_ts_period</span><span class="p">)</span> <span class="cs">##TYPE</span><span class="p">.</span>
</code></pre></div>

<p>When <span class="lnkgrey">executed</span>, this program demonstrates how the <code style="display: inline;"><span class="qtext">PERIOD</span></code>
addition works. The date and time stamp fields of the database table <span class="lnkgrey">DEMO_PARCHLD_PRD</span>,
which are accessed in the source of the hierarchy generator DEMO_CDS_PARENT_CHILD_SRC_PRD, are filled
with data for this purpose. A normal hierarchy without the addition <code style="display: inline;"><span class="qtext">PERIOD</span></code> and the two temporal hierarchies are shown. The
<a href="../abenvalidity_interval_glosry" class="grey" title="Glossary Entry">validity intervals</a> are also output for these.</p>
<ul>

<li>The temporal hierarchy based on date fields contains only the nodes with the values <span class="qtext400">A</span>,
<span class="qtext400">B</span>, and <span class="qtext400">C</span> in the column ID. The period of
the node with the value <span class="qtext400">D</span> does not overlap with the validity interval
of the parent node with the value <span class="qtext400">B</span>. This means that the child node with
the value <span class="qtext400">E</span> is truncated, irrespective of its period. All other nodes
<span class="qtext400">F</span> to <span class="qtext400">I</span> haven empty periods and do not come into question anyway.</li>

</ul>

<ul>

<li>The temporal hierarchy based on time stamps contains all nodes with periods TS_FROM to TS_TO that
are not empty. The example illustrates how the validity intervals with the hierarchy levels can become
narrower. In the last row, the validity interval corresponds to the previous, even though the period is wider. </li>

</ul>

</div>

<h3 id="addition-4">Addition 4</h3>
<p><code style="display: inline;"><span class="qtext">... START WHERE sql_cond.</span></code>   <br><!-- /A --></p>
<h3 id="effect_4">Effect</h3>
<p>The addition <code style="display: inline;"><span class="qtext">START WHERE</span></code> specifies the start condition for the hierarchy
generator. <code style="display: inline;"><span class="qtext">START WHERE</span></code> must be followed by a logical expression <a href="../abenosql_expr_logexp" class="blue">
<code style="display: inline;"><span class="qtext">sql_cond</span></code></a> that selects rows from the source <code style="display: inline;"><span class="qtext">hierarchy_source</span></code>. The selected rows are inserted in the hierarchy as a
<a href="../abenroot_node_set_glosry" class="grey" title="Glossary Entry">root node set</a>. For each
<a href="../abenroot_node_glosry" class="grey" title="Glossary Entry">root node</a> in the root node set, the
<a href="../abendescendant_node_glosry" class="grey" title="Glossary Entry">descendant nodes</a> are
selected that meet the <span class="qtext400">ON</span> condition of the hierarchy association and, if possible, inserted in the hierarchy.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>The start condition should select a feasible set of root nodes. If no rows in the results set of the
source <code style="display: inline;"><span class="qtext">hierarchy_source</span></code> meet the condition, the hierarchy is empty. If all rows meet the condition, the descendant nodes of every row are selected and inserted.  </p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Specifies an interval condition for the start condition of the hierarchy generator <code style="display: inline;"><span class="qtext">HIERARCHY</span></code>
in the program <span class="lnkgrey">DEMO_HIERARCHY_START_WHERE</span>. All rows in the CDS view specified
as the source that meet the condition are inserted in the hierarchy as root nodes and all their descendant
nodes are selected. When <span class="lnkgrey">executed</span>, this program permits different limits to be entered and displays the result.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">DATA</span><span class="p">(</span><span class="nv">from</span><span class="p">)</span> <span class="o">=</span> <span class="s1">&#39;A &#39;</span><span class="p">.</span> 
<span class="k">DATA</span><span class="p">(</span><span class="nv">to</span><span class="p">)</span> <span class="o">=</span>   <span class="s1">&#39;B &#39;</span><span class="p">.</span> 

<span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> <span class="k">SOURCE </span><span class="nv">demo_cds_parent_child_source</span> 
                       <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_relat</span> 
                       <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="nv">BETWEEN</span> <span class="err">@</span><span class="nv">from</span> <span class="ow">AND</span> <span class="err">@</span><span class="nv">to</span> 
                       <span class="nv">SIBLINGS</span> <span class="k">ORDER BY</span> <span class="nv">parent</span> 
                       <span class="nv">MULTIPLE</span> <span class="nv">PARENTS</span> <span class="nv">ALLOWED</span> 
                       <span class="nv">CYCLES</span> <span class="nv">BREAKUP</span> <span class="p">)</span> 
       <span class="k">FIELDS</span> <span class="k">id</span><span class="p">,</span> 
              <span class="nv">parent</span> 
       <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">asql_result</span><span class="p">).</span> 
</code></pre></div>
</div></p>
<h3 id="addition-5">Addition 5</h3>
<p><code style="display: inline;"><span class="qtext">... SIBLINGS ORDER BY field1 <i class="bn">[</i>ASCENDING<i class="bn">|</i>DESCENDING<i class="bn">]</i>, ...</span></code>   <br><!-- /A --></p>
<h3 id="effect_5">Effect</h3>
<p>The addition <code style="display: inline;"><span class="qtext">SIBLINGS ORDER BY</span></code> sorts
<a href="../abensibling_node_glosry" class="grey" title="Glossary Entry">sibling nodes</a> in the hierarchy
generated by the hierarchy generator. If this addition is not used, the order of the sibling nodes is undefined.</p>
<p>Fields <code style="display: inline;"><span class="qtext">field1</span></code>, <code style="display: inline;"><span class="qtext">field2</span></code>, ... of the source <span class="qtext">
cds_view</span> can be specified in a comma-separated list after the addition <code style="display: inline;"><span class="qtext">hierarchy_source</span></code> to specify the order of the sibling nodes.</p>
<p>The addition <code style="display: inline;"><span class="qtext">ASCENDING</span></code> or <code style="display: inline;"><span class="qtext">DESCENDING</span></code> can be specified for each field to specify an ascending or descending order (ascending is the default).</p>
<p>The fields specified after <code style="display: inline;"><span class="qtext">ORDER BY</span></code> cannot be of the <a href="../abenddic_builtin_types" class="blue">type</a> LCHR, LRAW, STRING, RAWSTRING, or GEOM_EWKB.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>If specified, an additional general <a href="../abaporderby_clause" class="blue"><span class="qtext">ORDER
BY</span></a> clause of the current query is applied to the hierarchy sorted by <code style="display: inline;"><span class="qtext">SIBLINGS ORDER BY</span></code>.</li>

<p></ul>
<ul></p>
<li>The additional <a href="../abenddddl_hierarchy" class="blue">hierarchy columns</a> cannot be specified
after <code style="display: inline;"><span class="qtext">SIBLINGS ORDER BY</span></code>. They can, however, be specified in the general <a href="../abaporderby_clause" class="blue"><code style="display: inline;"><span class="qtext">ORDER BY</span></code></a> clause of the current query.</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Ascending and descending sort of <a href="../abensibling_node_glosry" class="grey" title="Glossary Entry">
sibling nodes</a> in the program <span class="lnkgrey">DEMO_HIERARCHY_SIBLINGS_ORDER</span>. When <span class="lnkgrey">executed</span>, this program demonstrates how these additions work.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> <span class="k">SOURCE </span><span class="nv">demo_cds_simple_tree_source</span> 
                      <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_tree</span> 
                       <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="mi">1</span> 
                       <span class="nv">SIBLINGS</span> <span class="k">ORDER BY</span> <span class="k">id</span> <span class="nv">ASCENDING</span> <span class="p">)</span> 
       <span class="k">FIELDS</span> <span class="k">id</span><span class="p">,</span> 
              <span class="nv">parent</span><span class="p">,</span> 
              <span class="nv">hierarchy_parent_rank</span> 
       <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">result_asc</span><span class="p">).</span> 

<span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> <span class="k">SOURCE </span><span class="nv">demo_cds_simple_tree_source</span> 
                       <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_tree</span> 
                       <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="mi">1</span> 
                       <span class="nv">SIBLINGS</span> <span class="k">ORDER BY</span> <span class="k">id</span> <span class="nv">DESCENDING</span> <span class="p">)</span> 
       <span class="k">FIELDS</span> <span class="k">id</span><span class="p">,</span> 
              <span class="nv">parent</span><span class="p">,</span> 
              <span class="nv">hierarchy_parent_rank</span> 
       <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">result_desc</span><span class="p">).</span> 
</code></pre></div>
</div></p>
<h3 id="addition-6">Addition 6</h3>
<p><code style="display: inline;"><span class="qtext">... DEPTH depth</span></code>   <br><!-- /A --></p>
<h3 id="effect_6">Effect</h3>
<p>The addition <code style="display: inline;"><span class="qtext">depth</span></code> can be used to limit the number of
<a href="../abenhierarchy_level_glosry" class="grey" title="Glossary Entry">hierarchy levels</a> used to create
<a href="../abendescendant_node_glosry" class="grey" title="Glossary Entry">descendant nodes</a>. <code style="display: inline;"><span class="qtext">depth</span></code> expects a
<a href="../abenopen_sql_host_variables" class="blue">host variable</a>, a
<a href="../abenopen_sql_host_expressions" class="blue">host expression</a>, or a
<a href="../abenabap_sql_host_literals" class="blue">literal</a> of type <code style="display: inline;"><span class="qtext">i</span></code>.
Only the types <code style="display: inline;"><span class="qtext">b</span></code>, <code style="display: inline;"><span class="qtext">s</span></code>, or <code style="display: inline;"><span class="qtext">i</span></code> can be specified for <code style="display: inline;"><span class="qtext">depth</span></code>.</p>
<p>The value in <code style="display: inline;"><span class="qtext">depth</span></code> has the following meaning:</p>
<ul>

<li>For <code style="display: inline;"><span class="qtext">depth</span></code> values greater then 0, the number of hierarchy edges are traversed that is specified in <code style="display: inline;"><span class="qtext">depth</span></code>, starting from a
<a href="../abenroot_node_glosry" class="grey" title="Glossary Entry">root node</a>.</li>

</ul>

<ul>

<li>If the value of <code style="display: inline;"><span class="qtext">depth</span></code> is 0, only the <a href="../abenroot_node_glosry" class="grey" title="Glossary Entry">root nodes</a> are inserted in the hierarchy.</li>

</ul>

<ul>

<li>If <code style="display: inline;"><span class="qtext">depth</span></code> is less than 0, no
<a href="../abenhierarchy_node_glosry" class="grey" title="Glossary Entry">hierarchy nodes</a> are created and <code style="display: inline;"><span class="qtext">sy-subrc</span></code> is set to 4.</li>

</ul>

<p>The addition <code style="display: inline;"><span class="qtext">DEPTH</span></code> can be used only if the addition <code style="display: inline;"><span class="qtext">ORPHANS</span></code> is not specified or is specified as <code style="display: inline;"><span class="qtext">ORPHANS IGNORE</span></code>.</p>
<p><br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Limits the number of <a href="../abenhierarchy_level_glosry" class="grey" title="Glossary Entry">hierarchy
levels</a> in the program <span class="lnkgrey">DEMO_HIERARCHY_DEPTH</span>. When <span class="lnkgrey">executed</span>, this program demonstrates how this addition works. It also shows the
<a href="../abenhierarchy_level_glosry" class="grey" title="Glossary Entry">hierarchy level</a> from the hierarchy column HIERARCHY_LEVEL.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> <span class="k">SOURCE </span><span class="nv">demo_cds_simple_tree_source</span> 
                      <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_tree</span> 
                       <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="mi">1</span> 
                       <span class="nv">DEPTH</span> <span class="mi">1</span> <span class="p">)</span> 
       <span class="k">FIELDS</span> <span class="nv">name</span><span class="p">,</span> 
              <span class="nv">hierarchy_level</span> 
       <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">result_1</span><span class="p">).</span> 
</code></pre></div>
</div></p>
<h3 id="addition-7">Addition 7</h3>
<p><code style="display: inline;"><span class="qtext">... MULTIPLE PARENTS <i class="bn">{</i>NOT ALLOWED<i class="bn">}</i><i class="bn">|</i><i class="bn">{</i>LEAVES ONLY<i class="bn">}</i><i class="bn">|</i>ALLOWED</span></code>   <br><!-- /A --></p>
<h3 id="effect_7">Effect</h3>
<p>The addition <code style="display: inline;"><span class="qtext">MULTIPLE PARENTS</span></code> can be used to define whether the hierarchy generator is able to generate
<a href="../abenchild_node_glosry" class="grey" title="Glossary Entry">child nodes</a> with multiple <a href="../abenparent_node_glosry" class="grey" title="Glossary Entry">parent nodes</a>:</p>
<ul>

<li><code style="display: inline;"><span class="qtext">NOT ALLOWED</span></code></li>

</ul>

<dd>
This is the default setting (a child node can have precisely on parent node only).
</dd>

<ul>

<li><code style="display: inline;"><span class="qtext">LEAVES ONLY</span></code></li>

</ul>

<dd>
Only <a href="../abenleaf_node_glosry" class="grey" title="Glossary Entry">leaf nodes</a> can have multiple parent nodes.
</dd>

<ul>

<li><code style="display: inline;"><span class="qtext">ALLOWED</span></code></li>

</ul>

<dd>
All hierarchy nodes can have multiple parent nodes.
</dd>

<p><br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Creates a hierarchy in the program <span class="lnkgrey">DEMO_HIERARCHY_MULTI_PARENTS</span>. Only leaf nodes can have multiple parents here.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> <span class="k">SOURCE </span><span class="nv">demo_cds_parent_child_source</span> 
                      <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_relat</span> 
                       <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;A&#39;</span> 
                       <span class="nv">MULTIPLE</span> <span class="nv">PARENTS</span> <span class="nv">LEAVES</span> <span class="nv">ONLY</span> <span class="p">)</span> 
       <span class="k">FIELDS</span> <span class="k">id</span><span class="p">,</span> 
              <span class="nv">parent</span><span class="p">,</span> 
              <span class="nv">hierarchy_level</span> 
       <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">leaves_only</span><span class="p">).</span>
</code></pre></div>

<p>When <span class="lnkgrey">executed</span>, this program demonstrates how the <code style="display: inline;"><span class="qtext">MULTIPLE PARENTS</span></code> addition works.</p>
<ul>

<li>The first <code style="display: inline;"><span class="qtext">SELECT</span></code> statement does not specify the addition and <span class="qtext">NOT
ALLOWED</span> is applied implicitly. The hierarchy node with the ID <span class="qtext400">D</span> has three parent nodes and hence an exception is raised.</li>

</ul>

<ul>

<li>The next <code style="display: inline;"><span class="qtext">SELECT</span></code> statement specifies the addition <span class="qtext">MULTIPLE
PARENTS LEAVES ONLY</span>. The hierarchy node with the ID <span class="qtext400">D</span> is a leaf node, which means the function can be accessed.</li>

</ul>

<ul>

<li>A child node for the row with the ID <span class="qtext400">D</span> is inserted in front of the
next <code style="display: inline;"><span class="qtext">SELECT</span></code> statement in the database table DEMO_PARENT_CHLD. If used, the addition <code style="display: inline;"><span class="qtext">MULTIPLE PARENTS LEAVES ONLY</span></code> now also raises an exception.</li>

</ul>

<ul>

<li>The next <code style="display: inline;"><span class="qtext">SELECT</span></code> statement specifies the addition <code style="display: inline;"><span class="qtext">MULTIPLE PARENTS ALLOWED</span></code> and it is possible to access the table again. </li>

</ul>

</div>

<h3 id="addition-8">Addition 8</h3>
<p><code style="display: inline;"><span class="qtext">... ORPHANS IGNORE<i class="bn">|</i>ERROR<i class="bn">|</i>ROOT</span></code>   <br><!-- /A --></p>
<h3 id="effect_8">Effect</h3>
<p>The addition <code style="display: inline;"><span class="qtext">ORPHANS</span></code> defines the way <a href="../abenorphan_node_glosry" class="grey" title="Glossary Entry">orphan nodes</a> are handled. The following categories of orphan nodes exist:</p>
<ul>

<li>Hierarchy nodes that could have parent nodes (as specified by the parent-child relationship) but the parent nodes are not in the hierarchy (known as true orphans).</li>

</ul>

<ul>

<li>Hierarchy nodes that cannot be reached from the root node set using hierarchy edges.</li>

</ul>

<ul>

<li>Hierarchy nodes that are part of a <a href="../abennode_cycle_glosry" class="grey" title="Glossary Entry">
node cycle</a> and cannot be reached from the root node set using hierarchy nodes (known as island orphans).</li>

</ul>

<p>The additions work as follows:</p>
<ul>

<li><code style="display: inline;"><span class="qtext">IGNORE</span></code></li>

</ul>

<dd>
This is the default setting (any orphan nodes are not inserted in the hierarchy).
</dd>

<ul>

<li><code style="display: inline;"><span class="qtext">ERROR</span></code></li>

</ul>

<dd>
Any orphan nodes detected raise an exception.
</dd>

<ul>

<li><code style="display: inline;"><span class="qtext">ROOT</span></code></li>

</ul>

<dd>
Orphan nodes are inserted in the hierarchy as follows:
</dd>

<ul class="circlem2">

<li>True orphans are included in the root node set as root nodes and flagged as orphan nodes in the <a href="../abenddddl_hierarchy" class="blue">hierarchy column</a> HIERARCHY_IS_ORPHAN.</li>

</ul>

<ul class="circlem2">

<li><a href="../abendescendant_node_glosry" class="grey" title="Glossary Entry">Descendant
nodes</a> of true orphans are handled like descendant nodes of parent nodes from the root node set, but are also flagged as orphan nodes in the
<a href="../abenddddl_hierarchy" class="blue">hierarchy column</a> HIERARCHY_IS_ORPHAN.</li>

</ul>

<ul class="circlem2">

<li>For the hierarchy nodes of island orphans, a parent node in the root node set is generated for the
child node where the cycle occurs. In the generated root node, all columns of the source <code style="display: inline;"><span class="qtext">hierarchy_source</span></code> contain the null value. In the
<a href="../abenddddl_hierarchy" class="blue">hierarchy columns</a>, the additional root node is flagged as an orphan node and PARENT_ID also contains the null value.</li>

</ul>

<p><br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Handles orphan nodes in the program <span class="lnkgrey">DEMO_HIERARCHY_ORPHANS</span>.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> <span class="k">SOURCE </span><span class="nv">demo_cds_parent_child_source</span> 
                      <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_relat</span> 
                       <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;A&#39;</span> 
                       <span class="nv">MULTIPLE</span> <span class="nv">PARENTS</span> <span class="nv">ALLOWED</span> 
                       <span class="nv">ORPHANS</span> <span class="nv">ROOT</span> 
                       <span class="nv">CYCLES</span> <span class="nv">BREAKUP</span> <span class="p">)</span> 
       <span class="k">FIELDS</span> <span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">id</span> <span class="nv">IS</span> <span class="nv">NULL</span> <span class="nv">THEN</span> <span class="s1">&#39;__&#39;</span> 
                   <span class="k">ELSE</span> <span class="k">id</span> 
                   <span class="nv">END</span> <span class="k">AS</span> <span class="k">id</span><span class="p">,</span> 
              <span class="k">CASE</span> <span class="k">WHEN</span> <span class="nv">parent</span> <span class="nv">IS</span> <span class="nv">NULL</span> <span class="nv">THEN</span> <span class="s1">&#39;__&#39;</span> 
                   <span class="k">ELSE</span> <span class="nv">parent</span> 
                   <span class="nv">END</span> <span class="k">AS</span> <span class="nv">parent</span><span class="p">,</span> 
              <span class="nv">hierarchy_is_orphan</span><span class="p">,</span> 
              <span class="nv">hierarchy_is_cycle</span><span class="p">,</span> 
              <span class="nv">hierarchy_rank</span><span class="p">,</span> 
              <span class="nv">hierarchy_parent_rank</span><span class="p">,</span> 
              <span class="nv">hierarchy_level</span> 
       <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">root</span><span class="p">).</span>
</code></pre></div>

<p>When <span class="lnkgrey">executed</span>, this program demonstrates how the <code style="display: inline;"><span class="qtext">ORPHANS</span></code> addition works.</p>
<ul>

<li>The first <code style="display: inline;"><span class="qtext">SELECT</span></code> statement specifies the addition <span class="qtext">ORPHANS
IGNORE</span>. All orphan nodes are ignored and only the root node set consisting of a single root node is read and inserted in the hierarchy.</li>

</ul>

<ul>

<li>The next <code style="display: inline;"><span class="qtext">SELECT</span></code> statement specifies the addition <code style="display: inline;"><span class="qtext">ORPHANS ERROR</span></code>. The hierarchy would contain orphan nodes and hence an exception is raised.</li>

</ul>

<ul>

<li>The next <code style="display: inline;"><span class="qtext">SELECT</span></code> statement specifies the addition <code style="display: inline;"><span class="qtext">ORPHANS ROOT</span></code> and all orphan nodes are inserted in the hierarchy:</li>

</ul>

<ul class="circlem2">

<li>The hierarchy node with the value <span class="qtext400">B</span> in the column ID is a true orphan
node. It contains a blank in the column PARENT_ID but there is no root node with a blank in the column
ID. The addition <code style="display: inline;"><span class="qtext">ROOT</span></code> includes the hierarchy node itself in the root node
set (the hierarchy column HIERARCHY_PARENT_RANK has the value 0) and the row is flagged as an orphan node in the hierarchy column HIERARCHY_IS_ORPHAN.</li>

</ul>

<ul class="circlem2">

<li>The hierarchy node with the value <span class="qtext400">C</span> in the column ID contains the
value <span class="qtext400">B</span> in the column PARENT_ID. The parent node is an orphan node included in the root node set, which means that this hierarchy node is also flagged as an orphan node.</li>

</ul>

<ul class="circlem2">

<li>The hierarchy node with the value <span class="qtext400">X</span> in the column ID also contains
the value <span class="qtext400">X</span> in the column PARENT_ID. The hierarchy node then starts a
node cycle where this node is itself the parent node. It is not part of the root node set, however,
which means it is an island orphan. A parent node is inserted in the root node set in which the columns of the CDS view DEMO_CDS_PARENT_CHILD_SOURCE, plus the hierarchy column PARENT_ID, contain null values.</li>

</ul>

<ul class="circlem2">

<li>The hierarchy nodes with the values <span class="qtext400">U</span>, <span class="qtext400">V</span>,
and <span class="qtext400">W</span> in the column ID also comprise an island orphan. None of the hierarchy
nodes in this node cycle is a root node. Again, a parent node is inserted in the root node set in which the columns of the CDS view, plus the hierarchy column PARENT_ID, contain null values. </li>

</ul>

</div>

<h3 id="addition-9">Addition 9</h3>
<p><code style="display: inline;"><span class="qtext">... CYCLES ERROR<i class="bn">|</i>BREAKUP</span></code>   <br><!-- /A --></p>
<h3 id="effect_9">Effect</h3>
<p>The addition <code style="display: inline;"><span class="qtext">CYCLES</span></code> defines how <a href="../abennode_cycle_glosry" class="grey" title="Glossary Entry">node cycles</a> are defined. The additions work as follows:</p>
<ul>

<li><code style="display: inline;"><span class="qtext">ERROR</span></code></li>

</ul>

<dd>
This is the default setting (an exception is raised when a node cycle is detected).
</dd>

<ul>

<li><code style="display: inline;"><span class="qtext">BREAKUP</span></code></li>

</ul>

<dd>
The traversal of <a href="../abendescendant_node_glosry" class="grey" title="Glossary Entry">descendant nodes</a> is broken at the child node where the node cycle occurs and the
<a href="../abenddddl_hierarchy" class="blue">hierarchy column</a> HIERARCHY_IS_CYCLE is set to the value 1.
</dd>

<p>If the addition <code style="display: inline;"><span class="qtext">BREAKUP</span></code> is specified, <code style="display: inline;"><span class="qtext">MULTIPLE PARENTS ALLOWED</span></code> must also be specified.  </p>
<p><br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Handles node cycles in the program <span class="lnkgrey">DEMO_HIERARCHY_CYCLES</span>.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> <span class="k">SOURCE </span><span class="nv">demo_cds_parent_child_source</span> 
                      <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_relat</span> 
                       <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;A&#39;</span> <span class="ow">OR</span> 
                                  <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;X&#39;</span> <span class="ow">OR</span> 
                                  <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;Y&#39;</span> <span class="ow">OR</span> 
                                  <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;Z&#39;</span> 
                       <span class="nv">MULTIPLE</span> <span class="nv">PARENTS</span> <span class="nv">ALLOWED</span> 
                       <span class="nv">CYCLES</span> <span class="nv">BREAKUP</span> <span class="p">)</span> 
       <span class="k">FIELDS</span> <span class="k">id</span><span class="p">,</span> 
              <span class="nv">parent</span><span class="p">,</span> 
              <span class="nv">hierarchy_is_cycle</span><span class="p">,</span> 
              <span class="nv">hierarchy_level</span> 
       <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">breakup</span><span class="p">).</span>
</code></pre></div>

<p>When <span class="lnkgrey">executed</span>, this program demonstrates how the <code style="display: inline;"><span class="qtext">CYCLES</span></code> addition works.</p>
<ul>

<li>The first <code style="display: inline;"><span class="qtext">SELECT</span></code> statement specifies the addition <span class="qtext">CYCLES
BREAKUP</span>. Here, the root node set consists of four root nodes of the CDS view DEMO_CDS_PARENT_CHILD_SOURCE and the following node cycles are detected:</li>

</ul>

<ul class="circlem2">

<li>The child node with the value <span class="qtext400">A</span> in the column ID is also its own parent node. The hierarchy column HIERARCHY_IS_CYCLE contains the value 1 and no more descendant nodes are created.</li>

</ul>

<ul class="circlem2">

<li>Starting from the hierarchy node with the value <span class="qtext400">X</span> in the column ID,
child nodes are created with the values <span class="qtext400">Y</span> and <span class="qtext400">Z</span>
and (again) <span class="qtext400">X</span>. The cycle is detected at the final child node, HIERARCHY_IS_CYCLE
contains the value 1, and no more descendant nodes are created. The same applies to the descendant nodes
starting from the root nodes with the values <span class="qtext400">Y</span> and <span class="qtext400">Z</span>.</li>

</ul>

<ul>

<li>The second <code style="display: inline;"><span class="qtext">SELECT</span></code> statement specifies the addition <code style="display: inline;"><span class="qtext">CYCLES ERROR</span></code> and raises an exception. </li>

</ul>

</div>

<h3 id="addition-10">Addition 10</h3>
<p><code style="display: inline;"><span class="qtext">... GENERATE SPANTREE</span></code>   <br><!-- /A --></p>
<h3 id="effect_10">Effect</h3>
<p>If the addition <code style="display: inline;"><span class="qtext">GENERATE SPANTREE</span></code> is specified, the hierarchy generator inserts
only child nodes without multiple parent nodes, starting from every root node. If, due to its parent-child
relationships, a child node were to have multiple parent nodes after its root node, precisely one of the potential paths from the root node to this child node is selected and the child node is created for this path only.</p>
<ul>

<li>If the paths have different lengths, the shortest is selected.</li>

</ul>

<ul>

<li>If the paths all have the same length, the first path found is selected.</li>

</ul>

<p>If the addition <code style="display: inline;"><span class="qtext">GENERATE SPANTREE</span></code> is specified, the following additions must be specified at the same time:</p>
<ul>

<li><code style="display: inline;"><span class="qtext">MULTIPLE PARENTS ALLOWED</span></code></li>

</ul>

<ul>

<li><code style="display: inline;"><span class="qtext">ORPHANS IGNORE</span></code> or <code style="display: inline;"><span class="qtext">ORPHANS</span></code> not specified</li>

</ul>

<ul>

<li><code style="display: inline;"><span class="qtext">CYCLES BREAKUP</span></code></li>

</ul>

<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>If the parent-child relationships for the current data do not produce tree-like hierarchies, the addition <code style="display: inline;"><span class="qtext">GENERATE SPANTREE</span></code> is ignored.</li>

<p></ul>
<ul></p>
<li>Even if one path (from many paths) to a child node is selected, this does not mean that all others are rejected. In this case, only the edges leading to the child node are missing.</li>

<p></ul>
<ul></p>
<li>The addition <code style="display: inline;"><span class="qtext">GENERATE SPANTREE</span></code> can be used to detect whether at least one path leads from a root node to a child node without the results set needing to contain all paths.</li>

<p></ul>
<ul></p>
<li>The addition <code style="display: inline;"><span class="qtext">GENERATE SPANTREE</span></code> is used in an
<a href="../abenhana_database_glosry" class="grey" title="Glossary Entry">SAP HANA database</a> to access the hierarchy generator function <a href="https://help.sap.com/viewer/4f9859d273254e04af6ab3e9ea3af286/2.0.03/en-US/a93c356d32ef4e7fbd6143b554278eab.html" target="blank" class="blue"><span class="qtext400">HIERARCHY_SPANTREE</span></a> there.</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Uses <code style="display: inline;"><span class="qtext">GENERATE SPANTREE</span></code> in the program <span class="lnkgrey">DEMO_HIERARCHY_SPANTREE</span>.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">HIERARCHY</span><span class="p">(</span> <span class="k">SOURCE </span><span class="nv">demo_cds_parent_child_source</span> 
                      <span class="nv">CHILD</span> <span class="k">TO</span> <span class="nv">PARENT</span> <span class="nv">ASSOCIATION</span> <span class="nv">_relat</span> 
                       <span class="nv">START</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;A&#39;</span> <span class="ow">OR</span> 
                                  <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;K&#39;</span> <span class="ow">OR</span> 
                                  <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;X&#39;</span> <span class="ow">OR</span> 
                                  <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;Y&#39;</span> 
                       <span class="nv">MULTIPLE</span> <span class="nv">PARENTS</span> <span class="nv">ALLOWED</span> 
                       <span class="nv">CYCLES</span> <span class="nv">BREAKUP</span> 
                       <span class="nv">GENERATE</span> <span class="nv">SPANTREE</span> <span class="p">)</span> 
       <span class="k">FIELDS</span> <span class="k">id</span><span class="p">,</span> 
              <span class="nv">parent</span> 
       <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">spantree</span><span class="p">).</span>
</code></pre></div>

<p>When <span class="lnkgrey">executed</span>, this program demonstrates how the <code style="display: inline;"><span class="qtext">GENERATE SPANTREE</span></code> addition works.</p>
<ul>

<li>The first <code style="display: inline;"><span class="qtext">SELECT</span></code> statement does not specify the addition <code style="display: inline;"><span class="qtext">GENERATE SPANTREE</span></code>. The hierarchy contains all possible paths from root nodes to child nodes.</li>

</ul>

<ul>

<li>The second <code style="display: inline;"><span class="qtext">SELECT</span></code> statement specifies the addition <span class="qtext">GENERATE
SPANTREE</span>. Starting from each root node, the results set only contains one path to the potential child nodes:</li>

</ul>

<ul class="circlem2">

<li>From the root node with the value <span class="qtext400">A</span> in ID, two paths lead to <span class="qtext400">
D</span>. Only the shorter path directly from <span class="qtext400">A</span> to <span class="qtext400">D</span>
is created. The connection between <span class="qtext400">C</span> and <span class="qtext400">D</span> in the longer path is not created.</li>

</ul>

<ul class="circlem2">

<li>From the root node with the value <span class="qtext400">A</span> in ID, two paths lead to <span class="qtext400">
N</span>. Only one of the two paths from <span class="qtext400">L</span> to <span class="qtext400">N</span> or <span class="qtext400">M</span> to <span class="qtext400">N</span> is created.</li>

</ul>

<ul class="circlem2">

<li>The child node with the value <span class="qtext400">Z</span> in ID has two parent nodes <span class="qtext400">X</span> and <span class="qtext400">Y</span>. Since both are root nodes, both paths are created.</li>

</ul>

</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>