


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abapcall function background task - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#call-function-in-background-task" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abapcall function background task
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#obsolete-syntax" class="md-nav__link">
    Obsolete Syntax
  </a>
  
    <nav class="md-nav" aria-label="Obsolete Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#addition" class="md-nav__link">
    Addition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-information" class="md-nav__link">
    More Information
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition_1" class="md-nav__link">
    Addition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_1" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abapcall_function_background_task.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP &#x2212; Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_obsolete" class="blue">Obsolete Language Elements</a>&#xA0;&#x2192;&#xA0;
<a href="../abenextern_obsolete" class="blue">Obsolete Data and Communication Interfaces</a>&#xA0;&#x2192;&#xA0;
<a href="../abenrfc_obsolete" class="blue">Obsolete Transactional RFC</a>&#xA0;</small></p>
<h1 id="call-function-in-background-task">CALL FUNCTION - IN BACKGROUND TASK</h1>
<p><a href="../abapcall_function_shortref" class="blue">Quick Reference</a>  </p>
<p>Other versions: 
 <a href="../../7.31/abapcall_function_background_task">7.31</a> | <a href="../../7.40/abapcall_function_background_task">7.40</a> | <b>7.54</b></p>
<h2 id="obsolete-syntax">Obsolete Syntax</h2>
<p><code style="display: inline;"><span class="qtext">CALL FUNCTION func IN BACKGROUND TASK</span></code> <br><span class="qtext">&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <i class="bn">[</i>AS SEPARATE UNIT<i class="bn">]</i></span> <br>
<code style="display: inline;"><span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <i class="bn">[</i>DESTINATION dest<i class="bn">]</i></span></code> <br>
<span class="qtext">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0; <a href="../abapcall_function_background_para" class="blue">parameter_list</a></span>.  </p>
<h3 id="addition">Addition</h3>
<p><a href="#!ABAP_ONE_ADD@1@" class="blue"> <code style="display: inline;"><span class="qtext">... AS SEPARATE UNIT</span></code> </a>  </p>
<h3 id="effect">Effect</h3>
<p>Transactional call (tRFC) of a <a href="../abenremote_enabled_fm_glosry" class="grey" title="Glossary Entry">remote-enabled function module</a> specified in <code style="display: inline;"><span class="qtext">func</span></code> using the
<a href="../abenrfc_interface_glosry" class="grey" title="Glossary Entry">RFC interface</a>. Using the addition <code style="display: inline;"><span class="qtext">DESTINATION</span></code>, a unique
<a href="../abenrfc_destination" class="blue">destination</a> can be specified in <code style="display: inline;"><span class="qtext">dest</span></code>.
If the destination is not specified, the destination <span class="qtext400">&quot;NONE&quot;</span> is used implicitly. <code style="display: inline;"><span class="qtext">func</span></code> and <code style="display: inline;"><span class="qtext">dest</span></code> expect character-like data objects.</p>
<p>The transactional call registers the name of the called function, together with the destination and
the actual parameters passed in <a href="../abapcall_function_background_para" class="blue"><code style="display: inline;"><span class="qtext">parameter_list</span></code></a> for the current
<a href="../abensap_luw_glosry" class="grey" title="Glossary Entry">SAP LUW</a> in the database tables <span class="lnkgrey">ARFCSSTATE</span> and <span class="lnkgrey">ARFCSDATA</span> of the current
<a href="../abensap_nw_abap_glosry" class="grey" title="Glossary Entry">AS ABAP</a> under a unique
transaction ID (abbreviated as TID, stored in a structure of type ARFCTID from ABAP Dictionary, viewed
using transaction <span class="lnkgrey">SM58</span>). After registration, the calling program is continued after the statement <code style="display: inline;"><span class="qtext">CALL FUNCTION</span></code>.</p>
<p>When the <a href="../abapcommit" class="blue"><code style="display: inline;"><span class="qtext">COMMIT WORK</span></code></a> statement
is executed, the function modules registered for the current SAP LUW are started in the order in which
they were registered. The statement <a href="../abaprollback" class="blue"><code style="display: inline;"><span class="qtext">ROLLBACK WORK</span></code></a> deletes all previous registrations for the current SAP LUW.</p>
<p>If the specified destination is not available when <code style="display: inline;"><span class="qtext">COMMIT WORK</span></code> is executed, an
<a href="../abenexecutable_program_glosry" class="grey" title="Glossary Entry">executable program</a> called RSARFCSE is started in
<a href="../abenbackround_processing_glosry" class="grey" title="Glossary Entry">background processing</a>.
By default, this tries to start the function modules registered for a SAP LUW in their destination every
15 minutes and up to 30 times. Changes can be made to these parameters using transaction <span class="lnkgrey">SM59</span>.
If the destination does not become available within the defined time, it is recorded in the database
table <span class="lnkgrey">ARFCSDATA</span> as the entry <span class="qtext400">&quot;CPICERR&quot;</span>. By default, this entry in database table <span class="lnkgrey">ARFCSSTATE</span> is deleted after eight days.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p><a href="../abenbg_remote_function_glosry" class="grey" title="Glossary Entry">background RFC (bgRFC)</a>
executed with the statement <a href="../abapcall_function_background_unit" class="blue"><span class="qtext">CALL
FUNCTION IN BACKGROUND UNIT</span></a> is the enhanced successor technology of transactional RFC (tRFC) and makes this technology obsolete. It is strongly recommended to use bgRFC instead of tRFC.</p>
</div>

<h3 id="more-information">More Information</h3>
<p>More information about tRFC can be found in the <span class="lnkgrey">RFC</span> documentation on <a href="http://help.sap.com/" target="blank" class="blue">SAP Help Portal</a>.  </p>
<p><a name="@@AS SEPARATE UNIT@@CALL FUNCTION IN BACKGROUND TASK (obsolete)@@"></a></p>
<h3 id="addition_1">Addition</h3>
<p><code style="display: inline;"><span class="qtext">... AS SEPARATE UNIT</span></code> <!-- /A -->  <br></p>
<h3 id="effect_1">Effect</h3>
<p>When using the addition <code style="display: inline;"><span class="qtext">AS SEPARATE UNIT</span></code>, the relevant function module is executed in a separate
<a href="../abenrfc_session_glosry" class="grey" title="Glossary Entry">RFC session</a>, in which the
global data of the function group is not influenced by previous calls. Each function module that is
registered with the addition <code style="display: inline;"><span class="qtext">AS SEPARATE UNIT</span></code> is given a separate transaction ID. Without the addition <code style="display: inline;"><span class="qtext">AS SEPARATE UNIT</span></code>, the usual
<a href="../abenrfc_context" class="blue">description</a> applies to the
<a href="../abenrfc_session_glosry" class="grey" title="Glossary Entry">RFC session</a> of the called function modules. This means that, when using the same
<a href="../abendestination_glosry" class="grey" title="Glossary Entry">RFC destination</a> for multiple
calls of function modules belonging to the same function group, the global data of this function group is accessed collectively.  </p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>
The function module <span class="lnkgrey">ID_OF_BACKGROUNDTASK</span> can be used after a transactional RFC to determine the transactional ID (TID) of the current
<a href="../abensap_luw_glosry" class="grey" title="Glossary Entry">SAP LUW</a>. 
</li>

<li>
The transactional RFC (tRFC) is suitable for realizing LUWs in distributed environments (a typical application is ALE). Note that, although the execution of the function modules within a transaction ID is specified, the order of the
<a href="../abenluw_glosry" class="grey" title="Glossary Entry">LUWs</a> on the RFC servers is not
necessarily the same as the order of the SAP LUWs on the RFC client. To ensure the same serialization is also used on RFC servers, the tRFC can be enhanced as
(<a href="../abenqrfc_glosry" class="grey" title="Glossary Entry">queued RFC (qRFC)</a>). For this,
the function module <span class="lnkgrey">TRFC_SET_QUEUE_NAME</span> can be called before a transactional RFC. More information about qRFC can be found in the <span class="lnkgrey">RFC</span> documentation on
<a href="http://help.sap.com/" target="blank" class="blue">SAP Help Portal</a>.
</li>

<li>
If <a href="../abentrfc_2_glosry" class="grey" title="Glossary Entry">tRFC</a> or
<a href="../abenqrfc_glosry" class="grey" title="Glossary Entry">qRFC</a> are registered in a
<a href="../abendialog_module_object_glosry" class="grey" title="Glossary Entry">dialog module</a>
and are not started with <code style="display: inline;"><span class="qtext">COMMIT WORK</span></code>, they are not executed by the <code style="display: inline;"><span class="qtext">COMMIT WORK</span></code> of the caller. 
</li>

<li>
The new variant <a href="../abapcall_function_background_unit" class="blue"><code style="display: inline;"><span class="qtext">CALL FUNCTION IN BACKGROUND UNIT</span></code></a>
(<a href="../abenbgrfc_glosry" class="grey" title="Glossary Entry">bgRFC</a>) includes and enhances the existing tRFC and qRFC variants. For this reason, we strongly recommend using bgRFC instead of tRFC. 
</li>

<li>
The statements <a href="../abapcommit" class="blue"><code style="display: inline;"><span class="qtext">COMMIT WORK</span></code></a> and
<a href="../abaprollback" class="blue"><code style="display: inline;"><span class="qtext">ROLLBACK WORK</span></code></a> must not be executed within a LUW. In addition, no implicit
<a href="../abendatabase_commit_glosry" class="grey" title="Glossary Entry">database commit</a> can be triggered there. 
</li>

<li>
When handling the registration entries in the database tables ARFCSSTATE and ARFCSDATA, note that they are subject to the regular administration rules for a
<a href="../abendatabase_luw_glosry" class="grey" title="Glossary Entry">database LUW</a>. For example, the database LUW is ended by a
<a href="../abendatabase_rollback_glosry" class="grey" title="Glossary Entry">database rollback</a>, all registration entries of the current database LUW are deleted.
<br></li>

</ul>

</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>