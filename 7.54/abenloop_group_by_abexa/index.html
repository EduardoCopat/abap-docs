


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Internal tables, Introduction to LOOP AT GROUP BY - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#internal-tables-introduction-to-loop-at-group-by" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Internal tables, Introduction to LOOP AT GROUP BY
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="ABAP docs" class="md-nav__link">
      ABAP docs
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#source-code" class="md-nav__link">
    Source Code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    Description
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abenloop_group_by_abexa.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="internal-tables-introduction-to-loop-at-group-by">Internal tables, Introduction to LOOP AT GROUP BY</h1>
<p>The example is a step-by-step introduction to grouping with <a href="../abaploop_at_itab_group_by" class="blue"><code style="display: inline;"><span class="qtext">LOOP AT GROUP BY</span></code></a>.</p>
<p><a name="@@ITOC@@ABENLOOP_GROUP_BY_ABEXA_1"></a>
<s><i>7.31</i></s> <s><i>7.40</i></s> <b>7.54</b></p>
<p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP &#x2212; Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_data_working" class="blue">Processing Internal Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenitab" class="blue">Internal Tables</a>&#xA0;&#x2192;&#xA0;
<a href="../abentable_processing_statements" class="blue">Processing Statements for Internal Tables</a>&#xA0;&#x2192;&#xA0;
<a href="../abaploop_at_itab_variants" class="blue">LOOP AT itab</a>&#xA0;&#x2192;&#xA0;
<a href="../abaploop_at_itab_group_by" class="blue">LOOP AT itab - GROUP BY</a>&#xA0;&#x2192;&#xA0;
<a href="../abenloop_group_by_abexas" class="blue">Examples of Grouping with LOOP</a>&#xA0;</small></p>
<h2 id="source-code">Source Code</h2>
<p><div class="highlight"><pre><span></span><code>    <span class="k">DATA</span><span class="p">(</span><span class="nv">out</span><span class="p">)</span> <span class="o">=</span> <span class="nv">cl_demo_output</span><span class="o">=&gt;</span><span class="nf">new</span><span class="p">(</span> <span class="p">).</span>

    <span class="k">DATA</span><span class="p">:</span>
      <span class="nv">wa</span>      <span class="k">TYPE </span><span class="nv">spfli</span><span class="p">,</span>
      <span class="nv">member</span>  <span class="k">TYPE </span><span class="nv">spfli</span><span class="p">,</span>
      <span class="nv">members</span> <span class="k">TYPE STANDARD TABLE OF</span> <span class="nv">spfli</span> <span class="k">WITH</span> <span class="nv">EMPTY</span> <span class="k">KEY</span><span class="p">.</span>


    <span class="k">SELECT</span> <span class="o">*</span>
           <span class="k">FROM</span> <span class="nv">spfli</span>
           <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">spfli_tab</span><span class="p">).</span>

    <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">begin_section</span><span class="p">(</span> <span class="s1">`Representative Binding`</span> <span class="p">).</span>

    <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">begin_section</span><span class="p">(</span>
     <span class="s1">`Grouping by one column`</span> <span class="p">).</span>
    <span class="k">LOOP AT </span><span class="nv">spfli_tab</span> <span class="k">INTO</span> <span class="nv">wa</span>
                      <span class="k">GROUP BY</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">carrid</span><span class="p">.</span>
      <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">carrid</span> <span class="p">).</span>
    <span class="k">ENDLOOP</span><span class="p">.</span>

    <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">next_section</span><span class="p">(</span>
     <span class="s1">`Members of one column groups`</span> <span class="p">).</span>
    <span class="k">LOOP AT </span><span class="nv">spfli_tab</span> <span class="k">INTO</span> <span class="nv">wa</span>
                      <span class="k">GROUP BY</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">carrid</span><span class="p">.</span>
      <span class="k">CLEAR</span> <span class="nv">members</span><span class="p">.</span>
      <span class="k">LOOP AT </span><span class="nv">GROUP</span> <span class="nv">wa</span> <span class="k">INTO</span> <span class="nv">member</span><span class="p">.</span>
        <span class="nv">members</span> <span class="o">=</span> <span class="k">VALUE</span> <span class="err">#</span><span class="p">(</span> <span class="nv">BASE</span> <span class="nv">members</span> <span class="p">(</span> <span class="nv">member</span> <span class="p">)</span> <span class="p">).</span>
      <span class="k">ENDLOOP</span><span class="p">.</span>
      <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">members</span> <span class="p">).</span>
    <span class="k">ENDLOOP</span><span class="p">.</span>

    <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">next_section</span><span class="p">(</span>
     <span class="s1">`Grouping by two columns`</span> <span class="p">).</span>
    <span class="k">LOOP AT </span><span class="nv">spfli_tab</span> <span class="k">INTO</span> <span class="nv">wa</span>
                      <span class="k">GROUP BY</span> <span class="p">(</span> <span class="nv">key1</span> <span class="o">=</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">carrid</span> <span class="nv">key2</span> <span class="o">=</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">airpfrom</span> <span class="p">).</span>
      <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="p">|{</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">carrid</span> <span class="p">}</span><span class="s1"> </span><span class="p">{</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">airpfrom</span> <span class="p">}|</span> <span class="p">).</span>
    <span class="k">ENDLOOP</span><span class="p">.</span>

    <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">next_section</span><span class="p">(</span>
     <span class="s1">`Members of two column groups`</span> <span class="p">).</span>
    <span class="k">LOOP AT </span><span class="nv">spfli_tab</span> <span class="k">INTO</span> <span class="nv">wa</span>
                      <span class="k">GROUP BY</span> <span class="p">(</span> <span class="nv">key1</span> <span class="o">=</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">carrid</span> <span class="nv">key2</span> <span class="o">=</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">airpfrom</span> <span class="p">).</span>
      <span class="k">CLEAR</span> <span class="nv">members</span><span class="p">.</span>
      <span class="k">LOOP AT </span><span class="nv">GROUP</span> <span class="nv">wa</span> <span class="k">INTO</span> <span class="nv">member</span><span class="p">.</span>
        <span class="nv">members</span> <span class="o">=</span> <span class="k">VALUE</span> <span class="err">#</span><span class="p">(</span> <span class="nv">BASE</span> <span class="nv">members</span> <span class="p">(</span> <span class="nv">member</span> <span class="p">)</span> <span class="p">).</span>
      <span class="k">ENDLOOP</span><span class="p">.</span>
      <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">members</span> <span class="p">).</span>
    <span class="k">ENDLOOP</span><span class="p">.</span>

    <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">end_section</span><span class="p">(</span> <span class="p">)</span><span class="o">-&gt;</span><span class="nf">next_section</span><span class="p">(</span> <span class="s1">`Group Key Binding`</span> <span class="p">).</span>

    <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">next_section</span><span class="p">(</span>
     <span class="s1">`Grouping by one column`</span> <span class="p">).</span>
    <span class="k">LOOP AT </span><span class="nv">spfli_tab</span> <span class="k">INTO</span> <span class="nv">wa</span>
                      <span class="k">GROUP BY</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">carrid</span>
                      <span class="k">INTO</span> <span class="k">DATA</span><span class="p">(</span><span class="nv">key</span><span class="p">).</span>
      <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="k">key</span> <span class="p">).</span>
    <span class="k">ENDLOOP</span><span class="p">.</span>

    <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">next_section</span><span class="p">(</span>
     <span class="s1">`Members of one column groups`</span> <span class="p">).</span>
    <span class="k">LOOP AT </span><span class="nv">spfli_tab</span> <span class="k">INTO</span> <span class="nv">wa</span>
                      <span class="k">GROUP BY</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">carrid</span>
                      <span class="k">INTO</span> <span class="k">key</span><span class="p">.</span>
      <span class="k">CLEAR</span> <span class="nv">members</span><span class="p">.</span>
      <span class="k">LOOP AT </span><span class="nv">GROUP</span> <span class="k">key</span> <span class="k">INTO</span> <span class="nv">member</span><span class="p">.</span>
        <span class="nv">members</span> <span class="o">=</span> <span class="k">VALUE</span> <span class="err">#</span><span class="p">(</span> <span class="nv">BASE</span> <span class="nv">members</span> <span class="p">(</span> <span class="nv">member</span> <span class="p">)</span> <span class="p">).</span>
      <span class="k">ENDLOOP</span><span class="p">.</span>
      <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">members</span> <span class="p">).</span>
    <span class="k">ENDLOOP</span><span class="p">.</span>

    <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">next_section</span><span class="p">(</span>
     <span class="s1">`Grouping by two columns`</span> <span class="p">).</span>
    <span class="k">LOOP AT </span><span class="nv">spfli_tab</span> <span class="k">INTO</span> <span class="nv">wa</span>
                      <span class="k">GROUP BY</span> <span class="p">(</span> <span class="nv">key1</span> <span class="o">=</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">carrid</span> <span class="nv">key2</span> <span class="o">=</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">airpfrom</span> <span class="p">)</span>
                      <span class="k">INTO</span> <span class="k">DATA</span><span class="p">(</span><span class="nv">keys</span><span class="p">).</span>
      <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">keys</span> <span class="p">).</span>
    <span class="k">ENDLOOP</span><span class="p">.</span>

    <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">next_section</span><span class="p">(</span>
     <span class="s1">`Members of two column groups`</span> <span class="p">).</span>
    <span class="k">LOOP AT </span><span class="nv">spfli_tab</span> <span class="k">INTO</span> <span class="nv">wa</span>
                      <span class="k">GROUP BY</span> <span class="p">(</span> <span class="nv">key1</span> <span class="o">=</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">carrid</span> <span class="nv">key2</span> <span class="o">=</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">airpfrom</span> <span class="p">)</span>
                      <span class="k">INTO</span> <span class="nv">keys</span><span class="p">.</span>
      <span class="k">CLEAR</span> <span class="nv">members</span><span class="p">.</span>
      <span class="k">LOOP AT </span><span class="nv">GROUP</span> <span class="nv">keys</span> <span class="k">INTO</span> <span class="nv">member</span><span class="p">.</span>
        <span class="nv">members</span> <span class="o">=</span> <span class="k">VALUE</span> <span class="err">#</span><span class="p">(</span> <span class="nv">BASE</span> <span class="nv">members</span> <span class="p">(</span> <span class="nv">member</span> <span class="p">)</span> <span class="p">).</span>
      <span class="k">ENDLOOP</span><span class="p">.</span>
      <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">members</span> <span class="p">).</span>
    <span class="k">ENDLOOP</span><span class="p">.</span>


    <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">next_section</span><span class="p">(</span>
     <span class="s1">`Two column groups without members`</span> <span class="p">).</span>
    <span class="k">LOOP AT </span><span class="nv">spfli_tab</span> <span class="k">INTO</span> <span class="nv">wa</span>
                      <span class="k">GROUP BY</span> <span class="p">(</span> <span class="nv">key1</span> <span class="o">=</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">carrid</span> <span class="nv">key2</span> <span class="o">=</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">airpfrom</span>
                                <span class="k">index</span> <span class="o">=</span> <span class="nv">GROUP</span> <span class="k">INDEX</span> <span class="k">size</span> <span class="o">=</span> <span class="nv">GROUP</span> <span class="k">SIZE</span> <span class="p">)</span>
                      <span class="nv">WITHOUT</span> <span class="nv">MEMBERS</span>
                      <span class="k">INTO</span> <span class="k">DATA</span><span class="p">(</span><span class="nv">keysplus</span><span class="p">).</span>
      <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">keysplus</span> <span class="p">).</span>
    <span class="k">ENDLOOP</span><span class="p">.</span>

    <span class="nv">out</span><span class="o">-&gt;</span><span class="nf">display</span><span class="p">(</span> <span class="p">).</span>
</code></pre></div>
<a name="@@ITOC@@ABENLOOP_GROUP_BY_ABEXA_2"></a></p>
<h2 id="description">Description</h2>
<p>An internal table <code style="display: inline;"><span class="qtext">spfli_tab</span></code> is filled with data from the database table SPFLI.
The program shows step by step how it can be grouped using <a href="../abaploop_at_itab_group_by" class="blue"><code style="display: inline;"><span class="qtext">LOOP AT GROUP BY</span></code></a>:</p>
<ul>

<li><span class="bold">Grouping by One Column</span></li>

</ul>

<dd>
The simplest form of grouping is by one column, without explicitly specifying the output behavior of the group loop:
</dd>

<dd>
<span class="qtext">LOOP AT spfli_tab INTO wa <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;GROUP BY wa-carrid. <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ... wa-carrid ... <br>ENDLOOP.</span>
</dd>

<dd>
Within the loop, there is access to the work area <code style="display: inline;"><span class="qtext">wa</span></code>, in particular to the
component <code style="display: inline;"><span class="qtext">wa-carrid</span></code> that is used for grouping. The work area <code style="display: inline;"><span class="qtext">wa</span></code>
contains the first row of each group and represents the group in the loop. This is called a representative binding.
</dd>

<dd>
To access the members of a group, a member group can be inserted into the group loop:
</dd>

<dd>
<span class="qtext">LOOP AT spfli_tab INTO wa <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;GROUP BY wa-carrid. <br>
&#xA0;&#xA0;... <br>&#xA0;&#xA0;LOOP AT GROUP wa INTO DATA(member). <br>&#xA0;&#xA0;&#xA0;&#xA0;... member-... ... <br>&#xA0;&#xA0;ENDLOOP. <br>&#xA0;&#xA0;... <br>ENDLOOP.</span>
</dd>

<dd>
The member loop is executed using the group represented by <code style="display: inline;"><span class="qtext">wa</span></code> and its members are assigned to <code style="display: inline;"><span class="qtext">member</span></code>, and are available in the member loop.
</dd>

<ul>

<li><span class="bold">Grouping by More Than One Column</span></li>

</ul>

<dd>
To group by more than just one criterion, a structured group key is defined, as follows, where the grouping criteria in the simplest case are columns of the internal table:
</dd>

<dd>
<span class="qtext">LOOP AT spfli_tab INTO wa <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;GROUP BY ( key1 = wa-carrid key2 = wa-airpfrom ). <br>&#xA0;&#xA0;... wa-carrid ... wa-airpfrom ... <br>ENDLOOP.</span>
</dd>

<dd>
This is also a representative binding, in which the work area <code style="display: inline;"><span class="qtext">wa</span></code> is reused in the group loop to access the group key.
</dd>

<dd>
To access the members of the groups, the exact same member loop can be inserted as when grouping by one column.
</dd>

<ul>

<li><span class="bold">Group Key Binding when Grouping by One Column</span></li>

</ul>

<dd>
By explicitly specifying an <a href="../abaploop_at_itab_group_by_binding" class="blue">output area</a>
for the group key, a group key binding can be defined explicitly instead of the representative binding, in which the output area of the group loop is reused:
</dd>

<dd>
<span class="qtext">LOOP AT spfli_tab INTO wa <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;GROUP BY wa-carrid <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;INTO DATA(key). <br>&#xA0;&#xA0;... key ... <br>ENDLOOP.</span>
</dd>

<dd>
The difference from the example with the representative binding is the <code style="display: inline;"><span class="qtext">INTO</span></code>
addition after <code style="display: inline;"><span class="qtext">GROUP BY</span></code>. Instead of reusing <code style="display: inline;"><span class="qtext">wa</span></code>,
an elementary data object <code style="display: inline;"><span class="qtext">key</span></code> is used here to represent the group. This can
be generated inline. The additions <a href="../abaploop_at_itab_group_by_key" class="blue"><span class="qtext">GROUP
SIZE</span></a>, <a href="../abaploop_at_itab_group_by_key" class="blue"><span class="qtext">GROUP
INDEX</span></a>, and <a href="../abaploop_at_itab_group_by" class="blue"><span class="qtext">WITHOUT
MEMBERS</span></a> can only be used in the group key binding, which gives it more functions than the
representative binding. If these functions are not required, the representative binding can be used. The group key binding can also be used to make the use of the group key in the loop more explicit.
</dd>

<dd>
Inserting a member loop works in the same way as in the representative binding, the difference being that a group by now addressed by <code style="display: inline;"><span class="qtext">key</span></code> instead of <code style="display: inline;"><span class="qtext">wa</span></code>.
</dd>

<dd>
<span class="qtext">LOOP AT spfli_tab INTO wa <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;GROUP BY wa-carrid <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;INTO key. <br>
&#xA0;&#xA0;... <br>&#xA0;&#xA0;LOOP AT GROUP key INTO member. <br>&#xA0;&#xA0;&#xA0;&#xA0;... members ... <br>&#xA0;&#xA0;ENDLOOP. <br>&#xA0;&#xA0;... <br>ENDLOOP.</span>
</dd>

<ul>

<li><span class="bold">Group Key Binding when Grouping by More Than One Column</span></li>

</ul>

<dd>
Finally, the group key binding for structured group keys:
</dd>

<dd>
<span class="qtext">LOOP AT spfli_tab INTO wa <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;GROUP BY ( key1 = wa-carrid key2 = wa-airpfrom ) <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;INTO DATA(key). <br>&#xA0;&#xA0;... key-key1 ... key-key2 ... <br>ENDLOOP.</span>
</dd>

<dd>
Here, <code style="display: inline;"><span class="qtext">key</span></code> is a structure with the components <code style="display: inline;"><span class="qtext">key1</span></code>
and <code style="display: inline;"><span class="qtext">key2</span></code>. A member loop can be inserted in exactly the same way as when grouping by one column.
</dd>

<dd>
If you are not interested in the group members, you can use the addition <a href="../abaploop_at_itab_group_by" class="blue"><code style="display: inline;"><span class="qtext">NO MEMBERS</span></code></a> to save time and memory.
</dd>

<dd>
<span class="qtext">LOOP AT spfli_tab INTO wa <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;GROUP BY ( key1 = wa-carrid key2 = wa-airpfrom <br>&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; index = GROUP INDEX size = GROUP SIZE ) <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;WITHOUT MEMBERS <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;INTO DATA(key). <br>&#xA0;&#xA0;... key-key1 ... key-key2 ... key-index ... key-size ... <br>ENDLOOP.</span>
</dd>

<dd>
It is not possible to use a member loop here. Instead, the group key was enriched with optional components
for further information using <a href="../abaploop_at_itab_group_by_key" class="blue"><span class="qtext">GROUP
INDEX</span></a> <a href="../abaploop_at_itab_group_by_key" class="blue"><code style="display: inline;"><span class="qtext">GROUP SIZE</span></code></a>.
</dd>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../abenloop_glosry/" title="loop" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                loop
              </div>
            </div>
          </a>
        
        
          <a href="../abenloop_group_by_abexas/" title="Examples of Grouping with LOOP" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Examples of Grouping with LOOP
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>