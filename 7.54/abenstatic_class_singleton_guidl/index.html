


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abenstatic class singleton guidl - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#static-classes-and-singletons" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abenstatic class singleton guidl
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    Background
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rule" class="md-nav__link">
    Rule
  </a>
  
    <nav class="md-nav" aria-label="Rule">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#do-not-use-static-classes" class="md-nav__link">
    Do not use static classes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#details" class="md-nav__link">
    Details
  </a>
  
    <nav class="md-nav" aria-label="Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exception" class="md-nav__link">
    Exception
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bad-example" class="md-nav__link">
    Bad Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#good-example" class="md-nav__link">
    Good Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abenstatic_class_singleton_guidl.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_pgl" class="blue">ABAP Programming Guidelines</a>&#xA0;&#x2192;&#xA0;
<a href="../abenarchitecture_guidl" class="blue">Architecture</a>&#xA0;&#x2192;&#xA0;
<a href="../abenobj_oriented_guidl" class="blue">Object-Oriented Programming</a>&#xA0;</small></p>
<h1 id="static-classes-and-singletons">Static Classes and Singletons</h1>
<p><a name="@@ITOC@@ABENSTATIC_CLASS_SINGLETON_GUIDL_1"></a>
Other versions: 
 <a href="../../7.31/abenstatic_class_singleton_guidl">7.31</a> | <a href="../../7.40/abenstatic_class_singleton_guidl">7.40</a> | <b>7.54</b></p>
<h2 id="background">Background</h2>
<p>The classes of ABAP Objects support two types of components:</p>
<ul>

<li>Instance components (instance attributes, instance events and instance methods). You can only address the instance components of a class using instances of the class (objects).</li>

</ul>

<ul>

<li>Static components (static attributes, static events and static methods). The static components of
a class can be addressed using an object and also using the name of the class. This means they can be used independently of a class instance.</li>

</ul>

<p>A class that only contains static components and no instance components is referred to as a static class. A global static class is loaded once with its class pool into the current
<a href="../abeninternal_session_glosry" class="grey" title="Glossary Entry">internal session</a>.
Like every ABAP program, it cannot be explicitly deleted from the session. The static methods (declared using <code style="display: inline;"><span class="qtext">CLASS-METHODS</span></code>) of a class cannot be redefined in subclasses.</p>
<p>A singleton is a design pattern where the class has the task of creating objects. The class ensures that only one object exists for every internal session that is made available to consumers.</p>
<p><a name="@@ITOC@@ABENSTATIC_CLASS_SINGLETON_GUIDL_2"></a></p>
<h2 id="rule">Rule</h2>
<h3 id="do-not-use-static-classes">Do not use static classes</h3>
<p>Use objects instead of static classes. If you do not want multiple instantiation, you can use singletons.</p>
<p><a name="@@ITOC@@ABENSTATIC_CLASS_SINGLETON_GUIDL_3"></a></p>
<h2 id="details">Details</h2>
<p>If no real object-oriented design exists that would use the multiple instantiation of classes, for example, this often produces classes that only contain static methods (declared using <code style="display: inline;"><span class="qtext">CLASS-METHODS</span></code>), when
<a href="../abenabap_obj_progr_model_guidl" class="lnkpurple" title="Guideline">ABAP Objects</a> are
used. These methods are then used as simple procedures. However, even if multiple instantiation is not
explicitly required, object creation is preferable to the use of static classes, for the reasons listed below. You can use the singleton design pattern to prevent multiple instantiation:</p>
<ul>

<li>Explicit object creation is essential for object-oriented programming. Static classes, however,
are implicitly loaded the first time they are used, and the corresponding static constructor &#x2014;
if available &#x2014; is executed. They are persisted in the memory for as long as the current internal
session exists. Therefore, if you use static classes, you cannot actually control the time of initialization.
You have no way of releasing the memory occupied by the attributes, as soon as the class function is no longer required.</li>

</ul>

<ul>

<li>Another important argument against the use of static classes are the limited functions of the static constructor, in comparison to an instance constructor. A static constructor has no parameter interface and cannot propagate any
<a href="../abenerror_handling_guidl" class="lnkpurple" title="Guideline">exceptions</a>. This is why
you cannot always respond appropriately to an error situation in the static constructor, which can cause a runtime error in extreme cases. However, the exceptions of an instance constructor can be handled.</li>

</ul>

<ul>

<li>By using static classes, you restrict your polymorphism options, which are actually provided by
object-oriented programming. On the one hand, you cannot redefine static methods. On the other hand,
access is not possible using reference variables (the other &#x201C;pillar&#x201D; of polymorphism). However, it is worth keeping the option of polymorphism open:</li>

</ul>

<ul class="circlem2">

<li>Even if you initially do not plan to overwrite the behavior of a method later on using inheritance or redefinition, this is a request that frequently arises in the course of the further development.</li>

</ul>

<ul class="circlem2">

<li>When implementing unit tests with ABAP Unit, redefining the behavior of certain methods, to resolve problematic dependencies, is often unavoidable.</li>

</ul>

<p>To keep the option of redefinition open, you should always use instance methods instead of static methods.</p>
<p>You can express the retrieval of a singleton object and the subsequent call of an instance method, by using the very compact form of a chained method call:</p>
<dd>
<code style="display: inline;"><span class="qtext">cl_singleton=&gt;get_instance( )-&gt;do_something( ).</span></code>
</dd>

<p>Since an additional object reference variable and an additional factory call are omitted, there are no aesthetic disadvantages related to the use of a singleton design pattern.</p>
<h3 id="exception">Exception</h3>
<p>Classes that only cover trivial functions can still be implemented as static classes. Here you must
accurately assess whether one of the previously mentioned aspects has any effect. The need for a class
constructor can be an indicator here. Once a static class requires a nontrivial class constructor to provide the required functions, you should use objects instead.</p>
<h3 id="bad-example">Bad Example</h3>
<p>The following source code shows a static class with purely static methods and how one of these methods
is used. In general, it is not immediately obvious from the source code whether the method call also
calls the static constructor or whether this has already happened earlier (following a simple attribute access, for example).</p>
<dd>
<span class="qtext">CLASS static_class DEFINITION. <br>&#xA0;&#xA0;PUBLIC SECTION. <br>&#xA0;&#xA0;&#xA0;&#xA0;CLASS-METHODS: class_constructor, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; meth1, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; meth2, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ... <br>ENDCLASS. <br>... <br>static_class=&gt;meth1( ). <br>...</span>
</dd>

<h3 id="good-example">Good Example</h3>
<p>The following source code shows an implementation of the singleton design pattern. A static method allows access to the only object of the class.</p>
<dd>
<span class="qtext">CLASS singleton_class DEFINITION CREATE PRIVATE. <br>&#xA0;&#xA0;PUBLIC SECTION. <br>
&#xA0;&#xA0;&#xA0;&#xA0;CLASS-METHODS get_instance <br>&#xA0;&#xA0;&#xA0;&#xA0;RETURNING VALUE(r_instance) TYPE REF TO singleton_class <br>
&#xA0;&#xA0;&#xA0;&#xA0;RAISING cx_some_failure. <br>&#xA0;&#xA0;METHODS constructor <br>&#xA0;&#xA0;&#xA0;&#xA0;RAISING cx_some_failure. <br>
&#xA0;&#xA0;METHODS: meth1, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; meth2. <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ... <br>&#xA0;&#xA0;PRIVATE SECTION. <br>&#xA0;&#xA0;&#xA0;&#xA0;CLASS-DATA instance TYPE REF TO singleton_class. <br>ENDCLASS.</span>
</dd>

<dd>
<span class="qtext">CLASS singleton_class IMPLEMENTATION. <br>&#xA0;&#xA0;METHOD get_instance. <br>&#xA0;&#xA0;&#xA0;&#xA0;IF instance IS NOT BOUND. <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;CREATE OBJECT instance. <br>&#xA0;&#xA0;&#xA0;&#xA0;ENDIF. <br>&#xA0;&#xA0;&#xA0;&#xA0;r_instance = instance. <br>&#xA0;&#xA0;ENDMETHOD. <br>&#xA0;&#xA0;... <br>ENDCLASS.</span>
</dd>

<dd>
<span class="qtext">... <br>&#xA0;&#xA0;TRY. <br>&#xA0;&#xA0;&#xA0;&#xA0; singleton_class=&gt;get_instance( )-&gt;meth1( ). <br>
&#xA0;&#xA0; CATCH cx_some_failure. <br>&#xA0;&#xA0;&#xA0;&#xA0; ... <br>&#xA0;&#xA0;ENDTRY.</span>
</dd>

<p>In the above example, the <code style="display: inline;"><span class="qtext">get_instance</span></code> method is used to return the object reference to the object created with the first call. Therefore, this example would appear to violate the rule
<a href="../abenmodularization_guidl" class="lnkpurple" title="Guideline">modularize rather than atomize</a>.
This rule states that no method should be created in ABAP that only returns the value of an attribute.
However, this objection is not justified here, because the main task of the <code style="display: inline;"><span class="qtext">get_instance</span></code>
method is to enable the object consumer to control the time of object creation. This is necessary to enable the consumer to respond (in the usual way) to any exceptional situation during the object creation process.</p>
<p>In special cases, where object creation is performed without parameters and is always successful, you
can omit the <code style="display: inline;"><span class="qtext">get_instance</span></code> method and publish the object reference using a
<code style="display: inline;"><span class="qtext">READ-ONLY</span></code> attribute. In this case, the object is created within the static
constructor. Therefore, this approach is still afflicted with some of the problems of static classes described in other sections.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>