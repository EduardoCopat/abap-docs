


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abennews 753 amdp - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#amdp-in-release-753" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abennews 753 amdp
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#modification-1" class="md-nav__link">
    Modification 1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amdp-scalar-functions" class="md-nav__link">
    AMDP Scalar Functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modification-2" class="md-nav__link">
    Modification 2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enhancement-to-logical-database-schemas" class="md-nav__link">
    Enhancement to Logical Database Schemas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modification-3" class="md-nav__link">
    Modification 3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-to-the-current-abap-database-schema" class="md-nav__link">
    Access to the Current ABAP Database Schema
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modification-4" class="md-nav__link">
    Modification 4
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restrictions-removed" class="md-nav__link">
    Restrictions Removed
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modification-5" class="md-nav__link">
    Modification 5
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#option-cds-session-client-mandatory" class="md-nav__link">
    Option CDS SESSION CLIENT Mandatory
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abennews-753-amdp.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abennews" class="blue">ABAP - Release-Specific Changes</a>&#xA0;&#x2192;&#xA0;
<a href="../abennews-75" class="blue">Changes in Releases 7.5x</a>&#xA0;&#x2192;&#xA0;
<a href="../abennews-753" class="blue">Changes in Release 7.53</a>&#xA0;</small></p>
<h1 id="amdp-in-release-753">AMDP in Release 7.53</h1>
<p><br><a href="#!ABAP_MODIFICATION_1@1@" class="blue"> 1. AMDP scalar functions </a></p>
<p><br><a href="#!ABAP_MODIFICATION_2@2@" class="blue"> 2. Enhancement to logical database schemas </a></p>
<p><br><a href="#!ABAP_MODIFICATION_3@3@" class="blue"> 3. Access to the current ABAP database schema </a></p>
<p><br><a href="#!ABAP_MODIFICATION_4@4@" class="blue"> 4. Restrictions removed </a></p>
<p><br><a href="#!ABAP_MODIFICATION_5@5@" class="blue"> 5. Option <code style="display: inline;"><span class="qtext">CDS SESSION CLIENT</span></code> mandatory </a>  </p>
<p>Other versions: 
 <s><i>7.31</i></s> | <s><i>7.40</i></s> | <b>7.54</b></p>
<h3 id="modification-1">Modification 1</h3>
<h3 id="amdp-scalar-functions">AMDP Scalar Functions</h3>
<p><a href="../abenamdp_scalar_function_glosry" class="grey" title="Glossary Entry">AMDP</a> scalar functions are now supported alongside
<a href="../abenamdp_table_function_glosry" class="grey" title="Glossary Entry">AMDP table functions</a>. The
<a href="../abenamdp_function_methods" class="blue">AMDP function implementation</a> of an AMDP scalar function has an elementary return value and can be used in ABAP like a regular function method.</p>
<p>In the implementation of <a href="../abenamdp_scalar_function_glosry" class="grey" title="Glossary Entry">
AMDP scalar functions</a>, it is possible to specify the database-specific option <a href="../abapmethod_by_db_proc" class="blue">
<code style="display: inline;"><span class="qtext">DETERMINISTIC</span></code></a> after <code style="display: inline;"><span class="qtext">OPTIONS</span></code>. This buffers the result of the function for the duration of a query.  </p>
<h3 id="modification-2">Modification 2</h3>
<h3 id="enhancement-to-logical-database-schemas">Enhancement to Logical Database Schemas</h3>
<p>In <a href="../abenlogical_database_schema_glosry" class="grey" title="Glossary Entry">logical database schemas</a>, a new flag can be specified that allows the current
<a href="../abenabap_db_schema_glosry" class="grey" title="Glossary Entry">ABAP database schema</a>
to be mapped in the transaction <span class="lnkgrey">DB_SCHEMA_MAP</span>. The predefined name <span class="qtext400">:abap_db_schema</span> should be used for mappings of this type.  </p>
<h3 id="modification-3">Modification 3</h3>
<h3 id="access-to-the-current-abap-database-schema">Access to the Current ABAP Database Schema</h3>
<p>In an <a href="../abenamdp_method_glosry" class="grey" title="Glossary Entry">AMDP method</a>, a
<a href="../abenlogical_database_schema_glosry" class="grey" title="Glossary Entry">logical database schema</a> to which the current
<a href="../abenabap_db_schema_glosry" class="grey" title="Glossary Entry">ABAP database schema</a>
is mapped (using the predefined name <span class="qtext400">:abap_db_schema</span>) can be specified
in the macro <a href="../abenamdp_logical_db_schemas" class="blue"><span class="qtext400">$ABAP.schema</span></a>.
For each logical database schema used in a macro like this, the new addition <a href="../abapmethod_by_db_proc" class="blue">
<code style="display: inline;"><span class="qtext">USING SCHEMA</span></code></a> must be specified in the statement <code style="display: inline;"><span class="qtext">METHOD</span></code>
to declare the used objects. In this way, an AMDP method can access database objects located in different
database schemas in different systems (including the ABAP database schema) without needing to modify the syntax.  </p>
<h3 id="modification-4">Modification 4</h3>
<h3 id="restrictions-removed">Restrictions Removed</h3>
<p>The following restrictions were removed:</p>
<ul>

<li>
Tabular input parameters are now allowed in <a href="../abenamdp_function_method_glosry" class="grey" title="Glossary Entry">AMDP function implementations</a> for
<a href="../abencds_table_function_glosry" class="grey" title="Glossary Entry">CDS table functions</a>. Previously, only elementary input parameters were allowed. In AMDP function implementations for
<a href="../abencds_table_function_glosry" class="grey" title="Glossary Entry">CDS table functions</a>, however, the restriction that only elementary input parameters are allowed still applies.
</li>
<li>
Tabular input parameters of <a href="../abenamdp_procedure_method_glosry" class="grey" title="Glossary Entry">AMDP procedure implementations</a> and of
<a href="../abenamdp_function_method_glosry" class="grey" title="Glossary Entry">AMDP function implementations</a>
can now be made optional using <a href="../abapmethods_parameters" class="blue"><code style="display: inline;"><span class="qtext">OPTIONAL</span></code></a>,
but it is still not possible to specify a start value with <a href="../abapmethods_parameters" class="blue"><code style="display: inline;"><span class="qtext">DEFAULT</span></code></a>.
</li>
<li>
When a replacement parameter declared using <a href="../abapmethods_general" class="blue"><code style="display: inline;"><span class="qtext">DEFAULT</span></code></a> is specified for an elementary input parameter of an
<a href="../abenamdp_methods" class="blue">AMDP method</a>, the following (previously undocumented) restrictions were lifted:
<br></li>

</ul>

<ul class="circlem2">

<li>Constants declared using the addition <a href="../abapdata_options" class="blue"><span class="qtext">VALUE
IS INITIAL</span></a> can now be specified for the data types <code style="display: inline;"><span class="qtext">d</span></code>, <code style="display: inline;"><span class="qtext">t</span></code>, and <code style="display: inline;"><span class="qtext">x</span></code>. This previously produced a syntax error.</li>

</ul>

<ul class="circlem2">

<li>Constants declared using the addition <a href="../abapdata_options" class="blue"><span class="qtext">VALUE
&apos;00010101&apos;</span></a> can now be specified for the data type <code style="display: inline;"><span class="qtext">d</span></code>, or the literal <code style="display: inline;"><span class="qtext">&apos;00010101&apos;</span></code> can be specified directly. Both previously produced a syntax error.</li>

</ul>

<ul class="circlem2">

<li>Constants declared by specifying numeric literals after <a href="../abapdata_options" class="blue"><span class="qtext">
VALUE</span></a> and whose lengths are not precisely 8 or 6 can now be specified for the data types
<code style="display: inline;"><span class="qtext">d</span></code> and <code style="display: inline;"><span class="qtext">t</span></code>. This previously produced a syntax error.
Until now, values of literals with lengths of precisely 8 or 6 were handled like a string. This incorrect
behavior was also modified and the numeric value is handled as the number of days since 01.01.001 or as the number of seconds since 00:00:00. This modification is incompatible if an
<a href="../abenamdp_procedure_glosry" class="grey" title="Glossary Entry">AMDP procedure</a> or
<a href="../abenamdp_function_glosry" class="grey" title="Glossary Entry">function</a> with an input parameter of this type is called from other
<a href="../abendatabase_procedure_glosry" class="grey" title="Glossary Entry">database procedures</a> or
<a href="../abendatabase_function_glosry" class="grey" title="Glossary Entry">functions</a> without an actual parameter being assigned to the parameter in question.</li>

</ul>

<dd>
In AMDP methods, the addition <code style="display: inline;"><span class="qtext">DEFAULT</span></code> now behaves in the same way as in regular
methods. It still cannot be specified for the data types <code style="display: inline;"><span class="qtext">string</span></code>, <code style="display: inline;"><span class="qtext">xstring</span></code>,
<code style="display: inline;"><span class="qtext">decfloat16</span></code>, and <code style="display: inline;"><span class="qtext">decfloat34</span></code>, however, and no literals can be specified that cannot be converted into the data type of the input parameter.

</dd>

<h3 id="modification-5">Modification 5</h3>
<h3 id="option-cds-session-client-mandatory">Option CDS SESSION CLIENT Mandatory</h3>
<p>The option <a href="../abapmethods_amdp_options" class="blue"><code style="display: inline;"><span class="qtext">CDS SESSION CLIENT</span></code></a> is now mandatory when an AMDP method accesses the
<a href="../abencds_database_view_glosry" class="grey" title="Glossary Entry">CDS database view</a> of a
<a href="../abencds_view_glosry" class="grey" title="Glossary Entry">CDS view</a> whose
<a href="../abencds_client_handling" class="blue">client handling</a> is determined by the annotation
<a href="../abencds_client_handling" class="blue"><span class="qtext400">@ClientHandling.algorithm: #SESSION_VARIABLE</span></a>. If this option is not specified in this case, a syntax error occurs. The option sets the
<a href="../abensession_variable_glosry" class="grey" title="Glossary Entry">session variable</a> of
the database that can be addressed under the name <a href="../abencds_f1_session_variable" class="blue"><span class="qtext400">$session.client</span></a> in the
<a href="../abencds_ddl_glosry" class="grey" title="Glossary Entry">CDS DDL</a> of the
<a href="../abenabap_cds_glosry" class="grey" title="Glossary Entry">ABAP CDS</a> to a particular value
when the method is called from ABAP. An exception of the class CX_AMDP_CDS_CLIENT_MISMATCH can now no longer be raised.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>