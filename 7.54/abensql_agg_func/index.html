


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abensql agg func - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sql_exp-agg_func" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abensql agg func
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variants" class="md-nav__link">
    Variants
  </a>
  
    <nav class="md-nav" aria-label="Variants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variant-1" class="md-nav__link">
    Variant 1
  </a>
  
    <nav class="md-nav" aria-label="Variant 1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect_1" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variant-2" class="md-nav__link">
    Variant 2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variant-3" class="md-nav__link">
    Variant 3
  </a>
  
    <nav class="md-nav" aria-label="Variant 3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect_2" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variant-4" class="md-nav__link">
    Variant 4
  </a>
  
    <nav class="md-nav" aria-label="Variant 4">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect_3" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variant-5" class="md-nav__link">
    Variant 5
  </a>
  
    <nav class="md-nav" aria-label="Variant 5">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect_4" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executable-example" class="md-nav__link">
    Executable Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variant-6" class="md-nav__link">
    Variant 6
  </a>
  
    <nav class="md-nav" aria-label="Variant 6">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect_5" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executable-example_1" class="md-nav__link">
    Executable Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variant-7" class="md-nav__link">
    Variant 7
  </a>
  
    <nav class="md-nav" aria-label="Variant 7">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect_6" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variant-8" class="md-nav__link">
    Variant 8
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variant-9" class="md-nav__link">
    Variant 9
  </a>
  
    <nav class="md-nav" aria-label="Variant 9">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect_7" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variant-10" class="md-nav__link">
    Variant 10
  </a>
  
    <nav class="md-nav" aria-label="Variant 10">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect_8" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executable-example_2" class="md-nav__link">
    Executable Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#continue" class="md-nav__link">
    Continue
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abensql_agg_func.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP &#x2212; Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_language_external_data" class="blue">Processing External Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_sql" class="blue">ABAP Database Access</a>&#xA0;&#x2192;&#xA0;
<a href="../abenopensql" class="blue">ABAP SQL</a>&#xA0;&#x2192;&#xA0;
<a href="../abenopen_sql_operands" class="blue">ABAP SQL - Operands and Expressions</a>&#xA0;&#x2192;&#xA0;
<a href="../abapsql_expr" class="blue">ABAP SQL - SQL Expressions sql_exp</a>&#xA0;&#x2192;&#xA0;
<a href="../abapselect_aggregate" class="blue">sql_exp - sql_agg</a>&#xA0;</small></p>
<h1 id="sql_exp-agg_func">sql_exp - agg_func</h1>
<p>Other versions: 
 <s><i>7.31</i></s> | <s><i>7.40</i></s> | <b>7.54</b></p>
<h2 id="syntax">Syntax</h2>
<p><pre><code class="hljs abap abap-docs-syntax-block">
<span class="qtext">... AVG( <i class="bn">[</i>DISTINCT<i class="bn">]</i>
<a href="../abenopen_sql_columns" class="blue">col</a> <i class="bn">[</i><a href="../abapselect_avg_as" class="blue">AS dtype</a><i class="bn">]</i> ) <br>
&#xA0;&#xA0;<i class="bn">|</i> MAX( <i class="bn">[</i>DISTINCT<i class="bn">]</i> <a href="../abapsql_expr" class="blue">sql_exp</a> ) <br>
&#xA0;&#xA0;<i class="bn">|</i> MIN( <i class="bn">[</i>DISTINCT<i class="bn">]</i> <a href="../abapsql_expr" class="blue">sql_exp</a> ) <br>
&#xA0;&#xA0;<i class="bn">|</i> SUM( <i class="bn">[</i>DISTINCT<i class="bn">]</i> <a href="../abapsql_expr" class="blue">sql_exp</a> ) <br>
&#xA0;&#xA0;<i class="bn">|</i> PRODUCT( col ) <br>&#xA0;&#xA0;<i class="bn">|</i> STRING_AGG(
<a href="../abapsql_expr" class="blue">sql_exp</a><i class="bn">[</i>, sep<i class="bn">]</i> <i class="bn">[</i>ORDER BY
<a href="../abenopen_sql_columns" class="blue">col1</a> <i class="bn">[</i>ASCENDING<i class="bn">|</i>DESCENDING<i class="bn">]</i>, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;<a href="../abenopen_sql_columns" class="blue">col2</a> <i class="bn">[</i>ASCENDING<i class="bn">|</i>DESCENDING<i class="bn">]</i>, ...<i class="bn">]</i> ) <br>
&#xA0;&#xA0;<i class="bn">|</i> COUNT( <i class="bn">[</i>DISTINCT<i class="bn">]</i> <a href="../abapsql_expr" class="blue">sql_exp</a> ) <br>
&#xA0;&#xA0;<i class="bn">|</i> COUNT( * ) <br>&#xA0;&#xA0;<i class="bn">|</i> COUNT(*) <br>&#xA0;&#xA0;<i class="bn">|</i>
<a href="../abengrouping_function" class="blue">GROUPING</a>( <a href="../abenopen_sql_columns" class="blue">col</a> ) ...</span> 
</code></pre></p>
<h2 id="variants">Variants</h2>
<p><a href="#!ABAP_VARIANT_1@1@" class="blue"> 1. <code style="display: inline;"><span class="qtext">... AVG( <i class="bn">[</i>DISTINCT<i class="bn">]</i> col <i class="bn">[</i>AS dtype<i class="bn">]</i> )</span></code> </a> <br>
<br><a href="#!ABAP_VARIANT_2@2@" class="blue"> 2. <code style="display: inline;"><span class="qtext">... MAX( <i class="bn">[</i>DISTINCT<i class="bn">]</i> sql_exp )</span></code> </a> <br>
<br><a href="#!ABAP_VARIANT_3@3@" class="blue"> 3. <code style="display: inline;"><span class="qtext">... MIN( <i class="bn">[</i>DISTINCT<i class="bn">]</i> sql_exp )</span></code> </a> <br>
<br><a href="#!ABAP_VARIANT_4@4@" class="blue"> 4. <code style="display: inline;"><span class="qtext">... SUM( <i class="bn">[</i>DISTINCT<i class="bn">]</i> sql_exp )</span></code> </a> <br>
<br><a href="#!ABAP_VARIANT_5@5@" class="blue"> 5. <code style="display: inline;"><span class="qtext">... PRODUCT( col )</span></code> </a> <br>
<br><a href="#!ABAP_VARIANT_6@6@" class="blue"> 6. <code style="display: inline;"><span class="qtext">... STRING_AGG( sql_exp<i class="bn">[</i>, sep<i class="bn">]</i> <i class="bn">[</i>ORDER BY ...<i class="bn">]</i> )</span></code> </a> <br>
<br><a href="#!ABAP_VARIANT_7@7@" class="blue"> 7. <code style="display: inline;"><span class="qtext">... COUNT( <i class="bn">[</i>DISTINCT<i class="bn">]</i> sql_exp )</span></code> </a> <br>
<br><a href="#!ABAP_VARIANT_8@8@" class="blue"> 8. <code style="display: inline;"><span class="qtext">... COUNT( * )</span></code> </a>  </p>
<p><a href="#!ABAP_VARIANT_9@9@" class="blue"> 9. <code style="display: inline;"><span class="qtext">... COUNT( * )</span></code> </a><br />
 <a href="#!ABAP_VARIANT_10@10@" class="blue"> 10. <code style="display: inline;"><span class="qtext">... GROUPING( col )</span></code> </a>  </p>
<h3 id="effect">Effect</h3>
<p><a href="../abenaggregate_function_glosry" class="grey" title="Glossary Entry">Aggregate function</a>
in ABAP SQL. An aggregate function aggregates the values of the rows in a specific set of rows to a single value. Aggregate functions can be used in the following places:</p>
<ul>

<li>
As a standalone <a href="../abenaggregate_expression_glosry" class="grey" title="Glossary Entry">aggregate
expression</a> <a href="../abapselect_aggregate" class="blue"><code style="display: inline;"><span class="qtext">agg_exp</span></code></a>
in specific operand positions of a query. The evaluated row set is the full results set of the query
or a group created using the addition <a href="../abapgroupby_clause" class="blue"><code style="display: inline;"><span class="qtext">GROUP BY</span></code></a>. The general rules apply.
</li>
<li>
As a <a href="../abenwindow_function_glosry" class="grey" title="Glossary Entry">window function</a> <a href="../abensql_win_func" class="blue"><code style="display: inline;"><span class="qtext">win_func</span></code></a> in a
<a href="../abapselect_over" class="blue">window expression</a>. The evaluated row set is the current
<a href="../abenwindow_glosry" class="grey" title="Glossary Entry">window</a> or a box inside the window. The general rules apply, plus the rules for window functions.
</li>
<li>
As an aggregate function in a <a href="../abenselect_hierarchy_agg_navis" class="blue">hierarchy aggregate navigator</a>. The evaluated row set consists of the
<a href="../abenhierarchy_node_glosry" class="grey" title="Glossary Entry">hierarchy nodes</a> determined by the navigator. The general rules apply, plus the rules for hierarchy aggregate navigators.
<br></li>

</ul>

<p>The following table shows which aggregate functions can be used in which places:</p>
<table>
<thead>
<tr>
<th>-</th>
<th>agg_exp</th>
<th>win_exp</th>
<th>HIERARCHY_DESCENDANTS_AGGREGATE</th>
<th>HIERARCHY_ANCESTORS_AGGREGATE</th>
</tr>
</thead>
<tbody>
<tr>
<td><code style="display: inline;"><span class="qtext">AVG</span></code></td>
<td>x</td>
<td>x</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><code style="display: inline;"><span class="qtext">MAX</span></code></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td><code style="display: inline;"><span class="qtext">MIN</span></code></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td><code style="display: inline;"><span class="qtext">SUM</span></code></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td><code style="display: inline;"><span class="qtext">PRODUCT</span></code></td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>x</td>
</tr>
<tr>
<td><code style="display: inline;"><span class="qtext">STRING_AGG</span></code></td>
<td>x</td>
<td>-</td>
<td>-</td>
<td>x</td>
</tr>
<tr>
<td><code style="display: inline;"><span class="qtext">COUNT</span></code></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td><code style="display: inline;"><span class="qtext">COUNT(*)</span></code></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td><code style="display: inline;"><span class="qtext">GROUPING</span></code></td>
<td>x</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<p>The following shared properties apply here:</p>
<ul>

<li>
The addition <code style="display: inline;"><span class="qtext">DISTINCT</span></code> excludes duplicate values from the calculation in any operand positions in which it is specified.
</li>
<li>
If the argument of an aggregate function (except <code style="display: inline;"><span class="qtext">COUNT</span></code>) has the
<a href="../abennull_value_glosry" class="grey" title="Glossary Entry">null value</a>, it is ignored
when the function is evaluated. The result is a null value only if all the rows in the column in question contain a null value.
</li>
<li>
The aggregate function <code style="display: inline;"><span class="qtext">COUNT</span></code> counts rows and never produces the <a href="../abennull_value_glosry" class="grey" title="Glossary Entry">null value</a>.
</li>
<li>
Arguments of type STRING, RAWSTRING, LCHR, LRAW, and GEOM_EWKB cannot be handled using aggregate functions.
<br></li>

</ul>

<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>The database platform determines whether an overflow occurs if the result of an aggregate function exceeds
its value range. On some database platforms, intermediate results outside the value range are allowed.
The overflow behavior of SQL expressions, on the other hand, is platform-independent. If an SQL expression
in an aggregate expression produces an overflow, an exception is raised on every platform, even if a corresponding result of the aggregate function would not raise an exception on every platform.  </p>
<p></div>
<a name="!ABAP_VARIANT_1@1@"></a></p>
<h2 id="variant-1">Variant 1</h2>
<p><code style="display: inline;"><span class="qtext">... AVG( <i class="bn">[</i>DISTINCT<i class="bn">]</i> col <i class="bn">[</i>AS dtype<i class="bn">]</i> )</span></code><br />
 <br><!-- /A --></p>
<h3 id="effect_1">Effect</h3>
<p>Determines the average value of the content of a column <a href="../abenopen_sql_columns" class="blue"><span class="qtext">
col</span></a> in a row set. The optional addition <a href="../abapselect_avg_as" class="blue"><code style="display: inline;"><span class="qtext">AS dtype</span></code></a> can be used to define the result type explicitly.</p>
<p>The data type of the column must be numeric. The data types DF16_RAW and DF34_RAW and the obsolete types
DF16_SCL and DF34_SCL are not allowed. The data type INT8 is only permitted in conjunction with the addition <a href="../abapselect_avg_as" class="blue"><code style="display: inline;"><span class="qtext">AS dtype</span></code></a>.</p>
<p>The implicit data type of the result for <a href="../abendecfloat_glosry" class="grey" title="Glossary Entry">
decimal floating point numbers</a> is the corresponding data type (DECFLOAT16 or DECFLOAT34 (or DF16_DEC
or DF34_DEC)) and is otherwise the type FLTP, a platform-dependent subtotal, or is determined by the addition <a href="../abapselect_avg_as" class="blue"><code style="display: inline;"><span class="qtext">AS dtype</span></code></a>.</p>
<p><a href="../abapsql_expr" class="blue">SQL expressions</a> cannot be specified as arguments for <code style="display: inline;"><span class="qtext">AVG</span></code>.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>The result of the aggregate functions <code style="display: inline;"><span class="qtext">AVG</span></code> in the data type FLTP is platform-dependent.
The type of platform also determines whether the result of an aggregate expression <code style="display: inline;"><span class="qtext">AVG</span></code>,
which is used in a <code style="display: inline;"><span class="qtext">HAVING</span></code> clause as a subtotal, is of type FLTP. The addition
<a href="../abapselect_avg_as" class="blue"><code style="display: inline;"><span class="qtext">AS dtype</span></code></a> can be used to force the type FLTP.</p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Determines the average value of all values in a column and checks the result.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">DATA</span><span class="p">(</span><span class="nv">n</span><span class="p">)</span> <span class="o">=</span> <span class="mi">9</span><span class="p">.</span> 

<span class="k">DELETE</span> <span class="k">FROM</span> <span class="nv">demo_expressions</span><span class="p">.</span> 
<span class="k">INSERT</span> <span class="nv">demo_expressions</span> <span class="k">FROM</span> <span class="k">TABLE</span> <span class="err">@</span><span class="p">(</span> <span class="k">VALUE</span> <span class="err">#</span><span class="p">(</span> 
  <span class="k">FOR</span> <span class="nv">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="nv">UNTIL</span> <span class="nv">i</span> <span class="o">&gt;</span> <span class="nv">n</span> 
  <span class="p">(</span> <span class="k">id</span> <span class="o">=</span> <span class="nv">CONV</span> <span class="err">#</span><span class="p">(</span> <span class="nv">i</span> <span class="p">)</span> <span class="nv">num1</span> <span class="o">=</span> <span class="nv">i</span> <span class="p">)</span> <span class="p">)</span> <span class="p">).</span> 

<span class="k">SELECT</span> <span class="nv">AVG</span><span class="p">(</span> <span class="nv">num1</span> <span class="p">)</span> 
       <span class="k">FROM</span> <span class="nv">demo_expressions</span> 
       <span class="k">INTO</span> <span class="p">(</span><span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">avg</span><span class="p">)).</span> 

<span class="k">ASSERT</span> <span class="nv">avg</span> <span class="o">=</span>  <span class="nv">n</span> <span class="p">/</span> <span class="mi">2</span> <span class="p">.</span> 
</code></pre></div>
</div>
<a name="!ABAP_VARIANT_2@2@"></a></p>
<h2 id="variant-2">Variant 2</h2>
<p><code style="display: inline;"><span class="qtext">... MAX( <i class="bn">[</i>DISTINCT<i class="bn">]</i> sql_exp )</span></code><br />
 <br><!-- /A --></p>
<p><a name="!ABAP_VARIANT_3@3@"></a></p>
<h2 id="variant-3">Variant 3</h2>
<p><code style="display: inline;"><span class="qtext">... MIN( <i class="bn">[</i>DISTINCT<i class="bn">]</i> sql_exp )</span></code><br />
 <br><!-- /A --></p>
<h3 id="effect_2">Effect</h3>
<p>Determines the maximum value or minimum value of the results of the SQL expression <a href="../abapsql_expr" class="blue"><code style="display: inline;"><span class="qtext">sql_exp</span></code></a> in a row set. The data type of the result is the
<a href="../abenexternal_data_type_glosry" class="grey" title="Glossary Entry">external data type</a> of the result of the SQL expression.</p>
<p>The result of the SQL expression <code style="display: inline;"><span class="qtext">sql_exp</span></code> must be a numeric type (except for the
<a href="../abenddic_decimal_floating_point" class="blue">replacement types for decimal floating point
numbers</a>). If a single column <a href="../abenopen_sql_columns" class="blue"><code style="display: inline;"><span class="qtext">col</span></code></a> is specified for the expression, this column can also have any data type.</p>
<p><br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Determines the minimum value and maximum value of all values in a column and checks the result.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">DATA</span><span class="p">(</span><span class="nv">n</span><span class="p">)</span> <span class="o">=</span> <span class="mi">9</span><span class="p">.</span> 

<span class="k">DELETE</span> <span class="k">FROM</span> <span class="nv">demo_expressions</span><span class="p">.</span> 
<span class="k">INSERT</span> <span class="nv">demo_expressions</span> <span class="k">FROM</span> <span class="k">TABLE</span> <span class="err">@</span><span class="p">(</span> <span class="k">VALUE</span> <span class="err">#</span><span class="p">(</span> 
  <span class="k">FOR</span> <span class="nv">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="nv">UNTIL</span> <span class="nv">i</span> <span class="o">&gt;</span> <span class="nv">n</span> 
  <span class="p">(</span> <span class="k">id</span> <span class="o">=</span> <span class="nv">CONV</span> <span class="err">#</span><span class="p">(</span> <span class="nv">i</span> <span class="p">)</span> <span class="nv">num1</span> <span class="o">=</span> <span class="nv">i</span> <span class="p">)</span> <span class="p">)</span> <span class="p">).</span> 

<span class="k">SELECT</span> <span class="nv">MIN</span><span class="p">(</span> <span class="nv">num1</span> <span class="p">)</span> <span class="k">AS</span> <span class="nv">min</span><span class="p">,</span> <span class="nv">MAX</span><span class="p">(</span> <span class="nv">num1</span> <span class="p">)</span> <span class="k">AS</span> <span class="nv">max</span> 
       <span class="k">FROM</span> <span class="nv">demo_expressions</span> 
       <span class="k">INTO</span> <span class="p">(</span><span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">min</span><span class="p">),</span><span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">max</span><span class="p">)).</span> 

<span class="k">ASSERT</span> <span class="nv">min</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span> 
<span class="k">ASSERT</span> <span class="nv">max</span> <span class="o">=</span> <span class="nv">n</span><span class="p">.</span> 
</code></pre></div>
</div>
<a name="!ABAP_VARIANT_4@4@"></a></p>
<h2 id="variant-4">Variant 4</h2>
<p><code style="display: inline;"><span class="qtext">... SUM( <i class="bn">[</i>DISTINCT<i class="bn">]</i> sql_exp )</span></code><br />
 <br><!-- /A --></p>
<h3 id="effect_3">Effect</h3>
<p>Determines the sum of the results of the SQL expression <a href="../abapsql_expr" class="blue"><code style="display: inline;"><span class="qtext">sql_exp</span></code></a> in a row set. The data type of the result is the
<a href="../abenexternal_data_type_glosry" class="grey" title="Glossary Entry">external data type</a> of the result of the SQL expression.</p>
<p>The result of the SQL expression <code style="display: inline;"><span class="qtext">sql_exp</span></code> must be a numeric type (except for the
<a href="../abenddic_decimal_floating_point" class="blue">replacement types for decimal floating point
numbers</a>). If a single column <a href="../abenopen_sql_columns" class="blue"><code style="display: inline;"><span class="qtext">col</span></code></a>
is specified for the expression, this column can have any numeric data type except DF16_RAW and DF34_RAW and except the obsolete data types DF16_SCL and DF34_SCL .</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>If the aggregate function <code style="display: inline;"><span class="qtext">SUM</span></code> is used for columns of types DECFLOAT16 or DF16_DEC, it is best to use a target field with the data type <code style="display: inline;"><span class="qtext">decfloat34</span></code> to avoid overflows.</p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Totals all values in a column and checks the result.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">DATA</span><span class="p">(</span><span class="nv">n</span><span class="p">)</span> <span class="o">=</span> <span class="mi">9</span><span class="p">.</span> 

<span class="k">DELETE</span> <span class="k">FROM</span> <span class="nv">demo_expressions</span><span class="p">.</span> 
<span class="k">INSERT</span> <span class="nv">demo_expressions</span> <span class="k">FROM</span> <span class="k">TABLE</span> <span class="err">@</span><span class="p">(</span> <span class="k">VALUE</span> <span class="err">#</span><span class="p">(</span> 
  <span class="k">FOR</span> <span class="nv">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="nv">UNTIL</span> <span class="nv">i</span> <span class="o">&gt;</span> <span class="nv">n</span> 
  <span class="p">(</span> <span class="k">id</span> <span class="o">=</span> <span class="nv">CONV</span> <span class="err">#</span><span class="p">(</span> <span class="nv">i</span> <span class="p">)</span> <span class="nv">num1</span> <span class="o">=</span> <span class="nv">i</span> <span class="p">)</span> <span class="p">)</span> <span class="p">).</span> 

<span class="k">SELECT</span> <span class="nv">SUM</span><span class="p">(</span> <span class="nv">num1</span> <span class="p">)</span> 
       <span class="k">FROM</span> <span class="nv">demo_expressions</span> 
       <span class="k">INTO</span> <span class="p">(</span><span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">sum</span><span class="p">)).</span> 

<span class="k">ASSERT</span> <span class="k">sum</span> <span class="o">=</span> <span class="p">(</span> <span class="nv">n</span> <span class="o">*</span> <span class="p">(</span> <span class="nv">n</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">)</span> <span class="p">/</span> <span class="mi">2</span><span class="p">.</span> 
</code></pre></div>
</div>
<a name="!ABAP_VARIANT_5@5@"></a></p>
<h2 id="variant-5">Variant 5</h2>
<p><code style="display: inline;"><span class="qtext">... PRODUCT( col )</span></code><br />
 <br><!-- /A --></p>
<h3 id="effect_4">Effect</h3>
<p>Determines the product of the values of a column <code style="display: inline;"><span class="qtext">col</span></code> in a row set. The data type of the result is the
<a href="../abenexternal_data_type_glosry" class="grey" title="Glossary Entry">external data type</a> of the column. The column must have a numeric type (except for the
<a href="../abenddic_decimal_floating_point" class="blue">replacement types for decimal floating point numbers</a>).</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>The aggregate function <code style="display: inline;"><span class="qtext">PRODUCT</span></code> can currently be used only in the
<a href="../abenhierarchy_agg_navi_glosry" class="grey" title="Glossary Entry">hierarchy aggregate
navigator</a> <a href="../abenselect_hierarchy_ancs_agg" class="blue"><code style="display: inline;"><span class="qtext">HIERARCHY_ANCESTORS_AGGREGATE</span></code></a>.</p>
</div>

<h3 id="executable-example">Executable Example</h3>
<p>See <a href="../abenhier_ancs_agg_abexa" class="blue">Hierarchy Navigator <code style="display: inline;"><span class="qtext">HIERARCHY_ANCESTORS_AGGREGATE</span></code></a>  </p>
<p><a name="!ABAP_VARIANT_6@6@"></a></p>
<h2 id="variant-6">Variant 6</h2>
<p><code style="display: inline;"><span class="qtext">... STRING_AGG( sql_exp<i class="bn">[</i>, sep<i class="bn">]</i> <i class="bn">[</i>ORDER BY ...<i class="bn">]</i> )</span></code><br />
 <br><!-- /A --></p>
<h3 id="effect_5">Effect</h3>
<p>Chains the results of the SQL expression <a href="../abapsql_expr" class="blue"><code style="display: inline;"><span class="qtext">sql_exp</span></code></a>
in a row set. The data type of the result is SSTRING with the length 1333. If the string in question
is greater then 1333, a handleable exception of the class CX_SY_OPEN_SQL_DB is raised The results of
the SQL expression <code style="display: inline;"><span class="qtext">sql_exp</span></code> must be a flat character-like data type like CHAR, SSTRING, DATS, or TIMS.</p>
<p>An optional separator <code style="display: inline;"><span class="qtext">sep</span></code> separated by a comma can be specified after the
SQL expression. If <code style="display: inline;"><span class="qtext">sep</span></code> is specified, its content is inserted into the string
between successive results of the SQL expression. If <code style="display: inline;"><span class="qtext">sep</span></code> is not specified, these results are appended to each other directly. <code style="display: inline;"><span class="qtext">sep</span></code> can be a
<a href="../abenabap_sql_host_literals" class="blue">literal</a> or a
<a href="../abenopen_sql_host_variables" class="blue">host constant</a> with the
<a href="../abenbuilt_in_types_complete" class="blue">ABAP type</a> <code style="display: inline;"><span class="qtext">c</span></code>, <span class="qtext">
d</span>, <code style="display: inline;"><span class="qtext">t</span></code>, <code style="display: inline;"><span class="qtext">n</span></code>, or <code style="display: inline;"><span class="qtext">string</span></code> with a maximum of 1333 characters.</p>
<p>The optional addition <code style="display: inline;"><span class="qtext">ORDER BY</span></code> can be used to define the order in which the
results of the SQL expression are chained. If <code style="display: inline;"><span class="qtext">ORDER BY</span></code> is not specified,
the order is undefined. <code style="display: inline;"><span class="qtext">ORDER BY</span></code> is followed by a comma-separated list of
columns of the data sources of the current query. These columns are used to sort the rows of the row
set. A column can only be specified directly using the column name <a href="../abenopen_sql_columns" class="blue">
<code style="display: inline;"><span class="qtext">col1</span></code></a>, <a href="../abenopen_sql_columns" class="blue"><span class="qtext">col2
...</span></a> Alias names defined using <a href="../abapselect_list" class="blue"><code style="display: inline;"><span class="qtext">AS</span></code></a>
cannot be specified. The additions <code style="display: inline;"><span class="qtext">ASCENDING</span></code> and <code style="display: inline;"><span class="qtext">DESCENDING</span></code>
determine whether the rows are sorted in ascending or descending order by the column in question. The default is <code style="display: inline;"><span class="qtext">ASCENDING</span></code>.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p>
<ul></p>
<li>
The addition <code style="display: inline;"><span class="qtext">DISTINCT</span></code> cannot be specified for the aggregate function <code style="display: inline;"><span class="qtext">STRING_AGG</span></code>.
</li>

<li>
The aggregate function <code style="display: inline;"><span class="qtext">STRING_AGG</span></code> cannot be used as a <a href="../abensql_win_func" class="blue">window function</a>.
</li>

<li>
When used, the aggregate function <code style="display: inline;"><span class="qtext">STRING_AGG</span></code> requires the <a href="../abenopensql_strict_mode_754" class="blue"> strict mode from Release 7.54</a>.
<br></li>

<p></ul>
</div></p>
<h3 id="executable-example_1">Executable Example</h3>
<p><a href="../abensql_expr_string_agg_abexa" class="blue">SQL Expressions, Aggregate Function <code style="display: inline;"><span class="qtext">string_agg</span></code></a>  </p>
<p><a name="!ABAP_VARIANT_7@7@"></a></p>
<h2 id="variant-7">Variant 7</h2>
<p><code style="display: inline;"><span class="qtext">... COUNT( <i class="bn">[</i>DISTINCT<i class="bn">]</i> sql_exp )</span></code><br />
 <br><!-- /A --></p>
<h3 id="effect_6">Effect</h3>
<p>Determines the number of distinct values of the results of the SQL expression <a href="../abapsql_expr" class="blue"><code style="display: inline;"><span class="qtext">sql_exp</span></code></a> in a row set.</p>
<ul>

<li>If the addition <code style="display: inline;"><span class="qtext">DISTINCT</span></code> is not specified, <code style="display: inline;"><span class="qtext">COUNT</span></code>
determines all rows in which the result of the SQL expression <a href="../abapsql_expr" class="blue"><code style="display: inline;"><span class="qtext">sql_exp</span></code></a> is not the
<a href="../abennull_value_glosry" class="grey" title="Glossary Entry">null value</a></li>

</ul>

<ul>

<li>If the addition <code style="display: inline;"><span class="qtext">DISTINCT</span></code> is specified, <code style="display: inline;"><span class="qtext">COUNT</span></code>
determines the number of distinct values of the results of the SQL expression <a href="../abapsql_expr" class="blue"><code style="display: inline;"><span class="qtext">sql_exp</span></code></a>.
<a href="../abennull_value_glosry" class="grey" title="Glossary Entry">Null values</a> are ignored here.</li>

</ul>

<p>The data type of the result is INT4. The SQL expression <code style="display: inline;"><span class="qtext">sql_exp</span></code> can be a result with any type (except for the
<a href="../abenddic_decimal_floating_point" class="blue">replacement types for decimal floating point
numbers</a>). If a single column <a href="../abenopen_sql_columns" class="blue"><code style="display: inline;"><span class="qtext">col</span></code></a> is specified for the expression, this column can have any data type.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>An aggregate function <code style="display: inline;"><span class="qtext">COUNT</span></code> without the addition <code style="display: inline;"><span class="qtext">DISTINCT</span></code> requires the <a href="../abenopensql_strict_mode_754" class="blue">strict mode from Release 7.54</a>.</p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Determines the number of airlines flying to New York.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="nv">COUNT</span><span class="p">(</span> <span class="nv">DISTINCT</span> <span class="nv">carrid</span> <span class="p">)</span> 
       <span class="k">FROM</span> <span class="nv">spfli</span> 
       <span class="k">WHERE</span> <span class="nv">cityto</span> <span class="o">=</span> <span class="s1">&#39;NEW YORK&#39;</span> 
       <span class="k">INTO</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">count</span><span class="p">).</span> 
</code></pre></div>
</div>
<a name="!ABAP_VARIANT_8@8@"></a></p>
<h2 id="variant-8">Variant 8</h2>
<p><code style="display: inline;"><span class="qtext">... COUNT( * )</span></code><br />
 <br><!-- /A --></p>
<p><a name="!ABAP_VARIANT_9@9@"></a></p>
<h2 id="variant-9">Variant 9</h2>
<p><code style="display: inline;"><span class="qtext">... COUNT( * )</span></code><br />
 <br><!-- /A --></p>
<h3 id="effect_7">Effect</h3>
<p>The two spellings have the same meaning and, regardless of a specific value, produce the number of rows in a row set: The following applies to the data type of the result:</p>
<ul>

<li>
If used as an aggregate expression <a href="../abapselect_aggregate" class="blue"><code style="display: inline;"><span class="qtext">agg_exp</span></code></a>:
<br></li>

</ul>

<ul class="circlem2">

<li>If <code style="display: inline;"><span class="qtext">COUNT( * )</span></code> or <code style="display: inline;"><span class="qtext">COUNT(*)</span></code> is specified as
an aggregate expression in a <code style="display: inline;"><span class="qtext">SELECT</span></code> list with other columns or together with
a <a href="../abapgroupby_clause" class="blue"><code style="display: inline;"><span class="qtext">GROUP BY</span></code></a> clause, the data type of the result is INT4 and no numbers greater than 2147483647 can be determined.</li>

</ul>

<ul class="circlem2">

<li>If <code style="display: inline;"><span class="qtext">COUNT( * )</span></code> or <code style="display: inline;"><span class="qtext">COUNT(*)</span></code> is specified as
the only column and the <a href="../abapgroupby_clause" class="blue"><code style="display: inline;"><span class="qtext">GROUP BY</span></code></a>
clause is not specified as an aggregate expression in a <code style="display: inline;"><span class="qtext">SELECT</span></code> list, the
internal data type of the result is <code style="display: inline;"><span class="qtext">INT8</span></code> and numbers up to +9223372036854775807
can be determined. The system field <code style="display: inline;"><span class="qtext">sy-dbcnt</span></code> is set to the value -1 in results outside of the value range of the type <code style="display: inline;"><span class="qtext">i</span></code>.</li>

</ul>

<ul>

<li>
If used as a window function <a href="../abensql_win_func" class="blue"><code style="display: inline;"><span class="qtext">win_func</span></code></a> and in
<a href="../abenselect_hierarchy_agg_navis" class="blue">hierarchy aggregate navigators</a>, the data type of the result is INT8.
<br></li>

</ul>

<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>A target object of the type <code style="display: inline;"><span class="qtext">INT8</span></code>, <code style="display: inline;"><span class="qtext">p</span></code>, or <code style="display: inline;"><span class="qtext">decfloat34</span></code> must be specified if a standalone function <span class="qtext">COUNT( *
)</span> or <code style="display: inline;"><span class="qtext">COUNT(*)</span></code> expects a value greater than the value range of INT4.</p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Example for counting rows using <code style="display: inline;"><span class="qtext">COUNT</span></code>. The single-row result contains the values 7, 2, and 10 in its columns.</p>
<ul>

<li>
10 is the total number of rows in the results set determined using <code style="display: inline;"><span class="qtext">COUNT(*)</span></code> and is not dependent on a single value.
</li>
<li>
7 is the number of rows determined using <code style="display: inline;"><span class="qtext">COUNT</span></code> (without <code style="display: inline;"><span class="qtext">DISTINCT</span></code>) in which
<a href="../abensql_simple_case" class="blue">case distinction</a> does not produce the null value.
</li>
<li>
2 is the number of distinct results <span class="qtext400">&quot;X&quot;</span> and <span class="qtext400">&quot;Y&#x201D;</span> determined using <code style="display: inline;"><span class="qtext">COUNT</span></code> und <code style="display: inline;"><span class="qtext">DISTINCT</span></code> of the
<a href="../abensql_simple_case" class="blue">case distinction</a> while ignoring the null value.
<br></li>

</ul>

<p>The difference 3 of the results of <code style="display: inline;"><span class="qtext">COUNT(*)</span></code> and <code style="display: inline;"><span class="qtext">COUNT</span></code> without <code style="display: inline;"><span class="qtext">DISTINCT</span></code> is the number of rows in which the
<a href="../abensql_simple_case" class="blue">case distinction</a> produces the null value.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">DELETE</span> <span class="k">FROM</span> <span class="nv">demo_expressions</span><span class="p">.</span> 
<span class="k">INSERT</span> <span class="nv">demo_expressions</span> 
       <span class="k">FROM</span> <span class="k">TABLE</span> <span class="err">@</span><span class="p">(</span> <span class="k">VALUE</span> <span class="err">#</span><span class="p">(</span> 
        <span class="k">FOR</span> <span class="nv">i</span> <span class="o">=</span> <span class="mi">1</span> <span class="nv">UNTIL</span> <span class="nv">i</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="p">(</span> <span class="k">id</span> <span class="o">=</span> <span class="nv">CONV</span> <span class="err">#</span><span class="p">(</span> <span class="nv">i</span> <span class="p">)</span> <span class="nv">num1</span> <span class="o">=</span> <span class="nv">i</span> <span class="p">)</span> <span class="p">)</span> <span class="p">).</span> 

<span class="k">SELECT</span> <span class="k">FROM</span> <span class="nv">demo_expressions</span> 
       <span class="k">FIELDS</span> 
         <span class="nv">COUNT</span><span class="p">(</span> 
           <span class="k">CASE</span> <span class="k">WHEN</span> <span class="nv">num1</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="nv">THEN</span> <span class="s1">&#39;X&#39;</span> 
               <span class="k">WHEN</span> <span class="nv">num1</span> <span class="nv">BETWEEN</span> <span class="mi">4</span> <span class="ow">AND</span> <span class="mi">7</span> <span class="nv">THEN</span> <span class="s1">&#39;Y&#39;</span> <span class="nv">END</span> <span class="p">)</span> <span class="k">AS</span> <span class="nv">cnt</span><span class="p">,</span> 
         <span class="nv">COUNT</span><span class="p">(</span> <span class="nv">DISTINCT</span> 
            <span class="k">CASE</span> <span class="k">WHEN</span> <span class="nv">num1</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="nv">THEN</span> <span class="s1">&#39;X&#39;</span> 
                 <span class="k">WHEN</span> <span class="nv">num1</span> <span class="nv">BETWEEN</span> <span class="mi">4</span> <span class="ow">AND</span> <span class="mi">7</span> <span class="nv">THEN</span> <span class="s1">&#39;Y&#39;</span> <span class="nv">END</span> <span class="p">)</span> <span class="k">AS</span> <span class="nv">cntdist</span><span class="p">,</span> 
         <span class="nv">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="nv">cntstar</span> 
       <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">result</span><span class="p">).</span> 

<span class="nv">cl_demo_output</span><span class="o">=&gt;</span><span class="nf">display</span><span class="p">(</span> <span class="nv">result</span> <span class="p">).</span> 
</code></pre></div>
</div>
<a name="!ABAP_VARIANT_10@10@"></a></p>
<h2 id="variant-10">Variant 10</h2>
<p><code style="display: inline;"><span class="qtext">... GROUPING( col )</span></code><br />
 <br><!-- /A --></p>
<h3 id="effect_8">Effect</h3>
<p>The grouping function <a href="../abengrouping_function" class="blue"><code style="display: inline;"><span class="qtext">GROUPING</span></code></a>
can be used to verify whether a column <a href="../abenopen_sql_columns" class="blue"><code style="display: inline;"><span class="qtext">col</span></code></a>
is part of the aggregation. The grouping function can be used only if the <code style="display: inline;"><span class="qtext">GROUP BY</span></code> clause contains the addition <code style="display: inline;"><span class="qtext">GROUPING SETS</span></code>. The data type of the result of the grouping function is
<a href="../abenddic_builtin_types" class="blue">INT1</a>.
<a href="../abapsql_expr" class="blue">SQL expressions</a> cannot be specified as arguments for <span class="qtext">
GROUPING</span>. More information can be found in <a href="../abengrouping_function" class="blue"><code style="display: inline;"><span class="qtext">sql_agg - GROUPING</span></code></a>.</p>
<h3 id="executable-example_2">Executable Example</h3>
<p><a href="../abengrouping_function_abexa" class="blue"><code style="display: inline;"><span class="qtext">GROUPING</span></code>, Aggregate Function</a>  </p>
<h3 id="continue">Continue</h3>
<p><a href="../abapselect_avg_as" class="blue">sql_agg - AVG, AS</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>