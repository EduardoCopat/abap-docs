


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abapselect avg as - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sql_agg-avg-as" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abapselect avg as
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
    <nav class="md-nav" aria-label="Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abapselect_avg_as.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP &#x2212; Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_language_external_data" class="blue">Processing External Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_sql" class="blue">ABAP Database Access</a>&#xA0;&#x2192;&#xA0;
<a href="../abenopensql" class="blue">ABAP SQL</a>&#xA0;&#x2192;&#xA0;
<a href="../abenopen_sql_operands" class="blue">ABAP SQL - Operands and Expressions</a>&#xA0;&#x2192;&#xA0;
<a href="../abapsql_expr" class="blue">ABAP SQL - SQL Expressions sql_exp</a>&#xA0;&#x2192;&#xA0;
<a href="../abapselect_aggregate" class="blue">sql_exp - sql_agg</a>&#xA0;&#x2192;&#xA0;
<a href="../abensql_agg_func" class="blue">sql_exp - agg_func</a>&#xA0;</small></p>
<h1 id="sql_agg-avg-as">sql_agg - AVG, AS</h1>
<p>Other versions: 
 <s><i>7.31</i></s> | <s><i>7.40</i></s> | <b>7.54</b></p>
<h2 id="syntax">Syntax</h2>
<p><pre><code class="hljs abap abap-docs-syntax-block">
<span class="qtext">... AVG( <i class="bn">[</i>DISTINCT<i class="bn">]</i> <a href="../abenopen_sql_columns" class="blue">col</a> AS dtype ) ...</span> 
</code></pre></p>
<h3 id="effect">Effect</h3>
<p>Aggregate function <a href="../abensql_agg_func" class="blue"><code style="display: inline;"><span class="qtext">AVG</span></code></a> in
ABAP SQL with a data type <code style="display: inline;"><span class="qtext">dtype</span></code> specified. The data type determines the result
type in which the average value is returned. The data type of <code style="display: inline;"><span class="qtext">col</span></code> must be numeric and have one of the types
<a href="../abenddic_builtin_types" class="blue">INT1</a>,
<a href="../abenddic_builtin_types" class="blue">INT2</a>,
<a href="../abenddic_builtin_types" class="blue">INT4</a>,
<a href="../abenddic_builtin_types" class="blue">INT8</a>,
<a href="../abenddic_builtin_types" class="blue">DEC</a>,
<a href="../abenddic_builtin_types" class="blue">CURR</a>,
<a href="../abenddic_builtin_types" class="blue">QUAN</a>, or
<a href="../abenddic_builtin_types" class="blue">FLTP</a>. The addition <code style="display: inline;"><span class="qtext">AS</span></code> cannot yet be used for all types for
<a href="../abenddic_decimal_floating_point" class="blue">decimal floating point numbers</a>.</p>
<p>The data type <code style="display: inline;"><span class="qtext">dtype</span></code> can have the built-in numeric type
<a href="../abenddic_builtin_types" class="blue">DEC</a>,
<a href="../abenddic_builtin_types" class="blue">CURR</a>,
<a href="../abenddic_builtin_types" class="blue">QUAN</a>,
<a href="../abenddic_builtin_types" class="blue">DECFLOAT16</a>,
<a href="../abenddic_builtin_types" class="blue">DECFLOAT34</a>, or
<a href="../abenddic_builtin_types" class="blue">FLTP</a>. The data type FLTP, however, can only be specified for operands of type FLTP. The data type <code style="display: inline;"><span class="qtext">dtype</span></code> can be specified as follows:</p>
<ul>

<li><code style="display: inline;"><span class="qtext">DEC( len,decimals )</span></code></li>

</ul>

<ul>

<li><code style="display: inline;"><span class="qtext">CURR( len,decimals )</span></code></li>

</ul>

<ul>

<li><code style="display: inline;"><span class="qtext">QUAN( len,decimals )</span></code></li>

</ul>

<ul>

<li><code style="display: inline;"><span class="qtext">D16N</span></code> for DECFLOAT16</li>

</ul>

<ul>

<li><code style="display: inline;"><span class="qtext">D34N</span></code> for DECFLOAT34</li>

</ul>

<ul>

<li><code style="display: inline;"><span class="qtext">FLTP</span></code></li>

</ul>

<p>Length and decimal places must be specified with <code style="display: inline;"><span class="qtext">len</span></code> and <code style="display: inline;"><span class="qtext">decimals</span></code>.
<a href="../abenabap_sql_host_literals" class="blue">Literals</a> or
<a href="../abenopen_sql_host_variables" class="blue">host constants</a> of the
<a href="../abenbuilt_in_types_complete" class="blue">ABAP type</a> <code style="display: inline;"><span class="qtext">b</span></code>, <span class="qtext">
s</span>, <code style="display: inline;"><span class="qtext">i</span></code>, or <code style="display: inline;"><span class="qtext">int8</span></code> can be specified for <span class="qtext">
len</span> and <code style="display: inline;"><span class="qtext">decimals</span></code>. The value range of the data type <code style="display: inline;"><span class="qtext">dtype</span></code> must cover the value range of the operand type:</p>
<ul>

<li>If <code style="display: inline;"><span class="qtext">col</span></code> is an integer type, a type <code style="display: inline;"><span class="qtext">dtype</span></code> of
type DEC, CURR, QUAN must have at least as many integer digits as is required by the value range of
the respective integer type, that is, 3 for INT1, 5 for INT2, 10 for INT4, and 19 for INT8. There is no restriction on the number of decimal places.</li>

</ul>

<ul>

<li>If <code style="display: inline;"><span class="qtext">col</span></code> has type DEC, CURR, QUAN, a type <code style="display: inline;"><span class="qtext">dtype</span></code> of type DEC, CURR, QUAN must have at least any many integer digits and decimal places.</li>

</ul>

<ul>

<li>If <code style="display: inline;"><span class="qtext">col</span></code> has type FLTP, this type must also be specified for <code style="display: inline;"><span class="qtext">dtype</span></code>.</li>

</ul>

<p>The data types DECFLOAT16 and DECFLOAT34 can be used for all permitted data types of <code style="display: inline;"><span class="qtext">col</span></code>
except FLTP. If the average value cannot be represented exactly in the data type <code style="display: inline;"><span class="qtext">dtype</span></code>, the result is rounded commercially.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>The addition <code style="display: inline;"><span class="qtext">AS</span></code> to <code style="display: inline;"><span class="qtext">AVG</span></code> bridges the gap for
average values where the default result type FLTP cannot be cast to other numeric data types with <a href="../abensql_cast" class="blue"><code style="display: inline;"><span class="qtext">CAST</span></code></a>.</li>

<p></ul>
<ul></p>
<li>Since average values usually have decimal places, integer types are not supported for <code style="display: inline;"><span class="qtext">dtype</span></code>. If necessary, the type DEC can be used without decimal places.</li>

<p></ul>
<ul></p>
<li>An aggregate expression <code style="display: inline;"><span class="qtext">AVG</span></code> cannot be applied to operands with the data
type  INT8 without using the addition <code style="display: inline;"><span class="qtext">AS</span></code>. The addition <code style="display: inline;"><span class="qtext">AS</span></code> can also be used to form average values for columns with data type INT8. However, for the types
<a href="../abenddic_builtin_types" class="blue">DF16_...</a>,
<a href="../abenddic_builtin_types" class="blue">DF34_...</a>, <code style="display: inline;"><span class="qtext">AVG</span></code> is only possible without the addition <code style="display: inline;"><span class="qtext">AS</span></code>.</li>

<p></ul>
<ul></p>
<li>The actual calculation of the average value (determined by the involved data types) is platform
dependent. This can lead to underflows, overflows and exceptions during the calculation. To prevent
exceptions, the total of the values for which the average value is being calculated should be within the value range of <code style="display: inline;"><span class="qtext">dtype</span></code>.</li>

<p></ul>
<ul></p>
<li>If FLTP is specified explicitly for operands of type FLTP, this ensures that the result of <code style="display: inline;"><span class="qtext">AVG</span></code> actually has this type at each operand position, which cannot be guaranteed otherwise.</li>

<p></ul>
<ul></p>
<li>If used, <code style="display: inline;"><span class="qtext">D16N</span></code> or <code style="display: inline;"><span class="qtext">D34N</span></code> force the <a href="../abenopensql_strict_mode_754" class="blue"> strict mode of the syntax check from Release 7.54</a>.</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Apply the aggregate function <code style="display: inline;"><span class="qtext">AVG</span></code> to a column of the database table DEMO_EXPRESSIONS.
The program <span class="lnkgrey">DEMO_SQL_AVG</span> executes this access to the table and represents the <span class="lnkgrey">result</span>.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> 
  <span class="k">FROM</span> <span class="nv">demo_expressions</span> 
  <span class="k">FIELDS</span> 
    <span class="nv">AVG</span><span class="p">(</span>         <span class="nv">num1</span>                <span class="p">)</span> <span class="k">AS</span> <span class="nv">avg_no_type</span><span class="p">,</span> 
    <span class="nv">AVG</span><span class="p">(</span> <span class="nv">DISTINCT</span> <span class="nv">num1</span>                <span class="p">)</span> <span class="k">AS</span> <span class="nv">avg_no_type_distinct</span><span class="p">,</span> 
    <span class="nv">AVG</span><span class="p">(</span>          <span class="nv">num1</span> <span class="k">AS</span> <span class="nv">DEC</span><span class="p">(</span> <span class="mi">10</span><span class="p">,</span><span class="mi">0</span> <span class="p">)</span> <span class="p">)</span> <span class="k">AS</span> <span class="nv">avg_dec0</span><span class="p">,</span> 
    <span class="nv">AVG</span><span class="p">(</span> <span class="nv">DISTINCT</span> <span class="nv">num1</span> <span class="k">AS</span> <span class="nv">DEC</span><span class="p">(</span> <span class="mi">10</span><span class="p">,</span><span class="mi">0</span> <span class="p">)</span> <span class="p">)</span> <span class="k">AS</span> <span class="nv">avg_dec0_distinct</span><span class="p">,</span> 
    <span class="nv">AVG</span><span class="p">(</span>         <span class="nv">num1</span> <span class="k">AS</span> <span class="nv">DEC</span><span class="p">(</span> <span class="mi">14</span><span class="p">,</span><span class="mi">4</span> <span class="p">)</span> <span class="p">)</span> <span class="k">AS</span> <span class="nv">avg_dec4</span><span class="p">,</span> 
    <span class="nv">AVG</span><span class="p">(</span> <span class="nv">DISTINCT</span> <span class="nv">num1</span> <span class="k">AS</span> <span class="nv">DEC</span><span class="p">(</span> <span class="mi">14</span><span class="p">,</span><span class="mi">4</span> <span class="p">)</span> <span class="p">)</span> <span class="k">AS</span> <span class="nv">avg_dec4_distinct</span> 
  <span class="k">INTO</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">result</span><span class="p">).</span>
</code></pre></div>

</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>