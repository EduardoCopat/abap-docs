


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abencds f1 conv func unit curr - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#abap-cds-conversion-functions-for-units-and-currencies" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abencds f1 conv func unit curr
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variants" class="md-nav__link">
    Variants
  </a>
  
    <nav class="md-nav" aria-label="Variants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variant-1" class="md-nav__link">
    Variant 1
  </a>
  
    <nav class="md-nav" aria-label="Variant 1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect_1" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variant-2" class="md-nav__link">
    Variant 2
  </a>
  
    <nav class="md-nav" aria-label="Variant 2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect_2" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-the-decimal-places" class="md-nav__link">
    Handling the Decimal Places
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variant-3" class="md-nav__link">
    Variant 3
  </a>
  
    <nav class="md-nav" aria-label="Variant 3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect_3" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abencds_f1_conv_func_unit_curr.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_dictionary" class="blue">ABAP - Dictionary</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds" class="blue">ABAP CDS in ABAP Dictionary</a>&#xA0;&#x2192;&#xA0;
<a href="../abenddic_cds_entities" class="blue">ABAP CDS - Data Definitions</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_f1_ddl_syntax" class="blue">ABAP CDS - DDL for Data Definitions</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_f1_define_view" class="blue">ABAP CDS - DEFINE VIEW</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_f1_select_statement" class="blue">ABAP CDS - SELECT</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_f1_builtin_functions" class="blue">ABAP CDS - SELECT, Built-In Functions</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_special_functions" class="blue">ABAP CDS - Special Functions</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_f1_conversion_functions" class="blue">ABAP CDS - Conversion Functions</a>&#xA0;</small></p>
<h1 id="abap-cds-conversion-functions-for-units-and-currencies">ABAP CDS - Conversion Functions for Units and Currencies</h1>
<p>Other versions: 
 <s><i>7.31</i></s> | <s><i>7.40</i></s> | <b>7.54</b></p>
<h2 id="syntax">Syntax</h2>
<p><pre><code class="hljs abap abap-docs-syntax-block"></p>
<p><span class="qtext400">... UNIT_CONVERSION( p1 =&gt; a1, p2 =&gt; a2, ... ) <br>&#xA0;&#xA0;<i class="bn">|</i> CURRENCY_CONVERSION( p1 =&gt; a1, p2 =&gt; a2, ... ) <br>
&#xA0;&#xA0;<i class="bn">|</i> DECIMAL_SHIFT( p1 =&gt; a1, p2 =&gt; a2, ... ) ...</span> 
</code></pre></p>
<h2 id="variants">Variants</h2>
<p><a href="#!ABAP_VARIANT_1@1@" class="blue"> 1. <span class="qtext400">... UNIT_CONVERSION( p1 =&gt; a1, p2 =&gt; a2, ... )</span> </a> <br>
<br><a href="#!ABAP_VARIANT_2@2@" class="blue"> 2. <span class="qtext400">... CURRENCY_CONVERSION( p1 =&gt; a1, p2 =&gt; a2, ... )</span> </a> <br>
<br><a href="#!ABAP_VARIANT_3@3@" class="blue"> 3. <span class="qtext400">... DECIMAL_SHIFT( p1 =&gt; a1, p2 =&gt; a2, ... )</span> </a>  </p>
<h3 id="effect">Effect</h3>
<p>Conversion functions for converting between units and between currencies in a
<a href="../abencds_view_glosry" class="grey" title="Glossary Entry">CDS view</a>. The functions have
keyword parameters <span class="qtext400">p1</span>, <span class="qtext400">p2</span>, ... (some of
which are optional), to which the actual parameters <span class="qtext400">a1</span>, <span class="qtext400">a2</span>, ... must be assigned when called using <span class="qtext400">=&gt;</span>.  </p>
<p><a name="!ABAP_VARIANT_1@1@"></a></p>
<h2 id="variant-1">Variant 1</h2>
<p><span class="qtext400">... UNIT_CONVERSION( p1 =&gt; a1, p2 =&gt; a2, ... )</span><br />
 <br><!-- /A --></p>
<h3 id="effect_1">Effect</h3>
<p>The function <span class="qtext400">UNIT_CONVERSION</span> performs a unit conversion for the value passed to the formal parameter <span class="qtext400">quantity</span>. The result has the data type
<a href="../abenddic_builtin_types" class="blue">QUAN</a> with the length 31 and 14 decimal places.
The unit conversion is performed on the basis of the client-specific rules saved in transaction <span class="lnkgrey">CUNI</span> and in the database tables T006... of the package <span class="lnkgrey">SZME</span>.</p>
<p>The table below shows the actual parameters <span class="qtext400">p1</span>, <span class="qtext400">p2</span>, ... and their meaning.</p>
<table>
<thead>
<tr>
<th>Formal Parameter</th>
<th>Optional</th>
<th>Meaning</th>
<th>Data Type</th>
<th>Actual Parameter</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="qtext400">quantity</span></td>
<td><span class="qtext400">-</span></td>
<td>Initial value</td>
<td><a href="../abenddic_builtin_types" class="blue">QUAN</a>,<a href="../abenddic_builtin_types" class="blue">DEC</a>,<a href="../abenddic_builtin_types" class="blue">INT1</a>,<a href="../abenddic_builtin_types" class="blue">INT2</a>, <a href="../abenddic_builtin_types" class="blue">INT4</a>, <a href="../abenddic_builtin_types" class="blue">FLTP</a></td>
<td>Field of a <a href="../abencds_f1_data_source" class="blue">data source</a>, <a href="../abencds_f1_parameter" class="blue">parameter</a></td>
</tr>
<tr>
<td><span class="qtext400">source_unit</span></td>
<td><span class="qtext400">-</span></td>
<td>Source currency from column MSEHI of database table <span class="lnkgrey">T006</span></td>
<td><a href="../abenddic_builtin_types" class="blue">UNIT</a></td>
<td>Field of a <a href="../abencds_f1_data_source" class="blue">data source</a>,<a href="../abencds_f1_literal" class="blue">literal</a>, <a href="../abencds_f1_parameter" class="blue">parameter</a></td>
</tr>
<tr>
<td><span class="qtext400">target_unit</span></td>
<td><span class="qtext400">-</span></td>
<td>Target unit from column MSEHI of database table <span class="lnkgrey">T006</span></td>
<td><a href="../abenddic_builtin_types" class="blue">UNIT</a></td>
<td>Field of a <a href="../abencds_f1_data_source" class="blue">data source</a>,<a href="../abencds_f1_literal" class="blue">literal</a>, <a href="../abencds_f1_parameter" class="blue">parameter</a></td>
</tr>
<tr>
<td><span class="qtext400">client</span></td>
<td><span class="qtext400">X</span>, <span class="qtext400">-</span></td>
<td>Client whose rules are used to perform the unit conversion. Optional (if the current data source is client-specific). Default: Content of the client column of the current row</td>
<td><a href="../abenddic_builtin_types" class="blue">CLNT</a></td>
<td>Field of a <a href="../abencds_f1_data_source" class="blue">data source</a>,<a href="../abencds_f1_literal" class="blue">literal</a>, <a href="../abencds_f1_parameter" class="blue">parameter</a></td>
</tr>
<tr>
<td><span class="qtext400">error_handling</span></td>
<td><span class="qtext400">X</span></td>
<td>Error handling. If &quot;FAIL_ON_ERROR&quot; (default value), an error raises an exception; if &quot;SET_TO_NULL&quot;, the result is reset to the<a href="../abennull_value_glosry" class="grey" title="Glossary Entry">null value</a>; if &quot;KEEP_UNCONVERTED&quot;, the source value is not changed.</td>
<td><a href="../abenddic_builtin_types" class="blue">CHAR</a> with length 20</td>
<td><a href="../abencds_f1_literal" class="blue">Literal</a></td>
</tr>
</tbody>
</table>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>The precision of the result of the unit conversion depends on the database platform. The highest precision is achieved on databases that support
<a href="../abendecfloat_glosry" class="grey" title="Glossary Entry">decimal floating point numbers</a>.
Due to rounding, the result can be different from a unit conversion performed using ABAP methods, such as a standard function module.</p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following CDS view calls a unit conversion in the <span class="qtext400">SELECT</span> list for
the column DEC3 of the database table <span class="lnkgrey">DEMO_EXPRESSIONS</span>. The source unit
is a literal that is cast to the required type. The target unit must be passed as a parameter. In the event of an error, e.g. if a conversion between the entered units is impossible, the result is reset to zero.</p>
<dd>
<span class="qtext400">@AbapCatalog.sqlViewName: &apos;DEMO_CDS_UNTCNV&apos; <br>@AccessControl.authorizationCheck: #NOT_REQUIRED <br>
define view demo_cds_unit_conversion <br> with parameters <br> to_unit :abap.unit( 3 ) <br> as select from <br>
 demo_expressions <br> { <br> id, <br> dec3 as original_value, <br> cast( &apos;MI&apos; as abap.unit(3) ) as original_unit, <br>
 unit_conversion( quantity =&gt; dec3, <br> source_unit =&gt; cast( &apos;MI&apos; as abap.unit(3) ), <br> target_unit =&gt; :to_unit, <br>
 error_handling =&gt; &apos;SET_TO_NULL&apos; ) as converted_value, <br> :to_unit as converted_unit <br> }&#xA0;&#xA0;&#xA0;&#xA0;</span>
</dd>

<p>The program <span class="lnkgrey">DEMO_CDS_UNIT_CONVERSION</span> accesses the view in a <code style="display: inline;"><span class="qtext">SELECT</span></code>
statement. Here, the target unit is passed to the parameter in question. As a comparison, the same conversion
is also performed using the function module <span class="lnkgrey">UNIT_CONVERSION_SIMPLE</span>. As
prerequisite for the example, the units and their conversion rules must be available in the corresponding database tables.  </p>
<p></div>
<a name="!ABAP_VARIANT_2@2@"></a></p>
<h2 id="variant-2">Variant 2</h2>
<p><span class="qtext400">... CURRENCY_CONVERSION( p1 =&gt; a1, p2 =&gt; a2, ... )</span><br />
 <br><!-- /A --></p>
<h3 id="effect_2">Effect</h3>
<p>The function <span class="qtext400">CURRENCY_CONVERSION</span> performs a currency conversion for the value passed to the formal parameter <span class="qtext400">amount</span>. The result has the data type
<a href="../abenddic_builtin_types" class="blue"> CURR</a> with the same technical attributes as the
actual parameter passed to <span class="qtext400">amount</span>. The currency conversion is performed
on the basis of the client-specific rules saved in the database tables TCUR... of package <span class="lnkgrey">SFIB</span>.  These rules can be edited using transaction <span class="lnkgrey">OB08</span>.</p>
<p>The table below shows the actual parameters <span class="qtext400">p1</span>, <span class="qtext400">p2</span>, ... and their meaning.</p>
<table>
<thead>
<tr>
<th>Formal Parameter</th>
<th>Optional</th>
<th>Meaning</th>
<th>Data Type</th>
<th>Actual Parameter</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="qtext400">amount</span></td>
<td><span class="qtext400">-</span></td>
<td>Initial value</td>
<td><a href="../abenddic_builtin_types" class="blue">CURR</a></td>
<td>Field of a <a href="../abencds_f1_data_source" class="blue">data source</a>, <a href="../abencds_f1_parameter" class="blue">parameter</a></td>
</tr>
<tr>
<td><span class="qtext400">source_currency</span></td>
<td><span class="qtext400">-</span></td>
<td>Source currency from column WAERS of database table <span class="lnkgrey">TCURC</span></td>
<td><a href="../abenddic_builtin_types" class="blue">CUKY</a></td>
<td>Field of a <a href="../abencds_f1_data_source" class="blue">data source</a>,<a href="../abencds_f1_literal" class="blue">literal</a>, <a href="../abencds_f1_parameter" class="blue">parameter</a></td>
</tr>
<tr>
<td><span class="qtext400">target_currency</span></td>
<td><span class="qtext400">-</span></td>
<td>Target currency from column WAERS of database table <span class="lnkgrey">TCURC</span></td>
<td><a href="../abenddic_builtin_types" class="blue">CUKY</a></td>
<td>Field of a <a href="../abencds_f1_data_source" class="blue">data source</a>,<a href="../abencds_f1_literal" class="blue">literal</a>, <a href="../abencds_f1_parameter" class="blue">parameter</a></td>
</tr>
<tr>
<td><span class="qtext400">exchange_rate_date</span></td>
<td><span class="qtext400">-</span></td>
<td>Exchange rate date for column GDATU of database table <span class="lnkgrey">TCURR</span></td>
<td><a href="../abenddic_builtin_types" class="blue">DATS</a></td>
<td>Field of a <a href="../abencds_f1_data_source" class="blue">data source</a>,<a href="../abencds_f1_literal" class="blue">literal</a>, <a href="../abencds_f1_parameter" class="blue">parameter</a></td>
</tr>
<tr>
<td><span class="qtext400">exchange_rate_type</span></td>
<td><span class="qtext400">X</span></td>
<td>Exchange rate type from column KURST of database table <span class="lnkgrey">TCURR</span>, default value: &quot;M&quot;</td>
<td><a href="../abenddic_builtin_types" class="blue">CHAR</a> with length 4</td>
<td><a href="../abencds_f1_literal" class="blue">Literal</a>, <a href="../abencds_f1_parameter" class="blue">parameter</a></td>
</tr>
<tr>
<td><span class="qtext400">client</span></td>
<td><span class="qtext400">X</span>, <span class="qtext400">-</span></td>
<td>Client whose rules are used to perform the currency conversion. Optional (if the current data source is client-specific). Default: Content of the client column of the current row</td>
<td><a href="../abenddic_builtin_types" class="blue">CLNT</a></td>
<td>Field of a <a href="../abencds_f1_data_source" class="blue">data source</a>,<a href="../abencds_f1_literal" class="blue">literal</a>, <a href="../abencds_f1_parameter" class="blue">parameter</a></td>
</tr>
<tr>
<td><span class="qtext400">round</span></td>
<td><span class="qtext400">X</span></td>
<td>If &quot;X&quot; (default value), the intermediate result of the conversion is rounded to the end result using commercial rounding; else it is truncated</td>
<td><a href="../abenddic_builtin_types" class="blue">CHAR</a></td>
<td><a href="../abencds_f1_literal" class="blue">Literal</a></td>
</tr>
<tr>
<td><span class="qtext400">decimal_shift</span></td>
<td><span class="qtext400">X</span></td>
<td>If &quot;X&quot; (default value), the decimal places of the source value are moved as specified by the decimal places of the source currency (see below).</td>
<td><a href="../abenddic_builtin_types" class="blue">CHAR</a></td>
<td><a href="../abencds_f1_literal" class="blue">Literal</a></td>
</tr>
<tr>
<td><span class="qtext400">decimal_shift_back</span></td>
<td><span class="qtext400">X</span></td>
<td>If &quot;X&quot; (default value), the decimal places of the result are moved as specified by the decimal places of the target currency (see below).</td>
<td><a href="../abenddic_builtin_types" class="blue">CHAR</a></td>
<td><a href="../abencds_f1_literal" class="blue">Literal</a></td>
</tr>
<tr>
<td><span class="qtext400">error_handling</span></td>
<td><span class="qtext400">X</span></td>
<td>Error handling. If &quot;FAIL_ON_ERROR&quot; (default value), an error raises an exception; if &quot;SET_TO_NULL&quot;, the result is reset to the<a href="../abennull_value_glosry" class="grey" title="Glossary Entry">null value</a>; if &quot;KEEP_UNCONVERTED&quot;, the source value is not changed.</td>
<td><a href="../abenddic_builtin_types" class="blue">CHAR</a> with length 20</td>
<td><a href="../abencds_f1_literal" class="blue">Literal</a></td>
</tr>
</tbody>
</table>
<p>The <a href="../abencds_f1_literal" class="blue">literals</a> <span class="qtext400">#cdsboolean.TRUE</span>,
<span class="qtext400">#cdsboolean.true</span>, <span class="qtext400">#cdsboolean.FALSE</span>, and
<span class="qtext400">#cdsboolean.false</span> can also be specified for the input parameters <span class="qtext400">
round</span>, <span class="qtext400">decimal_shift</span>, and <span class="qtext400">decimal_shift_back</span>
with the domain prefix <span class="lnkgrey">CDSBOOLEAN</span> (case-sensitive) or the literals <span class="qtext400">
&apos;true&apos;</span> or <span class="qtext400">&apos;false&apos;</span> (not case-sensitive). Internally, these literals are handled like the values &quot;X&quot; or &quot; &quot;.</p>
<h3 id="handling-the-decimal-places">Handling the Decimal Places</h3>
<ul>

<li>The value passed is rounded to two decimal places before it is converted.</li>

<p></ul>
<ul></p>
<li>Before the conversion, the value passed is multiplied by 10 to the power of the number of decimal places of the source currency.</li>

<p></ul>
<ul></p>
<li>If the value &quot;X&quot; or &quot;TRUE&quot; is passed to the parameter <span class="qtext400">decimal_shift</span>,
the value passed is multiplied by 10 to the power of two minus the number of decimal places of the source currency before it is converted.</li>

<p></ul>
<ul></p>
<li>If the value &quot;X&quot; or &quot;TRUE&quot; is passed to the parameter <span class="qtext400">decimal_shift_back</span>,
the result is divided by 10 to the power of two minus the number of decimal places of the target currency before it is converted.</li>

<p></ul>
<ul></p>
<li>After the conversion, the result is divided by 10 to the power of the number of decimal places of the target currency.</li>

<p></ul>
<br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p>
<ul></p>
<li>The conversion is performed on the database, which means that part of the calculation takes place
using different rounding rules from ABAP. No matter how the conversion is made, the same results cannot
be expected as when using standard function modules for currency conversion, since these modules are generally less precise and round the intermediate results accordingly.</li>

<p></ul>
<ul></p>
<li>The parameter <span class="qtext400">decimal_shift</span> is intended to set the source value to the number of decimal places of the source currency before the conversion. This assumes that its technical type,
<a href="../abenddic_currency_field" class="blue">CURR</a>, has two decimal places as usual. The parameter <span class="qtext400">decimal_shift_back</span> is intended to perform the reverse operation.</li>

<p></ul>
<ul></p>
<li>If the technical type <a href="../abenddic_currency_field" class="blue">CURR</a> of the source
value does not have two decimal places, the function <span class="qtext400">CURRENCY_CONVERSION</span> may display unexpected behavior.</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following CDS view calls a currency conversion in the <span class="qtext400">SELECT</span> list
for the column AMOUNT of the database table <span class="lnkgrey">DEMO_PRICES</span>. The target currency
must be passed as a parameter. In the event of an error, e.g. when a currency is not available, the result is reset to zero.</p>
<dd>
<span class="qtext400">@AbapCatalog.sqlViewName: &apos;DEMO_CDS_CURRCO&apos; <br>@AccessControl.authorizationCheck: #NOT_REQUIRED <br>
define view demo_cds_curr_conv <br> with parameters <br> to_currency :abap.cuky( 5 ), <br> exc_date :abap.dats <br>
 as select from <br> demo_prices <br> { <br> id, <br> currency_conversion( amount =&gt; amount, <br> source_currency =&gt; currency, <br>
 round =&gt; &apos;X&apos;, <br> target_currency =&gt; :to_currency, <br> exchange_rate_date =&gt; :exc_date, <br> error_handling =&gt; &apos;SET_TO_NULL&apos; ) as amount, <br> :to_currency as currency <br> }&#xA0;&#xA0;&#xA0;&#xA0;</span>
</dd>

<p>The program <span class="lnkgrey">DEMO_CDS_CURRENCY_CONVERSION</span> accesses the view in a <code style="display: inline;"><span class="qtext">SELECT</span></code>
statement. The target currency is passed here. As a comparison, the same conversion is also performed
using the function module <span class="lnkgrey">CONVERT_TO_LOCAL_CURRENCY</span>. As prerequisite for the example, the currencies and conversion rules must be available in the corresponding database tables.  </p>
<p></div>
<a name="!ABAP_VARIANT_3@3@"></a></p>
<h2 id="variant-3">Variant 3</h2>
<p><span class="qtext400">... DECIMAL_SHIFT( p1 =&gt; a1, p2 =&gt; a2, ... )</span><br />
 <br><!-- /A --></p>
<h3 id="effect_3">Effect</h3>
<p>The function <span class="qtext400">DECIMAL_SHIFT</span> sets the decimal separator of the value that is passed to the formal parameter <span class="qtext400">amount</span> in accordance with a currency. The result has the data type
<a href="../abenddic_builtin_types" class="blue">CURR</a> with the length 31 and 14 decimal places.
Its value is produced by multiplying the input parameter rounded to two decimal places by 10 to the power of two minus the decimal places defined by the currency passed.</p>
<p>Possible currencies and their decimal places are based on the database tables TCUR... of the package <span class="lnkgrey">SFIB</span>.</p>
<table>
<thead>
<tr>
<th>Formal Parameter</th>
<th>Optional</th>
<th>Meaning</th>
<th>Data Type</th>
<th>Actual Parameter</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="qtext400">amount</span></td>
<td><span class="qtext400">-</span></td>
<td>Initial value</td>
<td><a href="../abenddic_builtin_types" class="blue">CURR</a></td>
<td>Field of a <a href="../abencds_f1_data_source" class="blue">data source</a>, <a href="../abencds_f1_parameter" class="blue">parameter</a></td>
</tr>
<tr>
<td><span class="qtext400">currency</span></td>
<td><span class="qtext400">-</span></td>
<td>Currency from column WAERS of database table <span class="lnkgrey">TCURC</span>; the associated decimal places determined from the column CURRDEC of <span class="lnkgrey">TCURX</span></td>
<td><a href="../abenddic_builtin_types" class="blue">CUKY</a></td>
<td>Field of a <a href="../abencds_f1_data_source" class="blue">data source</a>,<a href="../abencds_f1_literal" class="blue">literal</a>, <a href="../abencds_f1_parameter" class="blue">parameter</a></td>
</tr>
<tr>
<td><span class="qtext400">error_handling</span></td>
<td><span class="qtext400">X</span></td>
<td>Error handling. If &quot;FAIL_ON_ERROR&quot; (default value), an error raises an exception; if &quot;SET_TO_NULL&quot;, the result is reset to the<a href="../abennull_value_glosry" class="grey" title="Glossary Entry">null value</a>; if &quot;KEEP_UNCONVERTED&quot;, the source value is not changed.</td>
<td><a href="../abenddic_builtin_types" class="blue">CHAR</a> with length 20</td>
<td><a href="../abencds_f1_literal" class="blue">Literal</a></td>
</tr>
</tbody>
</table>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>If the type of the actual parameter passed to <span class="qtext400">amount</span> has two decimal places, its value is set to the number of decimal places of the passed currency.</p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>In the <span class="qtext400">SELECT</span> list, the following CDS view sets the decimal separator
for column AMOUNT of database table <span class="lnkgrey">DEMO_PRICES</span> to between 0 and 5, according
to the relevant currency. The column AMOUNT has two decimal places, which means that the decimal places
are determined directly by the passed currencies. In the event of an error, e.g. when a currency is not available, the result is reset to zero.</p>
<dd>
<span class="qtext400">@AbapCatalog.sqlViewName: &apos;DEMO_CDS_DCSHFT&apos; <br>@AccessControl.authorizationCheck: #NOT_REQUIRED <br>
define view demo_cds_decimal_shift <br> as select from <br> demo_prices <br> { <br> id, <br> @Semantics.amount.currencyCode:&apos;currency&apos; <br>
 amount as original, <br> @Semantics.currencyCode <br> currency, <br> decimal_shift( amount =&gt; amount, <br>
 currency =&gt; cast( &apos;0 &apos; as abap.cuky(5) ), <br> error_handling =&gt; &apos;SET_TO_NULL&apos; ) as shift_0, <br>
 decimal_shift( amount =&gt; amount, <br> currency =&gt; cast( &apos;1 &apos; as abap.cuky(5) ), <br> error_handling =&gt; &apos;SET_TO_NULL&apos; ) as shift_1, <br>
 decimal_shift( amount =&gt; amount, <br> currency =&gt; cast( &apos;2 &apos; as abap.cuky(5) ), <br> error_handling =&gt; &apos;SET_TO_NULL&apos; ) as shift_2, <br>
 decimal_shift( amount =&gt; amount, <br> currency =&gt; cast( &apos;3 &apos; as abap.cuky(5) ), <br> error_handling =&gt; &apos;SET_TO_NULL&apos; ) as shift_3, <br>
 decimal_shift( amount =&gt; amount, <br> currency =&gt; cast( &apos;4 &apos; as abap.cuky(5) ), <br> error_handling =&gt; &apos;SET_TO_NULL&apos; ) as shift_4, <br>
 decimal_shift( amount =&gt; amount, <br> currency =&gt; cast( &apos;5 &apos; as abap.cuky(5) ), <br> error_handling =&gt; &apos;SET_TO_NULL&apos; ) as shift_5 <br> }&#xA0;&#xA0;&#xA0;&#xA0;</span>
</dd>

<p>The program <span class="lnkgrey">DEMO_CDS_DECIMAL_SHIFT</span> accesses the view in a <code style="display: inline;"><span class="qtext">SELECT</span></code>
statement. As prerequisite for the example, the currencies and their number of decimal places must be available in the corresponding database tables.</p>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>