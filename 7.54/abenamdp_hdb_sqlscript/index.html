


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>AMDP - SQL Script for the SAP HANA Database - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#amdp-sql-script-for-the-sap-hana-database" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              AMDP - SQL Script for the SAP HANA Database
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="ABAP docs" class="md-nav__link">
      ABAP docs
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#amdp-procedures-and-functions-in-sap-hana" class="md-nav__link">
    AMDP procedures and functions in SAP HANA
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameter-interface" class="md-nav__link">
    Parameter Interface
  </a>
  
    <nav class="md-nav" aria-label="Parameter Interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sqlscript-procedures" class="md-nav__link">
    SQLScript Procedures
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlscript-functions" class="md-nav__link">
    SQLScript Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use" class="md-nav__link">
    Use
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-to-abap-types" class="md-nav__link">
    Access to ABAP Types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-to-database-schemas" class="md-nav__link">
    Access to Database Schemas
  </a>
  
    <nav class="md-nav" aria-label="Access to Database Schemas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#executable-examples" class="md-nav__link">
    Executable Examples
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#continue" class="md-nav__link">
    Continue
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abenamdp_hdb_sqlscript.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="amdp-sql-script-for-the-sap-hana-database">AMDP - SQL Script for the SAP HANA Database</h1>
<p><a href="../abensql_script_glosry" class="grey" title="Glossary Entry">SQL Script</a> is a script language, documented in the
<a href="https://help.sap.com/viewer/de2486ee947e43e684d39702027f8a94/2.0.00/en-US" target="blank" class="blue">SAP HANA SQLScript Reference</a>, and used to program
<a href="../abensql_script_procedure_glosry" class="grey" title="Glossary Entry">SQLScript procedures</a> and
<a href="../abensql_script_function_glosry" class="grey" title="Glossary Entry">SQLScript functions</a> in the
<a href="../abenhana_database_glosry" class="grey" title="Glossary Entry">SAP HANA database</a>. L is the implementation language of an
<a href="../abenamdp_methods" class="blue">AMDP method</a> that specifies the addition <a href="../abapmethod_by_db_proc" class="blue">
<code style="display: inline;"><span class="qtext">FOR HDB LANGUAGE SQLSCRIPT</span></code></a> when the statement <code style="display: inline;"><span class="qtext">METHOD</span></code> is used.</p>
<ul>

<li><a href="#@@ITOC@@ABENAMDP_HDB_SQLSCRIPT_1" class="blue">AMDP procedures and functions in SAP HANA</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@ABENAMDP_HDB_SQLSCRIPT_2" class="blue">Syntax</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@ABENAMDP_HDB_SQLSCRIPT_3" class="blue">Parameter Interface</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@ABENAMDP_HDB_SQLSCRIPT_4" class="blue">SQLScript Procedures</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@ABENAMDP_HDB_SQLSCRIPT_5" class="blue">SQLScript Functions</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@ABENAMDP_HDB_SQLSCRIPT_6" class="blue">Use</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@ABENAMDP_HDB_SQLSCRIPT_7" class="blue">Access to ABAP Types</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@ABENAMDP_HDB_SQLSCRIPT_8" class="blue">Access to Database Schemas</a></li>

</ul>

<p><s><i>7.31</i></s> <a href="../abenamdp_hdb_sqlscript">7.40</a> <b>7.54</b></p>
<p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP &#x2212; Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_language_external_data" class="blue">Processing External Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_sql" class="blue">ABAP Database Access</a>&#xA0;&#x2192;&#xA0;
<a href="../abenamdp" class="blue">AMDP - ABAP Managed Database Procedures</a>&#xA0;&#x2192;&#xA0;
<a href="../abenamdp_methods" class="blue">AMDP - Methods</a>&#xA0;&#x2192;&#xA0;
<a href="../abapmethod_by_db_proc" class="blue">METHOD - BY DATABASE PROCEDURE, FUNCTION</a>&#xA0;</small>
<br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>Before AS ABAP is able to manage SQL Script procedures and functions on the SAP HANA database, it requires the following authorizations as a user of the database system:</li>

<p></ul>
<ul class="circlem2"></p>
<li>Privilege <span class="qtext400">Execute</span> on the object <span class="qtext400">GET_PROCEDURE_OBJECTS</span> of the schema <span class="qtext400">SYS</span></li>

<p></ul>
<ul class="circlem2"></p>
<li>Privilege <span class="qtext400">Execute</span> on the object <span class="qtext400">TRUNCATE_PROCEDURE_OBJECTS</span> of the schema <span class="qtext400">SYS</span></li>

<p></ul>
<dd>
Further authorizations are required for debugging AMDP methods in the
<a href="../abenadt_glosry" class="grey" title="Glossary Entry">ABAP Development Tools (ADT)</a>. Missing authorizations can be detected using transaction <span class="lnkgrey">SICK</span>.
</dd>
<ul></p>
<li>When used in AMDP, SQL Script replaces calls of database procedures using
<a href="../abendatabase_proc_proxy_glosry" class="grey" title="Glossary Entry">database procedure
proxies</a> and the statement <a href="../abapcall_database_procedure" class="blue"><span class="qtext">CALL
DATABASE PROCEDURE</span></a>. The required procedure can either be implemented in full in an AMDP method
or an existing database procedure can be called from an AMDP method. In this case, the AMDP method replaces the database procedure proxy. Database procedure proxies are still recommended for scenarios in which
<a href="../abensecondary_db_connection_glosry" class="grey" title="Glossary Entry">secondary connections</a> are used to access existing procedures in SAP HANA database alongside the current
<a href="../abenstandard_db_glosry" class="grey" title="Glossary Entry">standard AS ABAP database</a>.</li>

<p></ul>
<a name="@@ITOC@@ABENAMDP_HDB_SQLSCRIPT_1"></a>
</div></p>
<h2 id="amdp-procedures-and-functions-in-sap-hana">AMDP procedures and functions in SAP HANA</h2>
<p>The SQLScript implementation of an AMDP method with the name <code style="display: inline;"><span class="qtext">meth</span></code> and an
AMDP class <code style="display: inline;"><span class="qtext">class</span></code> is saved by the ABAP runtime environment as an SQLScript procedure under the name <span class="qtext400">CLASS=&gt;METH</span> in the
<a href="../abenabap_db_schema_glosry" class="grey" title="Glossary Entry">ABAP database schema</a>
of the SAP HANA database. Note that these names are case-sensitive when used in the database system.
AS ABAP is responsible for all transports, administration, and access control. SQLScript procedures and functions managed using AMDP can be accessed as follows:</p>
<ul>

<li>Calls from ABAP</li>

</ul>

<ul class="circlem2">

<li>Call of an <a href="../abenamdp_procedure_glosry" class="grey" title="Glossary Entry">AMDP procedure</a> or
<a href="../abenamdp_table_function_glosry" class="grey" title="Glossary Entry">AMDP
scalar function</a> with standard method call <a href="../abapcall_method_static_short" class="blue"><span class="qtext">meth( ...
)</span></a> in ABAP programs. For <code style="display: inline;"><span class="qtext">meth</span></code>, the associated <a href="../abenamdp_procedure_methods" class="blue">AMDP procedure implementation</a> is specified.</li>

</ul>

<ul class="circlem2">

<li>Calls an <a href="../abenamdp_table_function_glosry" class="grey" title="Glossary Entry">
AMDP table function</a> by specifying the assigned <a href="../abencds_table_function_glosry" class="grey" title="Glossary Entry">
</a><a href="../abencds_table_function_glosry" class="grey" title="Glossary Entry">CDS</a> table function or a
<a href="../abencds_table_function_glosry" class="grey" title="Glossary Entry">CDS view</a> that uses a CDS table function in an ABAP SQL read statement.</li>

</ul>

<ul>

<li>Calls from other AMDP procedures or functions</li>

</ul>

<ul class="circlem2">

<li>An AMDP procedure or function implemented using SQL Script in the same class or a different class can call another AMDP procedure with the usual
<a href="https://help.sap.com/viewer/de2486ee947e43e684d39702027f8a94/2.0.00/en-US" target="blank" class="blue">SQLScript syntax</a>: <br>
 <br><span class="qtext400">CALL &quot;CLASS=&gt;METH&quot;( f1 =&gt; a1, f2 =&gt; a2, ... );</span> <br> <br>The called
AMDP procedure implementation <span class="qtext400">CLASS=&gt;METH</span> must be specified after the
addition <a href="../abapmethod_by_db_proc" class="blue"><code style="display: inline;"><span class="qtext">USING</span></code></a> of the
calling method. The usual visibility rules from ABAP Objects apply. A database procedure or database
function implemented in a class cannot call a procedure implemented in a private AMDP procedure implementation of a different class, unless a friendship exists between the classes.</li>

</ul>

<ul class="circlem2">

<li>An AMDP procedure or function implemented using SQLScript in the same class or a different class can call another AMDP function implemented with SQLScript using the usual
<a href="https://help.sap.com/viewer/de2486ee947e43e684d39702027f8a94/2.0.00/en-US" target="blank" class="blue">SQLScript syntax</a>: <br>
 <br><span class="qtext400">SELECT ... FROM &quot;CLASS=&gt;METH&quot;( f1 =&gt; a1, f2 =&gt; a2, ... );</span> <br> <br>The
specified AMDP function implementation <span class="qtext400">CLASS=&gt;METH</span> must be specified after
the addition <a href="../abapmethod_by_db_proc" class="blue"><code style="display: inline;"><span class="qtext">USING</span></code></a> of the calling method. An AMDP function implementation is always public.</li>

</ul>

<ul>

<li>Calls from regular database procedures</li>

</ul>

<dd>
An SQLScript procedure or function created in the regular way in
<a href="../abensap_web_ide_for_sap_han_glosry" class="grey" title="Glossary Entry">SAP Web IDE for
SAP HANA</a> or using Native SQL can call an SQLScript procedure or function implemented in an AMDP method or access an SQLScript function, if the procedure or function exists in the database system. This is
<a href="../abendatabase_access_recomm" class="blue">not recommended</a>, however, since the AMDP procedures
and functions are managed in AS ABAP and consistency can only be guaranteed for other AMDP procedures and functions from the same AS ABAP.
</dd>

<ul>

<li>Access In <a href="../abensap_web_ide_for_sap_han_glosry" class="grey" title="Glossary Entry">SAP Web IDE for SAP HANA</a></li>

</ul>

<dd>
Once the ABAP runtime environment has created an SQL Script procedure or function managed by AMDP in the database system, it is visible in
<a href="../abensap_web_ide_for_sap_han_glosry" class="grey" title="Glossary Entry">SAP Web IDE for
SAP HANA</a> and can even be edited. This is not recommended, however, since changes like this are ignored by the implementation in the AMDP method and can be overwritten by the ABAP runtime environment at any time.
</dd>

<p><a name="@@ITOC@@ABENAMDP_HDB_SQLSCRIPT_2"></a></p>
<h2 id="syntax">Syntax</h2>
<p><pre><code class="hljs abap abap-docs-syntax-block">
The syntax of a <a href="../abensql_script_procedure_glosry" class="grey" title="Glossary Entry">SQL Script procedure</a> or
<a href="../abensql_script_function_glosry" class="grey" title="Glossary Entry">function</a> written in SQL Script is exactly as described under
<a href="https://help.sap.com/viewer/de2486ee947e43e684d39702027f8a94/2.0.00/en-US" target="blank" class="blue">SAP
Hana SQLScript Reference</a>, with one exception: The character <span class="qtext"><em></span> at the start of a line indicates a
<a href="../abencomment" class="blue">comment line</a>, as in ABAP. When the procedure or function
is saved in the database system, the asterisk, <span class="qtext"></em></span>, is transformed to the usual double hyphens, <span class="qtext400">--</span>.</p>
<p>All SQL Script operators <span class="qtext400">CE_...</span> that support views can be used. SQL Script
operators, which do not support any views (for example, <span class="qtext400">CE_COLUMN_TABLE</span> only works with the technical attribute <span class="qtext400">Column Store</span>) cannot be used.</p>
<p>In an SQLScript procedure, the function <span class="qtext400">SESSION_CONTEXT</span> is used for read access to the
<a href="../abensession_variable_glosry" class="grey" title="Glossary Entry">session variables</a> in the SAP HANA database. When called from ABAP, the
<a href="../abenhana_session_variables" class="blue">ABAP-specific session variables</a> are set to the values of the corresponding ABAP system fields. When accessing a
<a href="../abenamdp_table_function_glosry" class="grey" title="Glossary Entry">CDS table function</a> implemented in an
<a href="../abencds_table_function_glosry" class="grey" title="Glossary Entry">AMDP table function</a>
via ABAP SQL, the session variable <span class="qtext400">CDS_CLIENT</span> is the optional value set
in addition <a href="../abapselect_client" class="blue"><span class="qtext">USING CLIENT</span></a>.
However, write access to session variables with SQLScript statement <span class="qtext400">SET</span> is not permitted in an SQLScript procedure or function.
</code></pre>
<br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>Support for ABAP comments introduced using <code style="display: inline;"><span class="qtext">*</span></code> enables the use of change
entries inserted by the <span class="italic">Modification Assistant</span> tool in ABAP programs. This property should not be used when creating AMDP methods in the regular way.</li>

<p></ul>
<ul></p>
<li>The syntax is checked only on an AS ABAP whose standard database is a SAP HANA database. Here, a temporary database procedure or function is created that checks the syntax.</li>

<p></ul>
<ul></p>
<li>The use of the dynamic options under SQLScript syntax is strongly discouraged due to the reasons specified under
<a href="../abenamdp" class="blue">AMDP</a>. This applies in particular to statements such as <span class="qtext400">
EXEC</span>, <span class="qtext400">EXECUTE IMMEDIATE</span>, or <span class="qtext400">APPLY FILTER</span>.</li>

<p></ul>
<a name="@@ITOC@@ABENAMDP_HDB_SQLSCRIPT_3"></a>
</div></p>
<h2 id="parameter-interface">Parameter Interface</h2>
<p>As shown in the <a href="../abenamdp_hdb_sqlscript_mapping" class="blue">mapping tables</a>, the elementary ABAP types of interface parameters of an AMDP method are mapped to the appropriate types in SQLScript.</p>
<p><a name="@@ITOC@@ABENAMDP_HDB_SQLSCRIPT_4"></a></p>
<h3 id="sqlscript-procedures">SQLScript Procedures</h3>
<p>The parameter interface of an <a href="../abensql_script_procedure_glosry" class="grey" title="Glossary Entry">
SQL Script procedure</a> uses input parameters declared using <span class="qtext400">IN</span>, output
parameters declared using <span class="qtext400">OUT</span>, and input/output parameters declared using
<span class="qtext400">INOUT</span>&#x200E;. All parameters can be scalar and tabular with the exception
of input/output parameters, which can only be scalar. When used in the procedure, certain operand positions expect or allow the name of an input parameter to be prefixed with a colon (<span class="qtext400">:</span>).</p>
<p>The parameter interface of an <a href="../abenamdp_procedure_methods" class="blue">AMDP procedure implementation</a> that implements an SQL Script procedure is transformed accordingly:</p>
<ul>

<li>An input parameter of the method defined using <code style="display: inline;"><span class="qtext">IMPORTING</span></code> becomes an input parameter of the procedure declared using <span class="qtext400">IN</span>.</li>

</ul>

<ul>

<li>An output parameter of the method defined using <code style="display: inline;"><span class="qtext">EXPORTING</span></code> becomes an output parameter of the procedure declared using <span class="qtext400">OUT</span>.</li>

</ul>

<ul>

<li>If <code style="display: inline;"><span class="qtext">CHANGING</span></code> is used to define a</li>

</ul>

<ul class="circlem2">

<li>scalar input/output parameter of the method, the parameter becomes an input/output parameter of the database procedure declared using <span class="qtext400">INOUT</span> and if it is used to define a</li>

</ul>

<ul class="circlem2">

<li>tabular input/output parameter of the method, it is transformed to a pair of input and output parameters
declared using <span class="qtext400">IN</span> and <span class="qtext400">OUT</span> on the database,
since SQL Script does not support <span class="qtext400">INOUT</span> parameters. The <span class="qtext400">OUT</span>
parameter has the name of the <code style="display: inline;"><span class="qtext">CHANGING</span></code> parameter and is used instead of this
parameter in the AMDP procedure. The <span class="qtext400">IN</span> parameter is created with an internal
name comprising the name of the <code style="display: inline;"><span class="qtext">CHANGING</span></code> parameter and a postfix <span class="qtext400">__IN__</span>.
The <span class="qtext400">IN</span> parameter is assigned to the <span class="qtext400">OUT</span>
parameter before the start of the actual AMDP procedure. This transformation and the associated call are generally transparent for all ABAP developers. It becomes visible only when the database procedure is displayed, for example, in
<a href="../abensap_web_ide_for_sap_han_glosry" class="grey" title="Glossary Entry">SAP Web IDE for SAP HANA</a> or called from another database procedure (see the
<a href="../abenamdp_changing_abexa" class="blue">executable example</a>).</li>

</ul>

<p>Elementary and tabular method parameters become scalar and tabular parameters of the database procedure respectively. As well as the restrictions for the parameter interface of an AMDP method described under
<a href="../abenamdp" class="blue">AMDP</a>, the following restrictions apply in the implementation with SQL Script:</p>
<ul>

<li>An <a href="../abeninput_output_parameter_glosry" class="grey" title="Glossary Entry">input/output
parameter</a> declared using <a href="../abapmethods_general" class="blue"><code style="display: inline;"><span class="qtext">CHANGING</span></code></a>
cannot have the type <code style="display: inline;"><span class="qtext">string</span></code> or <code style="display: inline;"><span class="qtext">xstring</span></code>. An exception this rule are parameters that are typed with reference to the predefined type
<a href="../abenddic_builtin_types" class="blue">SSTRING</a> ABAP Dictionary.</li>

</ul>

<ul>

<li>The length of a parameter typed with the type <code style="display: inline;"><span class="qtext">c</span></code> or <code style="display: inline;"><span class="qtext">n</span></code> is restricted to a maximum of 5000 characters.</li>

</ul>

<ul>

<li>Parameters of the types <code style="display: inline;"><span class="qtext">f</span></code>, <code style="display: inline;"><span class="qtext">decfloat16</span></code>, <span class="qtext">
decfloat34</span>, <code style="display: inline;"><span class="qtext">string</span></code>, and <code style="display: inline;"><span class="qtext">xtring</span></code> cannot be
assigned a replacement value using <a href="../abapmethods_parameters" class="blue"><code style="display: inline;"><span class="qtext">DEFAULT</span></code></a>, which means they cannot be optional parameters.</li>

</ul>

<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>In SQL Script, tabular parameters are handled as temporary database tables. An internal table passed to SQL Script can be accessed there just like a database table.</p>
<p><a name="@@ITOC@@ABENAMDP_HDB_SQLSCRIPT_5"></a>
</div></p>
<h3 id="sqlscript-functions">SQLScript Functions</h3>
<p>The parameter interfaces of an <a href="../abensql_script_function_glosry" class="grey" title="Glossary Entry">
SQLScript function</a> supports input parameters declared using <span class="qtext400">IN</span> and
a return value declared using <span class="qtext400">RETURNS</span>. The input parameters of a scalar
function must be scalar and the input parameters of a table function can be scalar and tabular. The return value of a scalar function is scalar and the return value of a table function is tabular.</p>
<p>The parameter interface of an <a href="../abenamdp_function_methods" class="blue">AMDP function implementation</a> that implements an SQL Script procedure is transformed accordingly:</p>
<ul>

<li>An input parameter of the method defined using <code style="display: inline;"><span class="qtext">IMPORTING</span></code> becomes an input parameter of the function declared using <span class="qtext400">IN</span>.</li>

</ul>

<ul>

<li>The tabular return value of the method defined using <code style="display: inline;"><span class="qtext">RETURN</span></code> becomes the tabular return value of the procedure declared using <span class="qtext400">RETURNS</span>.</li>

</ul>

<p>The same restrictions apply as in SQLScript procedures, as well as the following:</p>
<ul>

<li>AMDP scalar functions cannot have any output parameters except the return value.</li>

</ul>

<ul>

<li>AMDP table functions for <a href="../abencds_table_function_glosry" class="grey" title="Glossary Entry">CDS table functions</a> can only have scalar input parameters.</li>

</ul>

<p><a name="@@ITOC@@ABENAMDP_HDB_SQLSCRIPT_6"></a></p>
<h2 id="use">Use</h2>
<p>As described above, SQL Script procedures and functions managed in the SAP HANA database using AMDP
can be used in ABAP programs and in other AMDP procedures. How they can be used is determined by the
visibility of the AMDP methods. Recursive and cyclical calls are forbidden in the HANA database system, which means that</p>
<ul>

<li>an SQLScript procedure or function cannot use itself</li>

</ul>

<ul>

<li>an AMDP method that implements an SQLScript procedure cannot call any database procedures or use any database functions that themselves use the AMDP procedure or function.</li>

</ul>

<p>Furthermore, an AMDP procedure or function can use regular SQL Script procedures and functions created in
<a href="../abensap_web_ide_for_sap_han_glosry" class="grey" title="Glossary Entry">SAP Web IDE for
SAP HANA</a> or using Native SQL. These procedures or functions cannot and must not be specified after
the addition <a href="../abapmethod_by_db_proc" class="blue"><code style="display: inline;"><span class="qtext">USING</span></code></a> of the calling AMDP method.</p>
<p><a name="@@ITOC@@ABENAMDP_HDB_SQLSCRIPT_7"></a></p>
<h2 id="access-to-abap-types">Access to ABAP Types</h2>
<p>In an SQLScript procedure, the <span class="qtext400">
<a href="../abenamdp_macro_glosry" class="grey" title="Glossary Entry">AMDP macro</a></span>
<a href="../abenamdp_abap_types" class="blue">$ABAP.type</a> can be used to access ABAP types, which are assigned to corresponding types of SQLScript in the
<a href="../abenamdp_hdb_sqlscript_mapping" class="blue">mapping tables</a>.</p>
<p><a name="@@ITOC@@ABENAMDP_HDB_SQLSCRIPT_8"></a></p>
<h2 id="access-to-database-schemas">Access to Database Schemas</h2>
<p>In an SQLScript procedure, it is possible to access objects in the same database schema directly. The
name of the current database schema must not be specified here. To access an object in another database
schema, its name can be prefixed and separated by a period (as usual in SQLScript). As well as specifying the name directly, the <span class="qtext400">
<a href="../abenamdp_macro_glosry" class="grey" title="Glossary Entry">AMDP macro</a></span>
<a href="../abenamdp_logical_db_schemas" class="blue">$ABAP.schema</a> can be used to specify a
<a href="../abenlogical_schema_glosry" class="grey" title="Glossary Entry">logical schema</a> to which a physical database schema is mapped.</p>
<h3 id="executable-examples">Executable Examples</h3>
<p><a href="../abenamdp_abexas" class="blue">AMDP - Examples</a></p>
<h3 id="continue">Continue</h3>
<p><a href="../abenamdp_hdb_sqlscript_mapping" class="blue">AMDP - Mapping of ABAP Types to SQLScript</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../abenamdp_hdb_l_internal/" title="AMDP - L for the SAP HANA Database" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                AMDP - L for the SAP HANA Database
              </div>
            </div>
          </a>
        
        
          <a href="../abenamdp_hdb_sqlscript_mapping/" title="AMDP - Mapping of ABAP Types to SQLScript" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                AMDP - Mapping of ABAP Types to SQLScript
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>