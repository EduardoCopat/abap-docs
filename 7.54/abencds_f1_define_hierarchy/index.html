


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abencds f1 define hierarchy - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#abap-cds-define-hierarchy" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abencds f1 define hierarchy
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
    <nav class="md-nav" aria-label="Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extras" class="md-nav__link">
    Extras
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-1" class="md-nav__link">
    Addition 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_1" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-2" class="md-nav__link">
    Addition 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_2" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-3" class="md-nav__link">
    Addition 3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_3" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-4" class="md-nav__link">
    Addition 4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_4" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-5" class="md-nav__link">
    Addition 5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_5" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-6" class="md-nav__link">
    Addition 6
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_6" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-7" class="md-nav__link">
    Addition 7
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_7" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-8" class="md-nav__link">
    Addition 8
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_8" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-9" class="md-nav__link">
    Addition 9
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_9" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-10" class="md-nav__link">
    Addition 10
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_10" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-11" class="md-nav__link">
    Addition 11
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_11" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addition-12" class="md-nav__link">
    Addition 12
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effect_12" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#continue" class="md-nav__link">
    Continue
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abencds_f1_define_hierarchy.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_dictionary" class="blue">ABAP - Dictionary</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds" class="blue">ABAP CDS in ABAP Dictionary</a>&#xA0;&#x2192;&#xA0;
<a href="../abenddic_cds_entities" class="blue">ABAP CDS - Data Definitions</a>&#xA0;&#x2192;&#xA0;
<a href="../abencds_f1_ddl_syntax" class="blue">ABAP CDS - DDL for Data Definitions</a>&#xA0;</small></p>
<h1 id="abap-cds-define-hierarchy">ABAP CDS - DEFINE HIERARCHY</h1>
<p><a name="@@ITOC@@ABENCDS_F1_DEFINE_HIERARCHY_1"></a>
Other versions: 
 <s><i>7.31</i></s> | <s><i>7.40</i></s> | <b>7.54</b></p>
<h2 id="syntax">Syntax</h2>
<p><pre><code class="hljs abap abap-docs-syntax-block">
<span class="qtext400"><i class="bn">[</i><a href="../abencds_f1_entity_annotations" class="blue">@entity_annot1</a><i class="bn">]</i> <br>
<i class="bn">[</i><a href="../abencds_f1_entity_annotations" class="blue">@entity_annot2</a><i class="bn">]</i> <br>
... <br><i class="bn">[</i><a href="../abencds_f1_hierarchy_annotations" class="blue">@hierarchy_annot1</a><i class="bn">]</i> <br>
<i class="bn">[</i><a href="../abencds_f1_hierarchy_annotations" class="blue">@hierarchy_annot2</a><i class="bn">]</i> <br>
... <br><i class="bn">[</i>DEFINE<i class="bn">]</i> HIERARCHY cds_entity <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0; <i class="bn">[</i><a href="../abencds_f1_hiera_parameter_list" class="blue">parameter_list</a><i class="bn">]</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; AS PARENT CHILD HIERARCHY( <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; SOURCE cds_view <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; CHILD TO PARENT ASSOCIATION _hierarchy_assoc <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <i class="bn">[</i>PERIOD FROM field1 TO field2 VALID FROM from TO to<i class="bn">]</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <i class="bn">[</i>DIRECTORY _directory_assoc FILTER BY cond_expr<i class="bn">]</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <i class="bn">[</i>START WHERE cond_expr<i class="bn">]</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; SIBLINGS ORDER BY field1 <i class="bn">[</i>ASCENDING<i class="bn">|</i>DESCENDING<i class="bn">]</i><i class="bn">[</i>, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; field2 <i class="bn">[</i>ASCENDING<i class="bn">|</i>DESCENDING<i class="bn">]</i>, ...<i class="bn">]</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <i class="bn">[</i>DEPTH depth<i class="bn">]</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <i class="bn">[</i>NODETYPE node_type<i class="bn">]</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <i class="bn">[</i>MULTIPLE PARENTS <i class="bn">{</i>NOT ALLOWED<i class="bn">}</i><i class="bn">|</i>LEAVES<i class="bn">|</i>ALLOWED<i class="bn">]</i> <br>&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <i class="bn">[</i>ORPHANS IGNORE<i class="bn">|</i>ERROR<i class="bn">|</i>ROOT<i class="bn">]</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <i class="bn">[</i>CYCLES ERROR<i class="bn">|</i>BREAKUP<i class="bn">]</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; <i class="bn">[</i>GENERATE SPANTREE<i class="bn">]</i> ) <br>
&#xA0;&#xA0;&#xA0;&#xA0; { <a href="../abencds_f1_hiera_element_list" class="blue">element_list</a> }</span> 
</code></pre></p>
<h3 id="extras">Extras</h3>
<p><a href="#!ABAP_ADDITION_1@1@" class="blue"> 1. <span class="qtext400">... SOURCE cds_view</span> </a> <br>
<br><a href="#!ABAP_ADDITION_2@2@" class="blue"> 2. <span class="qtext400">... CHILD TO PARENT ASSOCIATION _hierarchy_assoc</span> </a> <br>
<br><a href="#!ABAP_ADDITION_3@3@" class="blue"> 3. <span class="qtext400">... PERIOD FROM field1 TO field2 VALID FROM from TO to</span> </a> <br>
<br><a href="#!ABAP_ADDITION_4@4@" class="blue"> 4. <span class="qtext400">... DIRECTORY _directory_assoc FILTER BY cond_expr</span> </a> <br>
<br><a href="#!ABAP_ADDITION_5@5@" class="blue"> 5. <span class="qtext400">... START WHERE cond_expr</span> </a> <br>
<br><a href="#!ABAP_ADDITION_6@6@" class="blue"> 6. <span class="qtext400">... SIBLINGS ORDER BY field1 <i class="bn">[</i>ASCENDING<i class="bn">|</i>DESCENDING<i class="bn">]</i>, ...</span> </a> <br>
<br><a href="#!ABAP_ADDITION_7@7@" class="blue"> 7. <span class="qtext400">... DEPTH depth</span> </a> <br>
<br><a href="#!ABAP_ADDITION_8@8@" class="blue"> 8. <span class="qtext400">... NODETYPE node_type</span> </a> <br>
<br><a href="#!ABAP_ADDITION_9@9@" class="blue"> 9. <span class="qtext400">... MULTIPLE PARENTS <i class="bn">{</i>NOT ALLOWED<i class="bn">}</i><i class="bn">|</i><i class="bn">{</i>LEAVES ONLY<i class="bn">}</i><i class="bn">|</i>ALLOWED</span> </a> <br>
<br><a href="#!ABAP_ADDITION_10@10@" class="blue"> 10. <span class="qtext400">... ORPHANS IGNORE<i class="bn">|</i>ERROR<i class="bn">|</i>ROOT</span> </a> <br>
<br><a href="#!ABAP_ADDITION_11@11@" class="blue"> 11. <span class="qtext400">... CYCLES ERROR<i class="bn">|</i>BREAKUP</span> </a> <br>
<br><a href="#!ABAP_ADDITION_12@12@" class="blue"> 12. <span class="qtext400">... GENERATE SPANTREE</span> </a>  </p>
<h3 id="effect">Effect</h3>
<p>Defines a <a href="../abencds_entity_glosry" class="grey" title="Glossary Entry">CDS entity</a> <span class="qtext400">cds_entity</span> as a
<a href="../abencds_hierarchy_glosry" class="grey" title="Glossary Entry">CDS hierarchy</a> in the
<a href="../abencds_ddl_glosry" class="grey" title="Glossary Entry">CDS DDL</a>. A CDS hierarchy has a tabular results set whose rows construct
<a href="../abenpcr_glosry" class="grey" title="Glossary Entry">parent-child relationships</a>. When a CDS hierarchy is accessed as the data source of a
<a href="../abenopen_sql_glosry" class="grey" title="Glossary Entry">ABAP SQL</a> query, it is handled like a
<a href="../abenhierarchy_glosry" class="grey" title="Glossary Entry">hierarchy</a> in which additional
<a href="../abenhierarchy_column_glosry" class="grey" title="Glossary Entry">hierarchy columns</a> can be selected.</p>
<ul>

<li><a href="../abencds_f1_entity_annotations" class="blue"><span class="qtext400">@entity_annot</span></a>
and <a href="../abencds_f1_hierarchy_annotations" class="blue"><span class="qtext400">@hierarchy_annot</span></a> can be used to specify optional
<a href="../abencds_annotation_glosry" class="grey" title="Glossary Entry">annotations</a> for the CDS hierarchy.</li>

</ul>

<ul>

<li><a href="../abencds_f1_hiera_parameter_list" class="blue"><span class="qtext400">parameter_list</span></a> is used to declare a list of optional input parameters for the CDS hierarchy.</li>

</ul>

<ul>

<li><a href="../abencds_f1_hiera_element_list" class="blue"><span class="qtext400">element_list</span></a> is used to declare the elements of the CDS hierarchy.</li>

</ul>

<p>The additions in parentheses after <span class="qtext400">AS PARENT CHILD HIERARCHY</span> define the way the hierarchy is created:</p>
<ul>

<li><span class="qtext400">SOURCE</span> must be followed by a CDS view <span class="qtext400">cds_view</span> as the source of the hierarchy.</li>

</ul>

<ul>

<li><span class="qtext400">CHILD TO PARENT ASSOCIATION</span> must be followed by a
<a href="../abenhierarchy_association_glosry" class="grey" title="Glossary Entry">hierarchy association</a>
<span class="qtext400">_hierarchy_assoc</span> published by the source <span class="qtext400">cds_view</span>.
The source data source and target data source of this association must be the source <span class="qtext400">cds_view</span>. The <span class="qtext400">ON</span> condition of the hierarchy association defines the
<a href="../abenpcr_glosry" class="grey" title="Glossary Entry">parent-child relationships</a> between the
<a href="../abenhierarchy_node_glosry" class="grey" title="Glossary Entry">hierarchy nodes</a>.</li>

</ul>

<ul>

<li><span class="qtext400">START WHERE</span> can be followed by a start condition that defines
<a href="../abenroot_node_glosry" class="grey" title="Glossary Entry">root nodes</a> for the
<a href="../abenroot_node_set_glosry" class="grey" title="Glossary Entry">root node set</a> of the hierarchy. The hierarchy consists of the root nodes of the root node set and their
<a href="../abendescendant_node_glosry" class="grey" title="Glossary Entry">descendant nodes</a>. If <span class="qtext400">START WHERE</span> is not specified, the root node set consists of all
<a href="../abenparent_node_glosry" class="grey" title="Glossary Entry">parent nodes</a> that contain its initial value.</li>

</ul>

<p>All other additions define further properties of the hierarchy. The rows of the tabular results set of the CDS hierarchy are the
<a href="../abenhierarchy_node_glosry" class="grey" title="Glossary Entry">hierarchy nodes</a> of the new hierarchy but without its
<a href="../abenhierarchy_column_glosry" class="grey" title="Glossary Entry">hierarchy columns</a>.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>The syntax and functions of a CDS hierarchy overlap to a large extent with the
<a href="../abenhierarchy_generator_glosry" class="grey" title="Glossary Entry">hierarchy
generator</a> <a href="../abenselect_hierarchy_generator" class="blue"><code style="display: inline;"><span class="qtext">HIERARCHY</span></code></a> in ABAP SQL</li>

<p></ul>
<ul></p>
<li>Unlike in ABAP SQL, however, ABAP CDS cannot access the additional
<a href="../abenhierarchy_column_glosry" class="grey" title="Glossary Entry">hierarchy columns</a> of a CDS hierarchy. Instead, the associated
<a href="../abenhierarchy_attribute_glosry" class="grey" title="Glossary Entry">hierarchy attributes</a> must be entered in the
<a href="../abencds_f1_hiera_element_list" class="blue">element list</a> of the CDS hierarchy if required.</li>

<p></ul>
<ul></p>
<li>On <a href="../abenhana_database_glosry" class="grey" title="Glossary Entry">SAP HANA databases</a>,
the results sets of CDS hierarchies plus the hierarchy generator <code style="display: inline;"><span class="qtext">HIERARCHY</span></code>
are created by using the SAP HANA hierarchy generator function <span class="qtext400">HIERARCHY</span> and similar. More information can be found in the
<a href="https://help.sap.com/viewer/4fe29514fd584807ac9f2a04f6754767/2.0.03/en-US" target="blank" class="blue">documentation</a>.</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Defines a simple CDS hierarchy. The program <span class="lnkgrey">DEMO_HIERARCHY_TREE</span> accesses the CDS hierarchy and compares this with accesses to similar hierarchies in ABAP SQL.</p>
<dd>
<span class="qtext400">define hierarchy DEMO_CDS_SIMPLE_TREE <br>&#xA0;&#xA0;with parameters <br>&#xA0;&#xA0;&#xA0;&#xA0;p_id : abap.int4 <br>
&#xA0;&#xA0;as parent child hierarchy( <br>&#xA0;&#xA0;&#xA0;&#xA0;source <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;DEMO_CDS_SIMPLE_TREE_SOURCE <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;child to parent association _tree <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;start where <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id = :p_id <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;siblings order by <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id ascending <br>&#xA0;&#xA0;&#xA0;&#xA0;) <br>&#xA0;&#xA0;&#xA0;&#xA0;{ <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;parent, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;name <br>&#xA0;&#xA0;&#xA0;&#xA0;}</span>

</dd>

</div>

<h3 id="addition-1">Addition 1</h3>
<p><span class="qtext400">... SOURCE cds_view</span>   <br><!-- /A --></p>
<h3 id="effect_1">Effect</h3>
<p>The mandatory addition <span class="qtext400">SOURCE</span> specifies a
<a href="../abencds_view_glosry" class="grey" title="Glossary Entry">CDS view</a> as a source of the CDS hierarchy. This source must
<a href="../abencds_f1_select_list_association" class="blue">publish</a> the
<a href="../abenhierarchy_association_glosry" class="grey" title="Glossary Entry">hierarchy association</a>
specified after <span class="qtext400">CHILD TO PARENT ASSOCIATION</span> in its <span class="qtext400">SELECT</span> list.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>CDS views are currently the only <a href="../abencds_entity_glosry" class="grey" title="Glossary Entry">CDS
entities</a> that can be specified as the source of a CDS hierarchy. More specifically, a CDS hierarchy cannot be the source of another CDS hierarchy.  </p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The CDS hierarchy of the previous example uses the following CDS view as a source:</p>
<dd>
<span class="qtext400">@AbapCatalog.sqlViewName: &apos;DEMOTREESOURCE&apos; <br>@AccessControl.authorizationCheck: #NOT_REQUIRED <br>
define view DEMO_CDS_SIMPLE_TREE_SOURCE <br>&#xA0;&#xA0;as select from <br>&#xA0;&#xA0;&#xA0;&#xA0;demo_simple_tree <br>
&#xA0;&#xA0;&#xA0;&#xA0;association [1..1] to DEMO_CDS_SIMPLE_TREE_SOURCE as _tree on <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;$projection.parent = _tree.id <br>
&#xA0;&#xA0;&#xA0;&#xA0;{ <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;_tree, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;parent_id as parent, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;name <br>&#xA0;&#xA0;&#xA0;&#xA0;}</span>

</dd>

</div>

<h3 id="addition-2">Addition 2</h3>
<p><span class="qtext400">... CHILD TO PARENT ASSOCIATION _hierarchy_assoc</span>   <br><!-- /A --></p>
<h3 id="effect_2">Effect</h3>
<p>The mandatory addition <span class="qtext400">CHILD TO PARENT ASSOCIATION</span> specifies the
<a href="../abenhierarchy_association_glosry" class="grey" title="Glossary Entry">hierarchy association</a> whose <span class="qtext400">ON</span> condition selects the
<a href="../abendescendant_node_glosry" class="grey" title="Glossary Entry">descendant nodes</a> of the
<a href="../abenroot_node_set_glosry" class="grey" title="Glossary Entry">root node set</a>. The hierarchy association must be published by the CDS view specified after <span class="qtext400">SOURCE</span>.</p>
<p>The hierarchy association defines the parent-child relationship between the <a href="../abenhierarchy_node_glosry" class="grey" title="Glossary Entry">hierarchy nodes</a>. The following conditions apply here:</p>
<ul>

<li>The CDS association must be a <a href="../abenself_association_glosry" class="grey" title="Glossary Entry">self-association</a>.</li>

</ul>

<ul>

<li>Only equality comparisons with the operator <span class="qtext400">=</span> and joined using <span class="qtext400">AND</span> can occur in the <span class="qtext400">ON</span> condition of the CDS association.</li>

</ul>

<ul>

<li>In each comparison in the <span class="qtext400">ON</span> condition, one field of the source data
source must be compared with a field (prefixed with <span class="qtext400">_hierarchy_assoc</span>) of the target data source.</li>

</ul>

<ul>

<li>The source data source of the CDS association cannot contain any fields that have the same name as a
<a href="../abencds_hierarchy_attributes" class="blue">hierarchy attribute</a>. An alternative element name must be defined for these fields.</li>

</ul>

<p>Each row of the results set of the source <span class="qtext400">hierarchy_source</span> that meets the <span class="qtext400">ON</span> condition for an existing hierarchy node is included recursively in the hierarchy as its
<a href="../abenchild_node_glosry" class="grey" title="Glossary Entry">child node</a> (if this is possible).</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>The optional additions define further conditions specifying whether a row can be included as a hierarchy node or not.</p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The CDS view of the previous example publishes its association <span class="qtext400">_tree</span>. This CDS association meets all requirements of a hierarchy association and can be used as one.  </p>
</div>

<h3 id="addition-3">Addition 3</h3>
<p><span class="qtext400">... PERIOD FROM field1 TO field2 VALID FROM from TO to</span>   <br><!-- /A --></p>
<h3 id="effect_3">Effect</h3>
<p>The optional addition <span class="qtext400">PERIOD</span> defines the hierarchy as a
<a href="../abentemporal_hierarchy_glosry" class="grey" title="Glossary Entry">temporal hierarchy</a> in which the hierarchy nodes are limited by an adjustment of time intervals.</p>
<ul>

<li><span class="qtext400">field1</span> and <span class="qtext400">field2</span> are used to specify the fields of the source <span class="qtext400">cds_view</span> that define the lower and upper limits of a
<a href="../abenperiod_glosry" class="grey" title="Glossary Entry">period</a> in the hierarchy data.
<span class="qtext400">field1</span> and <span class="qtext400">field2</span> must be different fields of the same data type. This can be:</li>

</ul>

<ul class="circlem2">

<li>The built-in type <a href="../abenddic_builtin_types" class="blue">DATS</a> of ABAP Dictionary.</li>

</ul>

<ul class="circlem2">

<li>A data type that is defined by one of the <a href="../abendata_element_glosry" class="grey" title="Glossary Entry">
data elements</a> <span class="lnkgrey">TIMESTAMP</span> or <span class="lnkgrey">TIMESTAMPL</span>.</li>

</ul>

<ul>

<li><span class="qtext400">from</span> and <span class="qtext400">to</span> define the lower and upper limit of a time interval that acts as a condition for the periods of the
<a href="../abenroot_node_set_glosry" class="grey" title="Glossary Entry">root node set</a>. The data
type of <span class="qtext400">from</span> and <span class="qtext400">to</span> must match the data
type of <span class="qtext400">field1</span> and <span class="qtext400">field2</span>. The following can be specified:</li>

</ul>

<ul class="circlem2">

<li>Parameters from the <a href="../abencds_f1_hiera_parameter_list" class="blue">parameter list</a>
of the hierarchy. Here, only the syntax <a href="../abencds_f1_parameter" class="blue"><span class="qtext400">$parameters.pname</span></a>
is possible, and not <a href="../abencds_f1_parameter" class="blue"><span class="qtext400">:pname</span></a>.</li>

</ul>

<ul class="circlem2">

<li><a href="../abencds_f1_literal" class="blue">Character literals</a> whose value matches the requested data type.</li>

</ul>

<p>A temporal hierarchy is created as follows:</p>
<ul>

<li>Only <a href="../abenroot_node_glosry" class="grey" title="Glossary Entry">root nodes</a> of the
<a href="../abenroot_node_set_glosry" class="grey" title="Glossary Entry">root node set</a> in which
the period defined using <span class="qtext400">field1</span> and <span class="qtext400">field2</span>
has a non empty intersection with the time interval defined by <span class="qtext400">from</span> and <span class="qtext400">to</span> are taken into account. This intersection forms the
<a href="../abenvalidity_interval_glosry" class="grey" title="Glossary Entry">validity interval</a> of the root node.</li>

</ul>

<ul>

<li>Only <a href="../abenchild_node_glosry" class="grey" title="Glossary Entry">child nodes</a> in
which the period defined by <span class="qtext400">field1</span> and <span class="qtext400">field2</span> has a non empty intersection with the validity interval of the
<a href="../abenparent_node_glosry" class="grey" title="Glossary Entry">parent node</a> are generated. This intersection forms the
<a href="../abenvalidity_interval_glosry" class="grey" title="Glossary Entry">validity interval</a> of the child node.</li>

</ul>

<p>For temporal hierarchies, there are additional <a href="../abencds_hierarchy_attributes" class="blue">hierarchy attributes</a> VALID_FROM and VALID_UNTIL that contain the interval limits of the
<a href="../abenvalidity_interval_glosry" class="grey" title="Glossary Entry">validity interval</a> of each hierarchy node.</p>
<p>The addition <span class="qtext400">PERIOD</span> must not be used with <span class="qtext400">GENERATE SPANTREE</span>.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>The validity interval of a descendant node is always a subset of a validity interval of all ancestor
nodes. Validity intervals can only remain the same or become narrower from hierarchy level to hierarchy level, they can never get wider.</li>

<p></ul>
<ul></p>
<li>For a descendant node to belong to a temporal hierarchy, it is not sufficient for its period to
overlap with the time interval defined by <span class="qtext400">from</span> and <span class="qtext400">to</span>.
Only the validity interval of the parent node is decisive. A path of a normal hierarchy is truncated
in a temporal hierarchy at the position in which there is no intersection between the period and the preceding validity interval.</li>

<p></ul>
<ul></p>
<li>The source data source of the current <a href="../abenhierarchy_association_glosry" class="grey" title="Glossary Entry">
hierarchy association</a> must not have any fields called VALID_FROM or VALID_UNTIL. An alternative element name must be defined for these fields.</li>

<p></ul>
<ul></p>
<li>The value of <span class="qtext400">to</span> can also be less than the value of <span class="qtext400">from</span>.
However, a validity interval is formed where necessary. In contrast, if the value of the lower interval limit of the period is greater than the value of the upper interval limit, the validity interval is empty.</li>

<p></ul>
<ul></p>
<li>Additions such as <span class="qtext400">MULTIPLE PARENTS</span> or <span class="qtext400">CYCLES</span>
affect the temporal hierarchy. Nodes that would raise an exception in a normal hierarchy can be hidden in a temporal hierarchy.</li>

<p></ul>
<ul></p>
<li>To generate a temporal hierarchy, in an <a href="../abenhana_database_glosry" class="grey" title="Glossary Entry">SAP HANA database</a>, the hierarchy generator function <a href="https://help.sap.com/viewer/4f9859d273254e04af6ab3e9ea3af286/2.0.03/en-US/a93c356d32ef4e7fbd6143b554278eab.html" target="blank" class="blue">
<span class="qtext400">HIERARCHY_TEMPORAL</span></a> there is called.</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following CDS hierarchies create two temporal
<a href="../abentemporal_hierarchy_glosry" class="grey" title="Glossary Entry">hierarchies</a>. Here, date fields and time stamp fields are both used once as
<a href="../abenperiod_glosry" class="grey" title="Glossary Entry">periodes</a>.  The program <span class="lnkgrey">DEMO_HIERARCHY_TEMPORAL</span> accesses the CDS hierarchies and compares the results with the
<a href="../abenhierarchy_generator_glosry" class="grey" title="Glossary Entry">hierarchy generator</a> <a href="../abenselect_hierarchy_generator" class="blue"><code style="display: inline;"><span class="qtext">HIERARCHY</span></code></a> in
<a href="../abenopen_sql_glosry" class="grey" title="Glossary Entry">ABAP SQL</a> used in a similar
way. When <span class="lnkgrey">executed</span>, this program demonstrates how the addition <span class="qtext400">PERIOD</span> works.</p>
<dd>
<span class="qtext400">define hierarchy DEMO_CDS_PARENT_CHILD_DATE_PRD <br>&#xA0;&#xA0;with parameters <br>
&#xA0;&#xA0;&#xA0;&#xA0;p_date_from : dats, <br>&#xA0;&#xA0;&#xA0;&#xA0;p_date_to&#xA0;&#xA0; : dats <br>
&#xA0;&#xA0;as parent child hierarchy( <br>&#xA0;&#xA0;&#xA0;&#xA0;source DEMO_CDS_PARENT_CHILD_SRC_PRD <br>
&#xA0;&#xA0;&#xA0;&#xA0;child to parent association _relat <br>&#xA0;&#xA0;&#xA0;&#xA0;period from date_from to date_to <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;valid from $parameters.p_date_from&#xA0;&#xA0;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;to $parameters.p_date_to <br>
&#xA0;&#xA0;&#xA0;&#xA0;start where <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id = &apos;A&apos; <br>&#xA0;&#xA0;&#xA0;&#xA0;siblings order by <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id <br>&#xA0;&#xA0;) <br>{ <br>&#xA0;&#xA0;id, <br>&#xA0;&#xA0;parent, <br>
&#xA0;&#xA0;$node.valid_from&#xA0;&#xA0;as h_valid_from, <br>&#xA0;&#xA0;$node.valid_until as h_valid_until }</span>
</dd>

<dd>
<span class="qtext400">define hierarchy DEMO_CDS_PARENT_CHILD_TS_PRD <br>&#xA0;&#xA0;with parameters <br>
&#xA0;&#xA0;&#xA0;&#xA0;p_ts_from : timestamp, <br>&#xA0;&#xA0;&#xA0;&#xA0;p_ts_to&#xA0;&#xA0; : timestamp <br>
&#xA0;&#xA0;as parent child hierarchy( <br>&#xA0;&#xA0;&#xA0;&#xA0;source DEMO_CDS_PARENT_CHILD_SRC_PRD <br>
&#xA0;&#xA0;&#xA0;&#xA0;child to parent association _relat <br>&#xA0;&#xA0;&#xA0;&#xA0;period from ts_from to ts_to <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;valid from $parameters.p_ts_from&#xA0;&#xA0;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;to $parameters.p_ts_to <br>
&#xA0;&#xA0;&#xA0;&#xA0;start where <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id = &apos;A&apos; <br>&#xA0;&#xA0;&#xA0;&#xA0;siblings order by <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id <br>&#xA0;&#xA0;) <br>{ <br>&#xA0;&#xA0;id, <br>&#xA0;&#xA0;parent, <br>
&#xA0;&#xA0;$node.valid_from&#xA0;&#xA0;as h_valid_from, <br>&#xA0;&#xA0;$node.valid_until as h_valid_until }</span>

</dd>

</div>

<h3 id="addition-4">Addition 4</h3>
<p><span class="qtext400">... DIRECTORY _directory_assoc FILTER BY cond_expr</span>   <br><!-- /A --></p>
<h3 id="effect_4">Effect</h3>
<p>The optional addition <span class="qtext400">DIRECTORY</span> defines a filter condition <span class="qtext400">cond_expr</span>
for the rows of the source of the hierarchy specified after <span class="qtext400">SOURCE</span>. The
hierarchy is generated only from those rows in the source that meet the filter condition. <span class="qtext400">AND</span>
comparisons for equality can be specified for <span class="qtext400">cond_expr</span> using <span class="qtext400">=</span>:</p>
<ul>

<li>The operator on the left side of a comparison must be an element of the current hierarchy whose name occurs as an operand in the CDS view specified after <span class="qtext400">SOURCE</span> as follows:</li>

</ul>

<ul class="circlem2">

<li>On the left side of an <span class="qtext400">ON</span> condition of a CDS association <span class="qtext400">_directory_assoc</span>.</li>

</ul>

<ul class="circlem2">

<li>On the left side of an <span class="qtext400">ON</span> condition of the hierarchy association <span class="qtext400">_hierarchy_assoc</span>.</li>

</ul>

<ul>

<li>The operator on the right side of the comparison can be a simple literal or a type-friendly parameter from the <a href="../abencds_f1_hiera_parameter_list" class="blue">parameter list</a> of the hierarchy.</li>

</ul>

<p>The same <a href="../abencds_cond_expr_types" class="blue">rules</a> apply to the comparable types as to CDS views.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>A filter condition removes all hierarchy nodes and their descendant nodes from the results set that do not match the condition <span class="qtext400">cond_exp</span>.</li>

<p></ul>
<ul></p>
<li>The content of the target data source of the CDS association <span class="qtext400">_directory_assoc</span> is ignored when the filter condition is evaluated.</li>

<p></ul>
<ul></p>
<li>The restriction of the operands on the left side of a comparison to the operands of a CDS association
of the source is supported by certain programming models. Any frameworks that are based on these models
read data from the target data source of this CDS association and pass it to input parameters of the hierarchy that evaluates them in the filter condition.</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following CDS view defines a self association <span class="qtext400">_pcr</span>, which itself defines
a parent-child relationship, and a CDS association <span class="qtext400">_dir</span> of a database table <span class="lnkgrey">DEMO_HIERA_DIR</span>:</p>
<dd>
<span class="qtext400">@AbapCatalog.sqlViewName: &apos;DEMOPACHSRCDIR&apos; <br>@AccessControl.authorizationCheck: #NOT_REQUIRED <br>
define view DEMO_CDS_PARENT_CHILD_SRC_DIR <br>&#xA0;&#xA0;as select from <br>&#xA0;&#xA0;&#xA0;&#xA0;demo_parchld_dir <br>
&#xA0;&#xA0;&#xA0;&#xA0;association [1..*] to DEMO_CDS_PARENT_CHILD_SRC_DIR as _pcr on <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;$projection.parent = _pcr.id and <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;$projection.dir_entry =&#xA0;&#xA0;_pcr.id <br>&#xA0;&#xA0;&#xA0;&#xA0;association [1..*] to demo_hiera_dir
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;as _dir&#xA0;&#xA0; on <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;$projection.dir_entry = _dir.dir_entry&#xA0;&#xA0;<br>&#xA0;&#xA0;&#xA0;&#xA0;{ <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;_pcr, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;_dir, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;parent_id as parent, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;dir_entry <br>&#xA0;&#xA0;&#xA0;&#xA0;}</span>
</dd>

<p>The following CDS hierarchy uses the operand <span class="qtext400">dir_entry</span> from the left side
of the <span class="qtext400">ON</span> condition from the CDS view in the filter condition after <span class="qtext400">DIRECTORY _dir FILTER BY</span>:</p>
<dd>
<span class="qtext400">define hierarchy DEMO_CDS_PARENT_CHILD_DIR <br>&#xA0;&#xA0;with parameters <br>&#xA0;&#xA0;&#xA0;&#xA0;p_id1 : abap.char(2), <br>
&#xA0;&#xA0;&#xA0;&#xA0;p_id2 : abap.char(2), <br>&#xA0;&#xA0;&#xA0;&#xA0;p_dir : abap.char(2) <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;as parent child hierarchy( <br>
&#xA0;&#xA0;&#xA0;&#xA0;source <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;DEMO_CDS_PARENT_CHILD_SRC_DIR&#xA0;&#xA0;<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;child to parent association _pcr <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;directory _dir filter by dir_entry = :p_dir&#xA0;&#xA0;<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;start where <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id = :p_id1 or id = :p_id2&#xA0;&#xA0;<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;siblings order by <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;parent <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;multiple parents allowed <br>&#xA0;&#xA0;&#xA0;&#xA0;) <br>&#xA0;&#xA0;&#xA0;&#xA0;{ <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;parent, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;dir_entry <br>&#xA0;&#xA0;&#xA0;&#xA0;}</span>
</dd>

<p>When the program <span class="lnkgrey">DEMO_HIERARCHY_PARENTCHILD_DIR</span> is <span class="lnkgrey">executed</span>, various parameters can be passed and the filter condition is demonstrated.  </p>
</div>

<h3 id="addition-5">Addition 5</h3>
<p><span class="qtext400">... START WHERE cond_expr</span>   <br><!-- /A --></p>
<h3 id="effect_5">Effect</h3>
<p>The optional addition <span class="qtext400">START WHERE</span> specifies the start condition for creating
the hierarchy. <span class="qtext400">START WHERE</span> can be followed by a logical expression <span class="qtext400">
cond_expr</span> that selects rows from the source <span class="qtext400">cds_view</span>. The same
operators can be specified for <span class="qtext400">cond_expr</span> as in a <a href="../abencds_f1_where_clause" class="blue">
<span class="qtext400">WHERE</span></a> clause of a CDS view and the same rules apply. The operands
on the left side can be elements of the CDS view specified after <span class="qtext400">SOURCE</span>. The operands on the right side can be literals, parameters from the
<a href="../abencds_f1_hiera_parameter_list" class="blue">parameter list</a> of the hierarchy, and
<a href="../abensession_variable_glosry" class="grey" title="Glossary Entry">session variables</a>. When specifying literals, parameters, and session variables, the same applies as when defining CDS views.</p>
<p>If the addition <span class="qtext400">START WHERE</span> is not specified explicitly, it is added implicitly with a condition that checks the
<a href="../abenparent_node_glosry" class="grey" title="Glossary Entry">parent node</a> defined in the
<a href="../abenhierarchy_association_glosry" class="grey" title="Glossary Entry">hierarchy association</a> in question for its initial value.</p>
<p>The selected rows are inserted in the hierarchy as a
<a href="../abenroot_node_set_glosry" class="grey" title="Glossary Entry">root node set</a>. For each
<a href="../abenroot_node_glosry" class="grey" title="Glossary Entry">root node</a> in the root node set, the
<a href="../abendescendant_node_glosry" class="grey" title="Glossary Entry">descendant nodes</a> are
selected that meet the <span class="qtext400">ON</span> condition of the hierarchy association and, if possible, inserted in the hierarchy.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>It is advisable to always specify the start condition explicitly, since this makes the definition
clearer. Furthermore, the root node set defined by the implicit start condition is not always suitable and also cannot be modified using parameters.</li>

<p></ul>
<ul></p>
<li>The start condition should select a feasible set of root nodes. If no rows in the results set of
the source <span class="qtext400">cds_view</span> meet the condition, the hierarchy is empty. If all rows meet the condition, the descendant nodes of every row are selected and inserted.</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following CDS hierarchy uses an interval boundary with <span class="qtext400">BETWEEN</span> as
a start condition. The program <span class="lnkgrey">DEMO_HIERARCHY_START_WHERE</span> accesses the CDS hierarchy and compares the result with the
<a href="../abenhierarchy_generator_glosry" class="grey" title="Glossary Entry">hierarchy generator</a> <a href="../abenselect_hierarchy_generator" class="blue"><code style="display: inline;"><span class="qtext">HIERARCHY</span></code></a> in
<a href="../abenopen_sql_glosry" class="grey" title="Glossary Entry">ABAP SQL</a> used in a similar way. When <span class="lnkgrey">executed</span>, this program demonstrates how this addition works.</p>
<dd>
<span class="qtext400">define hierarchy DEMO_CDS_PARENT_CHILD_STRTWHR&#xA0;&#xA0;<br>&#xA0;&#xA0;with parameters <br>
&#xA0;&#xA0;&#xA0;&#xA0;p_from : abap.char(2), <br>&#xA0;&#xA0;&#xA0;&#xA0;p_to&#xA0;&#xA0; : abap.char(2) <br>
&#xA0;&#xA0;as parent child hierarchy( <br>&#xA0;&#xA0;&#xA0;&#xA0;source <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;DEMO_CDS_PARENT_CHILD_SOURCE <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;child to parent association _relat <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;start where <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id between :p_from and :p_to <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;siblings order by <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;multiple parents allowed <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;cycles breakup <br>&#xA0;&#xA0;&#xA0;&#xA0;) <br>&#xA0;&#xA0;&#xA0;&#xA0;{ <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;parent <br>&#xA0;&#xA0;&#xA0;&#xA0;}</span>

</dd>

</div>

<h3 id="addition-6">Addition 6</h3>
<p><span class="qtext400">... SIBLINGS ORDER BY field1 <i class="bn">[</i>ASCENDING<i class="bn">|</i>DESCENDING<i class="bn">]</i>,&#xA0;&#xA0;...</span>   <br><!-- /A --></p>
<h3 id="effect_6">Effect</h3>
<p>The mandatory addition <span class="qtext400">SIBLINGS ORDER BY</span> sorts
<a href="../abensibling_node_glosry" class="grey" title="Glossary Entry">sibling nodes</a> in the hierarchy.
Fields <span class="qtext400">field1</span>, <span class="qtext400">field2</span>, ... of the source
<span class="qtext400">cds_view</span> can be specified in a comma-separated list after the addition <span class="qtext400">SIBLINGS ORDER BY</span> to specify the order of the sibling nodes.</p>
<p>The addition <span class="qtext400">ASCENDING</span> or <span class="qtext400">DESCENDING</span> can be specified for each field to specify an ascending or descending order (ascending is the default).</p>
<p>The fields specified after <span class="qtext400">SIBLINGS ORDER BY</span> cannot be of the <a href="../abenddic_builtin_types" class="blue">type</a> LCHR, LRAW, STRING, RAWSTRING, or GEOM_EWKB.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>The addition <span class="qtext400">SIBLINGS ORDER BY</span> is mandatory in the case of CDS hierarchies, since this sort cannot be performed at a later time. For example, the result of a
<a href="../abenhierarchy_navigator_glosry" class="grey" title="Glossary Entry">hierarchy navigator</a> in ABAP SQL may depend on how the hierarchy specified as a source is sorted. A
<a href="../abenhierarchy_generator_glosry" class="grey" title="Glossary Entry">hierarchy generator</a>
specified as a source can be sorted directly here, but this is no longer possible in the case of predefined CDS hierarchies.</p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following CDS hierarchy sorts siblings in descending order by the field <span class="qtext400">id</span>.
The program <span class="lnkgrey">DEMO_HIERARCHY_SIBLINGS_ORDER</span> accesses the CDS hierarchy and compares the result with the
<a href="../abenhierarchy_generator_glosry" class="grey" title="Glossary Entry">hierarchy generator</a> <a href="../abenselect_hierarchy_generator" class="blue"><code style="display: inline;"><span class="qtext">HIERARCHY</span></code></a> in
<a href="../abenopen_sql_glosry" class="grey" title="Glossary Entry">ABAP SQL</a> used in a similar way. When <span class="lnkgrey">executed</span>, this program demonstrates how this addition works.</p>
<dd>
<span class="qtext400">define hierarchy DEMO_CDS_SIMPLE_TREE_SIBL_ORD <br>&#xA0;&#xA0;with parameters <br>
&#xA0;&#xA0;&#xA0;&#xA0;p_id : abap.int4 <br>&#xA0;&#xA0;as parent child hierarchy( <br>&#xA0;&#xA0;&#xA0;&#xA0;source <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;DEMO_CDS_SIMPLE_TREE_SOURCE <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;child to parent association _tree <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;start where <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id = :p_id <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;siblings order by <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id descending <br>
&#xA0;&#xA0;&#xA0;&#xA0;) <br>&#xA0;&#xA0;&#xA0;&#xA0;{ <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;parent, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;name <br>&#xA0;&#xA0;&#xA0;&#xA0;}</span>

</dd>

</div>

<h3 id="addition-7">Addition 7</h3>
<p><span class="qtext400">... DEPTH depth</span>   <br><!-- /A --></p>
<h3 id="effect_7">Effect</h3>
<p>The optional addition <span class="qtext400">depth</span> limits the number of
<a href="../abenhierarchy_level_glosry" class="grey" title="Glossary Entry">hierarchy levels</a> used to create
<a href="../abendescendant_node_glosry" class="grey" title="Glossary Entry">descendant nodes</a>. <span class="qtext400">depth</span> can be a simple literal or a parameter from the
<a href="../abencds_f1_hiera_parameter_list" class="blue">parameter list</a> of the hierarchy that has an integer type.</p>
<p>The value in <span class="qtext400">depth</span> has the following meaning:</p>
<ul>

<li>For <span class="qtext400">depth</span> values greater then 0, the number of hierarchy edges are traversed that is specified in <span class="qtext400">depth</span>, starting from a
<a href="../abenroot_node_glosry" class="grey" title="Glossary Entry">root node</a>.</li>

</ul>

<ul>

<li>If the value of <span class="qtext400">depth</span> is 0, only the <a href="../abenroot_node_glosry" class="grey" title="Glossary Entry">root nodes</a> are inserted in the hierarchy.</li>

</ul>

<ul>

<li>For <span class="qtext400">depth</span> values less than 0, no <a href="../abenhierarchy_node_glosry" class="grey" title="Glossary Entry">hierarchy nodes</a> are created.</li>

</ul>

<p>The addition <span class="qtext400">DEPTH</span> can be used only if the addition <span class="qtext400">ORPHANS</span> is not specified or is specified as <span class="qtext400">ORPHANS IGNORE</span>.  </p>
<p><br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following CDS hierarchy uses an input parameter <span class="qtext400">p_depth</span> to restrict
the hierarchy levels. The program <span class="lnkgrey">DEMO_HIERARCHY_DEPTH</span> accesses the CDS hierarchy and compares the result with the
<a href="../abenhierarchy_generator_glosry" class="grey" title="Glossary Entry">hierarchy generator</a> <a href="../abenselect_hierarchy_generator" class="blue"><code style="display: inline;"><span class="qtext">HIERARCHY</span></code></a> in
<a href="../abenopen_sql_glosry" class="grey" title="Glossary Entry">ABAP SQL</a> used in a similar way. When <span class="lnkgrey">executed</span>, this program demonstrates how this addition works.</p>
<dd>
<span class="qtext400">define hierarchy DEMO_CDS_SIMPLE_TREE_DEPTH <br>&#xA0;&#xA0;with parameters <br>&#xA0;&#xA0;&#xA0;&#xA0;p_depth : abap.int4 <br>
&#xA0;&#xA0;as parent child hierarchy( <br>&#xA0;&#xA0;&#xA0;&#xA0;source <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;DEMO_CDS_SIMPLE_TREE_SOURCE <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;child to parent association _tree <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;start where <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id = 1 <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;siblings order by <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id ascending <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;depth :p_depth <br>
&#xA0;&#xA0;&#xA0;&#xA0;) <br>&#xA0;&#xA0;&#xA0;&#xA0;{ <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;name, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;$node.hierarchy_level as hiera_level <br>&#xA0;&#xA0;&#xA0;&#xA0;}</span>

</dd>

</div>

<h3 id="addition-8">Addition 8</h3>
<p><span class="qtext400">... NODETYPE node_type</span>   <br><!-- /A --></p>
<h3 id="effect_8">Effect</h3>
<p>The optional addition <span class="qtext400">NODETYPE</span> defines an element of the hierarchy as a node type. An
<a href="../abencds_f1_hiera_element" class="blue">element</a> of the
<a href="../abencds_f1_hiera_element_list" class="blue">element list</a> can be specified for <span class="qtext400">
node_type</span>. This information is saved in the metadata of the CDS hierarchy and can be read by consumers using an API.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>An element defined as a node type can be used to stress semantic differences in technically similar hierarchy nodes.</li>

<p></ul>
<ul></p>
<li>The API for reading the properties of a CDS hierarchy is not yet available.</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following tree-like CDS hierarchy defines the element <span class="qtext400">name</span> as a node type. If a hierarchy node in the element <span class="qtext400">name</span> has the value <span class="qtext400">Apple</span>, it is a
<a href="../abenleaf_node_glosry" class="grey" title="Glossary Entry">leaf node</a> without any
<a href="../abendescendant_node_glosry" class="grey" title="Glossary Entry">descendant nodes</a>. The
program <span class="lnkgrey">DEMO_HIERARCHY_TREE_NODETYPE</span> accesses the CDS hierarchy and when <span class="lnkgrey">executed</span> returns any hierarchy nodes that break the rule.</p>
<dd>
<span class="qtext400">define hierarchy DEMO_CDS_SIMPLE_TREE_NODETYPE <br>&#xA0;&#xA0;as parent child hierarchy( <br>
&#xA0;&#xA0;&#xA0;&#xA0;source <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;DEMO_CDS_SIMPLE_TREE_SOURCE <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;child to parent association _tree <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;start where <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id = 1 <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;siblings order by <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id ascending <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;nodetype name <br>&#xA0;&#xA0;&#xA0;&#xA0;) <br>&#xA0;&#xA0;&#xA0;&#xA0;{ <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;parent, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;name <br>&#xA0;&#xA0;&#xA0;&#xA0;}</span>

</dd>

</div>

<h3 id="addition-9">Addition 9</h3>
<p><span class="qtext400">... MULTIPLE PARENTS <i class="bn">{</i>NOT ALLOWED<i class="bn">}</i><i class="bn">|</i><i class="bn">{</i>LEAVES ONLY<i class="bn">}</i><i class="bn">|</i>ALLOWED</span>   <br><!-- /A --></p>
<h3 id="effect_9">Effect</h3>
<p>The optional addition <span class="qtext400">MULTIPLE PARENTS</span> specifies whether the hierarchy can have
<a href="../abenchild_node_glosry" class="grey" title="Glossary Entry">child nodes</a> with multiple <a href="../abenparent_node_glosry" class="grey" title="Glossary Entry">parent nodes</a>:</p>
<ul>

<li><span class="qtext400">NOT ALLOWED</span></li>

</ul>

<dd>
This is the default setting (a child node can have precisely on parent node only).
</dd>

<ul>

<li><span class="qtext400">LEAVES ONLY</span></li>

</ul>

<dd>
Only <a href="../abenleaf_node_glosry" class="grey" title="Glossary Entry">leaf nodes</a> can have multiple parent nodes.
</dd>

<ul>

<li><span class="qtext400">ALLOWED</span></li>

</ul>

<dd>
All hierarchy nodes can have multiple parent nodes.
</dd>

<p><br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following CDS hierarchy allows multiple parent nodes for leaf nodes. The program <span class="lnkgrey">DEMO_HIERARCHY_MULTI_PARENTS</span> accesses the CDS hierarchy and compares the result with the
<a href="../abenhierarchy_generator_glosry" class="grey" title="Glossary Entry">hierarchy generator</a> <a href="../abenselect_hierarchy_generator" class="blue"><code style="display: inline;"><span class="qtext">HIERARCHY</span></code></a> in
<a href="../abenopen_sql_glosry" class="grey" title="Glossary Entry">ABAP SQL</a> used in a similar way. When <span class="lnkgrey">executed</span>, this program demonstrates how this addition works.</p>
<dd>
<span class="qtext400">define hierarchy DEMO_CDS_PARENT_CHILD_MULTIPAR <br>&#xA0;&#xA0;as parent child hierarchy( <br>
&#xA0;&#xA0;&#xA0;&#xA0;source <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;DEMO_CDS_PARENT_CHILD_SOURCE <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;child to parent association _relat <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;start where <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; id = &apos;A&apos; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;siblings order by <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;multiple parents leaves <br>
&#xA0;&#xA0;&#xA0;&#xA0;) <br>&#xA0;&#xA0;&#xA0;&#xA0;{ <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;parent, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;$node.hierarchy_level&#xA0;&#xA0;&#xA0;&#xA0;as hiera_level <br>&#xA0;&#xA0;&#xA0;&#xA0;}</span>

</dd>

</div>

<h3 id="addition-10">Addition 10</h3>
<p><span class="qtext400">... ORPHANS IGNORE<i class="bn">|</i>ERROR<i class="bn">|</i>ROOT</span>   <br><!-- /A --></p>
<h3 id="effect_10">Effect</h3>
<p>The optional addition <span class="qtext400">ORPHANS</span> defines the way
<a href="../abenorphan_node_glosry" class="grey" title="Glossary Entry">orphan nodes</a> are handled. The following categories of orphan nodes exist:</p>
<ul>

<li>Hierarchy nodes that could have parent nodes (as specified by the parent-child relationship) but the parent nodes are not in the hierarchy (known as true orphans).</li>

</ul>

<ul>

<li>Hierarchy nodes that cannot be reached from the root node set using hierarchy edges.</li>

</ul>

<ul>

<li>Hierarchy nodes that are part of a <a href="../abennode_cycle_glosry" class="grey" title="Glossary Entry">
node cycle</a> and cannot be reached from the root node set using hierarchy nodes (known as island orphans).</li>

</ul>

<p>The additions work as follows:</p>
<ul>

<li><span class="qtext400">IGNORE</span></li>

</ul>

<dd>
This is the default setting (any orphan nodes are not inserted in the hierarchy).
</dd>

<ul>

<li><span class="qtext400">ERROR</span></li>

</ul>

<dd>
Any orphan nodes detected raise an exception.
</dd>

<ul>

<li><span class="qtext400">ROOT</span></li>

</ul>

<dd>
Orphan nodes are inserted in the hierarchy as follows:
</dd>

<ul class="circlem2">

<li>True orphans are included in the root node set as root nodes and flagged as orphan nodes in the <a href="../abencds_hierarchy_attributes" class="blue">hierarchy attribute</a> HIERARCHY_IS_ORPHAN.</li>

</ul>

<ul class="circlem2">

<li><a href="../abendescendant_node_glosry" class="grey" title="Glossary Entry">Descendant
nodes</a> of true orphans are handled like descendant nodes of parent nodes from the root node set, but are also flagged as orphan nodes in the
<a href="../abencds_hierarchy_attributes" class="blue">hierarchy attribute</a> HIERARCHY_IS_ORPHAN.</li>

</ul>

<ul class="circlem2">

<li>For the hierarchy nodes of island orphans, a parent node in the root node set is generated for the
child node where the cycle occurs. In the generated root node, all columns of the source <span class="qtext400">hierarchy_source</span> contain the null value. In the
<a href="../abencds_hierarchy_attributes" class="blue">hierarchy attributes</a>, the additional root node is flagged as an orphan node and PARENT_ID also contains the null value.</li>

</ul>

<p><br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following CDS hierarchy transforms orphan nodes into root nodes. The program <span class="lnkgrey">DEMO_HIERARCHY_ORPHANS</span> accesses the CDS hierarchy and compares the result with the
<a href="../abenhierarchy_generator_glosry" class="grey" title="Glossary Entry">hierarchy generator</a> <a href="../abenselect_hierarchy_generator" class="blue"><code style="display: inline;"><span class="qtext">HIERARCHY</span></code></a> in
<a href="../abenopen_sql_glosry" class="grey" title="Glossary Entry">ABAP SQL</a> used in a similar way. When <span class="lnkgrey">executed</span>, this program demonstrates how this addition works.</p>
<dd>
<span class="qtext400">define hierarchy DEMO_CDS_PARENT_CHILD_ORPHANS <br>&#xA0;&#xA0;as parent child hierarchy( <br>
&#xA0;&#xA0;&#xA0;&#xA0;source <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;DEMO_CDS_PARENT_CHILD_SOURCE <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;child to parent association _relat <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;start where <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id = &apos;A&apos; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;siblings order by <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;multiple parents allowed <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;orphans root <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;cycles breakup <br>
&#xA0;&#xA0;&#xA0;&#xA0;) <br>&#xA0;&#xA0;&#xA0;&#xA0;{ <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;parent, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;$node.node_id&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; as hiera_node_id, <br>&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;$node.parent_id&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; as hiera_parent_id, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;$node.hierarchy_is_orphan&#xA0;&#xA0; as hiera_is_orphan, <br>&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;$node.hierarchy_is_cycle&#xA0;&#xA0;&#xA0;&#xA0;as hiera_is_cycle, <br>&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;$node.hierarchy_rank&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;as hiera_rank, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;$node.hierarchy_parent_rank as hiera_parent_rank, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;$node.hierarchy_level&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; as hiera_level <br>
&#xA0;&#xA0;&#xA0;&#xA0;}</span>

</dd>

</div>

<h3 id="addition-11">Addition 11</h3>
<p><span class="qtext400">... CYCLES ERROR<i class="bn">|</i>BREAKUP</span>   <br><!-- /A --></p>
<h3 id="effect_11">Effect</h3>
<p>The addition <span class="qtext400">CYCLES</span> defines how <a href="../abennode_cycle_glosry" class="grey" title="Glossary Entry">node cycles</a> are defined. The additions work as follows:</p>
<ul>

<li><span class="qtext400">ERROR</span></li>

</ul>

<dd>
This is the default setting (an exception is raised when a node cycle is detected).
</dd>

<ul>

<li><span class="qtext400">BREAKUP</span></li>

</ul>

<dd>
The traversal of <a href="../abendescendant_node_glosry" class="grey" title="Glossary Entry">descendant nodes</a> is broken at the child node where the node cycle occurs and the
<a href="../abenddddl_hierarchy" class="blue">hierarchy attribute</a> HIERARCHY_IS_CYCLE is set to the value 1.
</dd>

<p>If the addition <span class="qtext400">BREAKUP</span> is specified, <span class="qtext400">MULTIPLE PARENTS ALLOWED</span> must also be specified.</p>
<p><br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following CDS hierarchy breaks node cycles using <span class="qtext400">CYCLES BREAKUP</span>. The program <span class="lnkgrey">DEMO_HIERARCHY_CYCLES</span> accesses the CDS hierarchy and compares the result with the
<a href="../abenhierarchy_generator_glosry" class="grey" title="Glossary Entry">hierarchy generator</a> <a href="../abenselect_hierarchy_generator" class="blue"><code style="display: inline;"><span class="qtext">HIERARCHY</span></code></a> in
<a href="../abenopen_sql_glosry" class="grey" title="Glossary Entry">ABAP SQL</a> used in a similar way. When <span class="lnkgrey">executed</span>, this program demonstrates how this addition works.</p>
<dd>
<span class="qtext400">define hierarchy DEMO_CDS_PARENT_CHILD_CYCLES <br>&#xA0;&#xA0;as parent child hierarchy( <br>
&#xA0;&#xA0;&#xA0;&#xA0;source <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;DEMO_CDS_PARENT_CHILD_SOURCE <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;child to parent association _relat <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;start where <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; id = &apos;A&apos; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;or id = &apos;X&apos; <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;or id = &apos;Y&apos; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;or id = &apos;Z&apos; <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;siblings order by <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;multiple parents allowed <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;cycles breakup <br>
&#xA0;&#xA0;&#xA0;&#xA0;) <br>&#xA0;&#xA0;&#xA0;&#xA0;{ <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;parent, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;$node.hierarchy_is_cycle as hiera_is_cycle, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;$node.hierarchy_level&#xA0;&#xA0;&#xA0;&#xA0;as hiera_level <br>&#xA0;&#xA0;&#xA0;&#xA0;}</span>

</dd>

</div>

<h3 id="addition-12">Addition 12</h3>
<p><span class="qtext400">... GENERATE SPANTREE</span>   <br><!-- /A --></p>
<h3 id="effect_12">Effect</h3>
<p>If the addition <span class="qtext400">GENERATE SPANTREE</span> is specified, only those child nodes
without multiple parent nodes are inserted in the hierarchy, starting from every root node. If, due
to its parent-child relationships, a child node were to have multiple parent nodes after its root node,
precisely one of the potential paths from the root node to this child node is selected and the child node is created for this path only.</p>
<ul>

<li>If the paths have different lengths, the shortest is selected.</li>

</ul>

<ul>

<li>If the paths all have the same length, the first path found is selected.</li>

</ul>

<p>If the addition <span class="qtext400">GENERATE SPANTREE</span> is specified, the additions <span class="qtext400">MULTIPLE
PARENTS</span>, <span class="qtext400">ORPHANS</span>, and <span class="qtext400">CYCLES</span> cannot be specified and other defaults apply in parts:</p>
<ul>

<li><span class="qtext400">MULTIPLE PARENTS</span> is used implicitly with <span class="qtext400">ALLOWED</span>.</li>

</ul>

<ul>

<li><span class="qtext400">CYCLES</span> is used implicitly with <span class="qtext400">BREAKUP</span>.</li>

</ul>

<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>If the parent-child relationships for the current data do not produce tree-like hierarchies, the addition <span class="qtext400">GENERATE SPANTREE</span> is ignored.</li>

<p></ul>
<ul></p>
<li>Even if one path (from many paths) to a child node is selected, this does not mean that all others are rejected. In this case, only the edges leading to the child node are missing.</li>

<p></ul>
<ul></p>
<li>The addition <span class="qtext400">GENERATE SPANTREE</span> can be used to detect whether at least one path leads from a root node to a child node without the results set needing to contain all paths.</li>

<p></ul>
<ul></p>
<li>The addition <span class="qtext400">GENERATE SPANTREE</span> is used in an
<a href="../abenhana_database_glosry" class="grey" title="Glossary Entry">SAP HANA database</a> to access the hierarchy generator function <a href="https://help.sap.com/viewer/4f9859d273254e04af6ab3e9ea3af286/2.0.03/en-US/a93c356d32ef4e7fbd6143b554278eab.html" target="blank" class="blue"><span class="qtext400">HIERARCHY_SPANTREE</span></a> there.</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following CDS hierarchy uses the addition <span class="qtext400">GENERATE SPANTREE</span>. The program <span class="lnkgrey">DEMO_HIERARCHY_SPANTREE</span> accesses the CDS hierarchy and compares the result with the
<a href="../abenhierarchy_generator_glosry" class="grey" title="Glossary Entry">hierarchy generator</a> <a href="../abenselect_hierarchy_generator" class="blue"><code style="display: inline;"><span class="qtext">HIERARCHY</span></code></a> in
<a href="../abenopen_sql_glosry" class="grey" title="Glossary Entry">ABAP SQL</a> used in a similar way. When <span class="lnkgrey">executed</span>, this program demonstrates how this addition works.</p>
<dd>
<span class="qtext400">define hierarchy DEMO_CDS_PARENT_CHILD_SPANTREE <br>&#xA0;&#xA0;as parent child hierarchy( <br>
&#xA0;&#xA0;&#xA0;&#xA0;source <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;DEMO_CDS_PARENT_CHILD_SOURCE <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;child to parent association _relat <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;start where <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; id = &apos;A&apos; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;or id = &apos;K&apos; <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;or id = &apos;X&apos; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;or id = &apos;Y&apos; <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;siblings order by <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;generate spantree&#xA0;&#xA0; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;)&#xA0;&#xA0;<br>
&#xA0;&#xA0;&#xA0;&#xA0;{ <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;id, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;parent <br>&#xA0;&#xA0;&#xA0;&#xA0;}</span>
</dd>

</div>

<h3 id="continue">Continue</h3>
<p><a href="../abencds_f1_hierarchy_annotations" class="blue">ABAP CDS - DEFINE HIERARCHY, hierarchy_annot</a></p>
<p><a href="../abencds_f1_hiera_parameter_list" class="blue">ABAP CDS - DEFINE HIERARCHY, parameter_list</a></p>
<p><a href="../abencds_f1_hiera_element_list" class="blue">ABAP CDS - DEFINE HIERARCHY, element_list</a></p>
<p><a href="../abencds_hierarchy_attributes" class="blue">ABAP CDS - Hierarchy Attributes</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>