


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abapmodify source - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#modify-dbtab-source" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abapmodify source
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternatives" class="md-nav__link">
    Alternatives
  </a>
  
    <nav class="md-nav" aria-label="Alternatives">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternative-1" class="md-nav__link">
    Alternative 1
  </a>
  
    <nav class="md-nav" aria-label="Alternative 1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect_1" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternative-2" class="md-nav__link">
    Alternative 2
  </a>
  
    <nav class="md-nav" aria-label="Alternative 2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect_2" class="md-nav__link">
    Effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executable-example" class="md-nav__link">
    Executable Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternative-3" class="md-nav__link">
    Alternative 3
  </a>
  
    <nav class="md-nav" aria-label="Alternative 3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect_3" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abapmodify_source.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP &#x2212; Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_language_external_data" class="blue">Processing External Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_sql" class="blue">ABAP Database Access</a>&#xA0;&#x2192;&#xA0;
<a href="../abenopensql" class="blue">ABAP SQL</a>&#xA0;&#x2192;&#xA0;
<a href="../abenopen_sql_writing" class="blue">ABAP SQL - Write Accesses</a>&#xA0;&#x2192;&#xA0;
<a href="../abapmodify_dbtab" class="blue">MODIFY dbtab</a>&#xA0;</small></p>
<h1 id="modify-dbtab-source">MODIFY dbtab - source</h1>
<p><a href="../abapmodify_dbtab_shortref" class="blue">Quick Reference</a>  </p>
<p>Other versions: 
 <a href="../../7.31/abapmodify_source">7.31</a> | <a href="../../7.40/abapmodify_source">7.40</a> | <b>7.54</b></p>
<h2 id="syntax">Syntax</h2>
<p><pre><code class="hljs abap abap-docs-syntax-block">
<span class="qtext">...&#xA0;&#xA0;@wa<i class="bn">|</i>@( expr ) <br>&#xA0;&#xA0;<i class="bn">|</i> <i class="bn">{</i> TABLE @itab<i class="bn">|</i>@( expr ) <i class="bn">}</i> <br>
&#xA0;&#xA0;&#xA0;&#xA0;( SELECT <a href="../abapinsert_from_select" class="blue">subquery_clauses</a> <i class="bn">[</i>
<a href="../abapunion" class="blue">UNION ...</a><i class="bn">]</i> ) ...</span> 
</code></pre></p>
<h2 id="alternatives">Alternatives</h2>
<p><a href="#!ABAP_ALTERNATIVE_1@1@" class="blue"> 1. <code style="display: inline;"><span class="qtext">... @wa<i class="bn">|</i>@( expr )</span></code> </a> <br>
<br><a href="#!ABAP_ALTERNATIVE_2@2@" class="blue"> 2. <code style="display: inline;"><span class="qtext">... TABLE @itab<i class="bn">|</i>@( expr )</span></code> </a> <br>
<br><a href="#!ABAP_ALTERNATIVE_3@3@" class="blue"> 3. <code style="display: inline;"><span class="qtext">... ( SELECT subquery_clauses <i class="bn">[</i>UNION ...<i class="bn">]</i> ) ...</span></code> </a>  </p>
<h3 id="effect">Effect</h3>
<p>A non-table-like data object <code style="display: inline;"><span class="qtext">wa</span></code> can be specified after <code style="display: inline;"><span class="qtext">FROM</span></code> in the statement <a href="../abapmodify_dbtab" class="blue">
</a><a href="../abapinsert_from_select" class="blue">MODIFY</a> and an internal table or a parenthesized
<a href="../abenopen_sql_host_variables" class="blue">subquery</a> can be specified after <code style="display: inline;"><span class="qtext">TABLE</span></code>. The work area and the internal table can be specified as a
<a href="../abenopen_sql_host_variables" class="blue">host variable</a> or a
<a href="../abenopen_sql_host_expressions" class="blue">host expression</a>. On the one hand the content
of the data objects or the results set of the subquery determines whether the row(s) are inserted or changed, and on the other hand, which values are inserted or used for changes.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>Host variables without the escape character <code style="display: inline;"><span class="qtext">@</span></code> are
<a href="../abenopen_sql_hostvar_obsolete" class="blue">obsolete</a>. The escape character <code style="display: inline;"><span class="qtext">@</span></code> must be specified in the
<a href="../abenopensql_strict_modes" class="blue">strict modes</a> of the syntax check from Release 7.40, SP05.  </p>
<p></div>
<a name="!ABAP_ALTERNATIVE_1@1@"></a></p>
<h2 id="alternative-1">Alternative 1</h2>
<p><code style="display: inline;"><span class="qtext">... @wa<i class="bn">|</i>@( expr )</span></code><br />
 <br><!-- /A --></p>
<h3 id="effect_1">Effect</h3>
<p>When a non-table-like work area that meets the <a href="../abenopen_sql_host_expressions" class="blue">requirements</a>
for use in ABAP SQL statements is specified as a host variable <a href="../abenopen_sql_host_variables" class="blue">
<code style="display: inline;"><span class="qtext">@wa</span></code></a> or host expression <a href="../abenopen_sql_host_expressions" class="blue"><code style="display: inline;"><span class="qtext">@( expr )</span></code></a>, a row is found in the database table or view that has the same content in the
<a href="../abenprimary_key_glosry" class="grey" title="Glossary Entry">primary key</a> as the corresponding initial part of the work area.</p>
<ul>

<li>
If a row like this is found, this row is overwritten in accordance with the same rules as for the statement <a href="../abapupdate_source" class="blue"><code style="display: inline;"><span class="qtext">UPDATE</span></code></a>.
</li>
<li>
If a row like this is not found, a new row is inserted according to the same rules as for the statement <a href="../abapinsert_source" class="blue"><code style="display: inline;"><span class="qtext">INSERT</span></code></a>.
<br></li>

</ul>

<p>If the change would produce a duplicate entry in a unique secondary index, it is not executed and <code style="display: inline;"><span class="qtext">sy-subrc</span></code> is set to 4.</p>
<p><a href="../abenopen_sql_client_handling" class="blue">Implicit ABAP SQL client handling</a> applies, in which a
<a href="../abenclient_identifier_glosry" class="grey" title="Glossary Entry">client ID</a> specified
in <code style="display: inline;"><span class="qtext">wa</span></code> is ignored. The current client is used by default. The addition <a href="../abapiumd_client" class="blue">
<code style="display: inline;"><span class="qtext">USING CLIENT</span></code></a> can be used to switch to an explicitly specified client.
The addition <a href="../abapiumd_client" class="blue"><code style="display: inline;"><span class="qtext">CLIENT SPECIFIED</span></code></a> can be used to switch to the client specified in <code style="display: inline;"><span class="qtext">wa</span></code>.</p>
<p><a href="../abenview_glosry" class="grey" title="Glossary Entry">Views</a> whose fields are all key fields should not be written to using <code style="display: inline;"><span class="qtext">MODIFY FROM</span></code>. For
<a href="../abendatabase_view_glosry" class="grey" title="Glossary Entry">database views</a>, this produces a syntax check warning and for
<a href="../abenprojection_view_glosry" class="grey" title="Glossary Entry">projection views</a> a syntax error or runtime error.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>
The <code style="display: inline;"><span class="qtext">wa</span></code> work area should always be declared with reference to the database table or the
<a href="../abenview_glosry" class="grey" title="Glossary Entry">view</a> in ABAP Dictionary. For the derivation of
<a href="../abenlob_handle_structure_glosry" class="grey" title="Glossary Entry">LOB handle structures</a>, there are special
<a href="../abaptypes_lob_handle" class="blue">additions</a> of the statements <code style="display: inline;"><span class="qtext">TYPES</span></code> and <code style="display: inline;"><span class="qtext"><i class="bn">[</i>CLASS-<i class="bn">]</i>DATA</span></code>.
</li>

<li>
Exceptions due to invalid values can also be raised in compatible work areas. For example, components
of the types <code style="display: inline;"><span class="qtext">d</span></code> and <code style="display: inline;"><span class="qtext">t</span></code> can contain invalid dates and times that are not accepted by columns of the types DATN and TIMN.
</li>

<li>
If a <a href="../abenconstructor_expression_glosry" class="grey" title="Glossary Entry">constructor expression</a> is specified as a
<a href="../abenopen_sql_host_expressions" class="blue">host expression</a> for the work area <span class="qtext">
wa</span>, for which the data type is inferred using the <code style="display: inline;"><span class="qtext">#</span></code> character, a structure consisting of all the database table columns is created as the type.
</li>

<li>
If the database table or view is specified statically, a
<a href="../abapmodify_obsolete" class="blue">short form</a> can be specified outside of classes. This means that the work area specified using <code style="display: inline;"><span class="qtext">FROM</span></code> wa can be omitted. The prerequisite is that a
<a href="../abentable_work_area_glosry" class="grey" title="Glossary Entry">table work area</a> <span class="qtext">
dbtab</span> for the respective database table or the view is declared using the statement <code style="display: inline;"><span class="qtext">TABLES</span></code>.
The system enhances the <code style="display: inline;"><span class="qtext">MODIFY</span></code> statement implicitly with the addition <code style="display: inline;"><span class="qtext">FROM dbtab</span></code>. <br>
</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Create or change a <a href="../abenmessage_glosry" class="grey" title="Glossary Entry">message</a>
in database table <span class="lnkgrey">T100</span>. If there is no message with the number 100 in the MYMSGCLASS message class in English, it will be created. Otherwise only the text is changed.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">DATA</span><span class="p">(</span><span class="nv">message_wa</span><span class="p">)</span> <span class="o">=</span> <span class="k">VALUE</span> <span class="nv">t100</span><span class="p">(</span> 
  <span class="nv">sprsl</span> <span class="o">=</span> <span class="s1">&#39;EN&#39;</span> 
  <span class="nv">arbgb</span> <span class="o">=</span> <span class="s1">&#39;MYMSGCLASS&#39;</span> 
  <span class="nv">msgnr</span> <span class="o">=</span> <span class="s1">&#39;100&#39;</span> 
  <span class="nv">text</span> <span class="o">=</span>  <span class="s1">&#39;Some new message ...&#39;</span> <span class="p">).</span> 

<span class="k">MODIFY</span> <span class="nv">t100</span> <span class="k">FROM</span> <span class="err">@</span><span class="nv">message_wa</span><span class="p">.</span>
</code></pre></div>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The same example as before, but with a host expression.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">MODIFY</span> <span class="nv">t100</span> <span class="k">FROM</span> <span class="err">@</span><span class="p">(</span> <span class="k">VALUE</span> <span class="err">#</span><span class="p">(</span> 
  <span class="nv">sprsl</span> <span class="o">=</span> <span class="s1">&#39;EN&#39;</span> 
  <span class="nv">arbgb</span> <span class="o">=</span> <span class="s1">&#39;MYMSGCLASS&#39;</span> 
  <span class="nv">msgnr</span> <span class="o">=</span>  <span class="s1">&#39;100&#39;</span> 
  <span class="nv">text</span> <span class="o">=</span>  <span class="s1">&#39;Some new message ...&#39;</span>  <span class="p">)</span> <span class="p">).</span> 
</code></pre></div>
<a name="@@TABLE@@MODIFY dbtab@@"></a>
</div>
<a name="!ABAP_ALTERNATIVE_2@2@"></a></p>
<h2 id="alternative-2">Alternative 2</h2>
<p><code style="display: inline;"><span class="qtext">... TABLE @itab<i class="bn">|</i>@( expr )</span></code><br />
 <br><!-- /A --></p>
<h3 id="effect_2">Effect</h3>
<p>When an internal table is specified as a host variable <a href="../abenopen_sql_host_variables" class="blue"><span class="qtext">
@itab</span></a> or host expression <a href="../abenopen_sql_host_expressions" class="blue"><span class="qtext">@( expr
)</span></a>, its rows are evaluated to overwrite existing rows or to insert new rows. The row type of the internal table must meet the
<a href="../abenopen_sql_wa" class="blue">prerequisites</a> for use in ABAP SQL statements.</p>
<p>This behavior is platform-dependent and uses one of the following patterns (depending on the database system):</p>
<ul>

<li>
<code style="display: inline;"><span class="qtext">UPDATE</span></code> followed by <code style="display: inline;"><span class="qtext">INSERT</span></code>:
<br></li>

</ul>

<ul class="circlem2">

<li>First, the same function as for <a href="../abapupdate_source" class="blue"><code style="display: inline;"><span class="qtext">UPDATE FROM TABLE</span></code></a> is executed for all rows of the internal table.</li>

</ul>

<ul class="circlem2">

<li>Next, the same function as for <a href="../abapinsert_source" class="blue"><code style="display: inline;"><span class="qtext">INSERT FROM TABLE</span></code></a> is executed for all rows. Here, any rows that have the same
<a href="../abenprimary_key_glosry" class="grey" title="Glossary Entry">primary key</a> or unique
<a href="../abensecondary_index_glosry" class="grey" title="Glossary Entry">secondary index</a> are ignored.</li>

</ul>

<dd>
Depending on the database system, the processing of the rows in the internal table can also be split into blocks here.
</dd>

<ul>

<li>
Row by row <code style="display: inline;"><span class="qtext">MODIFY</span></code>
<br></li>

</ul>

<dd>
In a loop, each row in the internal table is edited in accordance with the rule above for <span class="qtext">MODIFY
... FROM wa</span>. Here, the database system specifies whether processing continues in cases where a row cannot be inserted due to a unique secondary index.
</dd>

<p>These two platform-dependent processing methods can produce different results in cases where the database table has unique secondary indexes (see <a href="../abenbulk_modify_abexa" class="blue">executable example</a>).</p>
<p>If the change to a row in the internal table would produce a duplicate entry in a unique secondary index,
the corresponding row is not inserted and <code style="display: inline;"><span class="qtext">sy-subrc</span></code> is set to 4. If the internal
table is empty, no rows are processed. However <code style="display: inline;"><span class="qtext">sy-subrc</span></code> is still set to 0. The system field <code style="display: inline;"><span class="qtext">sy-dbcnt</span></code> is set to the number of rows that are actually processed.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>
To prevent platform-dependent behavior, <code style="display: inline;"><span class="qtext">MODIFY ... FROM itab</span></code> should only
be applied to database tables without unique secondary indexes. If not, the required behavior must be
programmed explicitly using <code style="display: inline;"><span class="qtext">UPDATE</span></code> and <code style="display: inline;"><span class="qtext">INSERT</span></code> or using <code style="display: inline;"><span class="qtext">LOOP AT itab</span></code> and <code style="display: inline;"><span class="qtext">MODIFY</span></code>.
</li>

<li>
If a <a href="../abenconstructor_expression_glosry" class="grey" title="Glossary Entry">constructor expression</a> as a
<a href="../abenopen_sql_host_expressions" class="blue">host expression</a> is specified as an internal
table <code style="display: inline;"><span class="qtext">itab</span></code>, for which the data type is inferred using the <code style="display: inline;"><span class="qtext">#</span></code>
character, a structured standard table (whose row type consists of all the database table columns) with an empty table key is created as the type.
</li>

<li>
When an internal table is specified, <a href="../abenlocator_glosry" class="grey" title="Glossary Entry">locators</a> can be used as a source, but no
<a href="../abenwriter_stream_glosry" class="grey" title="Glossary Entry">writer streams</a> can be created.
<br></li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Create or change multiple rows in database table <span class="lnkgrey">DEMO_UPDATE</span>. This database table does not have a unique secondary index and the result is therefore not platform-specific.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">TYPES</span> <span class="nv">itab</span> <span class="k">TYPE TABLE OF</span> <span class="nv">demo_update</span> <span class="k">WITH</span> <span class="nv">EMPTY</span> <span class="k">KEY</span><span class="p">.</span> 

<span class="k">DATA</span><span class="p">(</span><span class="nv">itab</span><span class="p">)</span> <span class="o">=</span> <span class="k">VALUE</span> <span class="nv">itab</span><span class="p">(</span> 
  <span class="p">(</span> <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;X&#39;</span> <span class="nv">col1</span> <span class="o">=</span>  <span class="mi">1</span> <span class="nv">col2</span> <span class="o">=</span>  <span class="mi">2</span> <span class="nv">col3</span> <span class="o">=</span>  <span class="mi">3</span> <span class="nv">col4</span> <span class="o">=</span>  <span class="mi">4</span> <span class="p">)</span> 
  <span class="p">(</span> <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;Y&#39;</span> <span class="nv">col1</span> <span class="o">=</span> <span class="mi">11</span> <span class="nv">col2</span> <span class="o">=</span> <span class="mi">12</span> <span class="nv">col3</span> <span class="o">=</span> <span class="mi">13</span> <span class="nv">col4</span> <span class="o">=</span> <span class="mi">14</span> <span class="p">)</span> 
  <span class="p">(</span> <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;Z&#39;</span> <span class="nv">col1</span> <span class="o">=</span> <span class="mi">21</span> <span class="nv">col2</span> <span class="o">=</span> <span class="mi">22</span> <span class="nv">col3</span> <span class="o">=</span> <span class="mi">23</span> <span class="nv">col4</span> <span class="o">=</span> <span class="mi">24</span> <span class="p">)</span> <span class="p">).</span> 

<span class="k">MODIFY</span> <span class="nv">demo_update</span> <span class="k">FROM</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">itab</span><span class="p">.</span>
</code></pre></div>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The same example as before, but with a host expression.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">MODIFY</span> <span class="nv">demo_update</span> <span class="k">FROM</span> <span class="k">TABLE</span> <span class="err">@</span><span class="p">(</span> 
  <span class="k">VALUE</span> <span class="err">#</span><span class="p">(</span> <span class="p">(</span> <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;X&#39;</span> <span class="nv">col1</span> <span class="o">=</span>  <span class="mi">1</span> <span class="nv">col2</span> <span class="o">=</span>  <span class="mi">2</span> <span class="nv">col3</span> <span class="o">=</span>  <span class="mi">3</span> <span class="nv">col4</span> <span class="o">=</span>  <span class="mi">4</span> <span class="p">)</span> 
           <span class="p">(</span> <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;Y&#39;</span> <span class="nv">col1</span> <span class="o">=</span> <span class="mi">11</span> <span class="nv">col2</span> <span class="o">=</span> <span class="mi">12</span> <span class="nv">col3</span> <span class="o">=</span> <span class="mi">13</span> <span class="nv">col4</span> <span class="o">=</span> <span class="mi">14</span> <span class="p">)</span> 
           <span class="p">(</span> <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;Z&#39;</span> <span class="nv">col1</span> <span class="o">=</span> <span class="mi">21</span> <span class="nv">col2</span> <span class="o">=</span> <span class="mi">22</span> <span class="nv">col3</span> <span class="o">=</span> <span class="mi">23</span> <span class="nv">col4</span> <span class="o">=</span> <span class="mi">24</span> <span class="p">)</span> <span class="p">)</span> <span class="p">).</span>
</code></pre></div>
</div></p>
<h3 id="executable-example">Executable Example</h3>
<p><a href="../abenbulk_modify_abexa" class="blue"><code style="display: inline;"><span class="qtext">MODIFY FROM TABLE</span></code></a>  </p>
<p><a name="@@( SELECT ... )@@MODIFY dbtab@@"></a>
<a name="!ABAP_ALTERNATIVE_3@3@"></a></p>
<h2 id="alternative-3">Alternative 3</h2>
<p><code style="display: inline;"><span class="qtext">... ( SELECT subquery_clauses <i class="bn">[</i>UNION ...<i class="bn">]</i> ) ...</span></code><br />
 <br><!-- /A --></p>
<h3 id="effect_3">Effect</h3>
<p>If a parenthesized <a href="../abensubquery_glosry" class="grey" title="Glossary Entry">subquery</a>
is specified, the rows in the results set defined by <a href="../abapinsert_from_select" class="blue"><span class="qtext">
subquery_clauses</span></a> are evaluated to overwrite the existing rows or to insert new rows. The
language element <a href="../abapunion" class="blue"><code style="display: inline;"><span class="qtext">UNION</span></code></a> can be used
to combine the results sets of multiple subqueries. In this case, special rules <a href="../abapunion_clause" class="blue"><code style="display: inline;"><span class="qtext">query_clauses</span></code></a> apply for specifying clauses.</p>
<p>With a subquery, the statement <code style="display: inline;"><span class="qtext">MODIFY</span></code> demonstrates platform-dependent behavior (as when an internal table is specified) in accordance with one of two patterns:</p>
<ul>

<li>
<code style="display: inline;"><span class="qtext">UPDATE</span></code> followed by <code style="display: inline;"><span class="qtext">INSERT</span></code>
</li>
<li>
Row by row <code style="display: inline;"><span class="qtext">MODIFY</span></code>
<br></li>

</ul>

<p>With respect to the following actions,</p>
<ul>

<li>
client handling,
</li>
<li>
inserting or modifying the data in the database table or view , and
</li>
<li>
handling of null values,
<br></li>

</ul>

<p>the same rules and notes apply as when using a subquery as a
<a href="../abapinsert_source" class="blue">data source</a> of the statement <a href="../abapinsert_dbtab" class="blue"><code style="display: inline;"><span class="qtext">INSERT</span></code></a>.</p>
<p>If the results set of the subquery is empty, no rows are processed and <code style="display: inline;"><span class="qtext">sy-subrc</span></code> is set to 4.</p>
<p>A subquery in the statement <code style="display: inline;"><span class="qtext">MODIFY</span></code> is not supported by all databases. This means a syntax check warning from the
<a href="../abenextended_program_check_glosry" class="grey" title="Glossary Entry">extended program
check</a> can occur that can be hidden using the pragma <code style="display: inline;"><span class="qtext">##db_feature_mode[modify_from_select]</span></code>.
If this is detected at runtime on a database that does not support the pragma, a handleable exception of the class <span class="lnkgrey">CX_SY_SQL_UNSUPPORTED_FEATURE</span> is raised.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>
The constant MODIFY_FROM_SELECT of the class <a href="../abencl_abap_dbfeatures" class="blue">CL_ABAP_DBFEATURES</a>
can be used to query whether the current database supports subqueries in the statement <code style="display: inline;"><span class="qtext">MODIFY</span></code>.
</li>

<li>
When a subquery is used in the statement <code style="display: inline;"><span class="qtext">MODIFY</span></code>, the syntax check is performed in
<a href="../abenopensql_strict_mode_753" class="blue">strict mode</a> from Release 7.53, which handles the statement more strictly than the regular syntax check.
<br></li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>A subquery of the statement <code style="display: inline;"><span class="qtext">MODIFY</span></code> reads all rows in the database table <span class="qtext">
demo_join3</span> and uses the results set to modify the database table <code style="display: inline;"><span class="qtext">demo_join1</span></code>.
Two rows of the results set overwrite existing rows in <code style="display: inline;"><span class="qtext">demo_join1</span></code> and a row is inserted.</p>
<div class="highlight"><pre><span></span><code><span class="k">DELETE</span> <span class="k">FROM</span> <span class="nv">demo_join1</span><span class="p">.</span> 
<span class="k">INSERT</span> <span class="nv">demo_join1</span> 
  <span class="k">FROM</span> <span class="k">TABLE</span> <span class="err">@</span><span class="p">(</span> <span class="k">VALUE</span> <span class="err">#</span><span class="p">(</span> <span class="p">(</span> <span class="nv">a</span> <span class="o">=</span> <span class="s1">&#39;a1&#39;</span> <span class="nv">b</span> <span class="o">=</span> <span class="s1">&#39;b1&#39;</span> <span class="nv">c</span> <span class="o">=</span> <span class="s1">&#39;c1&#39;</span> <span class="nv">d</span> <span class="o">=</span> <span class="s1">&#39;d1&#39;</span> <span class="p">)</span> 
                         <span class="p">(</span> <span class="nv">a</span> <span class="o">=</span> <span class="s1">&#39;a2&#39;</span> <span class="nv">b</span> <span class="o">=</span> <span class="s1">&#39;b2&#39;</span> <span class="nv">c</span> <span class="o">=</span> <span class="s1">&#39;c2&#39;</span> <span class="nv">d</span> <span class="o">=</span> <span class="s1">&#39;d2&#39;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">).</span> 
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="nv">demo_join3</span><span class="p">.</span> 
<span class="k">INSERT</span> <span class="nv">demo_join3</span> 
  <span class="k">FROM</span> <span class="k">TABLE</span> <span class="err">@</span><span class="p">(</span> <span class="k">VALUE</span> <span class="err">#</span><span class="p">(</span> <span class="p">(</span> <span class="nv">i</span> <span class="o">=</span> <span class="s1">&#39;a1&#39;</span> <span class="nv">j</span> <span class="o">=</span> <span class="s1">&#39;j1&#39;</span> <span class="nv">k</span> <span class="o">=</span> <span class="s1">&#39;k1&#39;</span> <span class="nv">l</span> <span class="o">=</span> <span class="s1">&#39;l1&#39;</span> <span class="p">)</span> 
                         <span class="p">(</span> <span class="nv">i</span> <span class="o">=</span> <span class="s1">&#39;a2&#39;</span> <span class="nv">j</span> <span class="o">=</span> <span class="s1">&#39;j2&#39;</span> <span class="nv">k</span> <span class="o">=</span> <span class="s1">&#39;k2&#39;</span> <span class="nv">l</span> <span class="o">=</span> <span class="s1">&#39;l2&#39;</span> <span class="p">)</span> 
                         <span class="p">(</span> <span class="nv">i</span> <span class="o">=</span> <span class="s1">&#39;i3&#39;</span> <span class="nv">j</span> <span class="o">=</span> <span class="s1">&#39;j3&#39;</span> <span class="nv">k</span> <span class="o">=</span> <span class="s1">&#39;k3&#39;</span> <span class="nv">l</span> <span class="o">=</span> <span class="s1">&#39;l3&#39;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">).</span> 

<span class="k">MODIFY</span> <span class="nv">demo_join1</span> <span class="k">FROM</span> <span class="p">(</span> <span class="k">SELECT</span> <span class="nv">i</span><span class="p">,</span> <span class="nv">j</span><span class="p">,</span> <span class="nv">k</span><span class="p">,</span> <span class="nv">l</span> <span class="k">FROM</span> <span class="nv">demo_join3</span> <span class="p">).</span> 

<span class="k">SELECT</span> <span class="o">*</span> 
       <span class="k">FROM</span> <span class="nv">demo_join1</span> 
       <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">result</span><span class="p">).</span> 

<span class="nv">cl_demo_output</span><span class="o">=&gt;</span><span class="nf">display</span><span class="p">(</span> <span class="nv">result</span> <span class="p">).</span>
</code></pre></div>

</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>