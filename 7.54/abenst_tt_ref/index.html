


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abenst tt ref - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#st-ttref-current-node" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abenst tt ref
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
    <nav class="md-nav" aria-label="Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#effect" class="md-nav__link">
    Effect
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-a-command-to-set-the-current-node" class="md-nav__link">
    Use a command to set the current node
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-an-attribute-to-set-the-current-node" class="md-nav__link">
    Use an attribute to set the current node
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sets-the-current-node-in-literal-xml-elements" class="md-nav__link">
    Sets the current node in literal XML elements
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abenst_tt_ref.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP &#x2212; Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_data_communication" class="blue">Data Interfaces and Communication Interfaces</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_xml" class="blue">ABAP and XML</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_xml_trafos" class="blue">Transformations for XML</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_st" class="blue">ST - Simple Transformations</a>&#xA0;&#x2192;&#xA0;
<a href="../abenst_addressing" class="blue">ST - Addressing ABAP Data</a>&#xA0;</small></p>
<h1 id="st-ttref-current-node">ST - tt:ref, Current Node</h1>
<p><a name="@@ITOC@@ABENST_TT_REF_1"></a>
Other versions: 
 <a href="../../7.31/abenst_tt_ref">7.31</a> | <a href="../../7.40/abenst_tt_ref">7.40</a> | <b>7.54</b></p>
<h2 id="syntax">Syntax</h2>
<p><pre><code class="hljs abap abap-docs-syntax-block">
<span class="qtext400">... <i class="bn">[</i>tt:<i class="bn">]</i>ref ...</span>
</code></pre></p>
<h3 id="effect">Effect</h3>
<p>Exactly one node of the tree structures of the current template can be set as the current node at any
place within a simple transformation (statically and when the program is executed). The current node
obscures the data roots in the sense that a reference <span class="qtext400">name</span> does not refer to a root <span class="qtext400">name</span>, but to the component <span class="qtext400">name</span> of the current node (see
<a href="../abenst_addressing_subnodes" class="blue">Addressing Subnodes</a>). If the current node is defined, it is the implicit operand of many
<a href="../abenst_statements" class="blue">ST commands</a>, but it can also be addressed explicitly using <span class="qtext400">$ref</span>.</p>
<p>This section shows how to set the current node explicitly using <span class="qtext400"><i class="bn">[</i>tt:<i class="bn">]</i>ref</span>. In addition, the statement <a href="../abenst_tt_loop" class="blue"><span class="qtext400">tt:loop</span></a> for transforming internal tables also sets the current node.</p>
<p>At positions where the current node is not set explicitly, it is undefined and cannot be addressed using
<span class="qtext400">$ref</span>. In these positions, the data roots are not obscured and they can be addressed using <span class="qtext400">name</span>.</p>
<p><a name="@@ITOC@@ABENST_TT_REF_2"></a></p>
<h2 id="use-a-command-to-set-the-current-node">Use a command to set the current node</h2>
<p><dd>
<span class="qtext400">&lt;tt:ref name=&quot;node&quot;&gt; <br>&#xA0;&#xA0;... <br>&lt;/tt:ref&gt;</span>
</dd></p>
<p>The command <span class="qtext400">tt:ref</span> sets the current node to the node specified in <span class="qtext400">
node</span>. Any addressable data node can be specified for <span class="qtext400">node</span>. If no valid node is specified, the current node is undefined.</p>
<p>The <span class="qtext400">tt:ref</span> command can be nested. It builds a context in which the currently
set node is valid. Outside the corresponding XML element, the current outermost node is still valid. On the top level, the current node is always undefined.</p>
<p>The command <span class="qtext400">tt:ref</span> itself has no operational effect; it only influences the impact of the commands nested within it.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>As a result of the <a href="../abenst_addressing_nodes" class="blue">addressing rules</a>, only a subnode of the current node can be set as the new current node, unless a data root is being set.</p>
<p><a name="@@ITOC@@ABENST_TT_REF_3"></a>
</div></p>
<h2 id="use-an-attribute-to-set-the-current-node">Use an attribute to set the current node</h2>
<p><dd>
<span class="qtext400">&lt;tt:... ref=&quot;node&quot;&gt; <br>&#xA0;&#xA0;... <br>&lt;/tt:...&gt;</span>
</dd></p>
<p>Many <a href="../abenst_statements" class="blue">ST commands</a> make it possible to specify the current
node as the content of the attribute <span class="qtext400">ref</span>. The same rules apply to <span class="qtext400">
node</span> as when setting using the command <span class="qtext400">tt:ref</span>. If no attribute
<span class="qtext400">ref</span> is specified, the command applies to the current node of the context. The currently set node is valid only within the context of the ST command.</p>
<p><a name="@@ITOC@@ABENST_TT_REF_4"></a></p>
<h2 id="sets-the-current-node-in-literal-xml-elements">Sets the current node in literal XML elements</h2>
<p><dd>
<span class="qtext400">&lt;... tt:ref=&quot;node&quot;&gt; <br>&#xA0;&#xA0;... <br>&lt;/...&gt;</span>
</dd></p>
<p>In a <a href="../abenst_xml_literals" class="blue">literal XML element</a>, <span class="qtext400">tt:ref</span>
is a special attribute in the namespace of the ST command and sets the current node there. The same
rules apply to <span class="qtext400">node</span> as when setting using the command <span class="qtext400">tt:ref</span>. The currently set node is valid only within the context of the XML element.</p>
<p><br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following ST program can be used to serialize a nested ABAP structure:</p>
<dd>
<span class="qtext400">&lt;tt:transform <br>&#xA0;&#xA0;xmlns:tt=&quot;http://www.sap.com/transformation-templates&quot;&gt; <br>
&#xA0;&#xA0;&lt;tt:root name=&quot;ROOT&quot;/&gt; <br>&#xA0;&#xA0;&lt;tt:template&gt; <br>&#xA0;&#xA0;&#xA0;&#xA0;&lt;X tt:ref=&quot;ROOT&quot;&gt; <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;X1&gt; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;tt:value ref=&quot;COL1&quot; /&gt; <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/X1&gt; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;X2&gt; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;tt:value ref=&quot;COL2&quot; /&gt; <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/X2&gt; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;X3 tt:ref=&quot;STRUC2&quot;&gt; <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;X1&gt; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;tt:value ref=&quot;COL1&quot; /&gt; <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/X1&gt; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;X2&gt; <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;tt:value ref=&quot;COL2&quot; /&gt; <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/X2&gt; <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/X3&gt; <br>&#xA0;&#xA0;&#xA0;&#xA0;&lt;/X&gt; <br>&#xA0;&#xA0;&lt;/tt:template&gt; <br>&lt;/tt:transform&gt;</span>
</dd>

<p>The current node is changed as follows:</p>
<ul>

<li>At the beginning of the (nameless) main template, the current node is undefined. The data root <span class="qtext400">ROOT</span> can be addressed directly using <span class="qtext400">&quot;ROOT&quot;</span>.</li>

</ul>

<ul>

<li>The current node is set to the data root for the entire element <span class="qtext400">X</span>.
Within <span class="qtext400">X</span>, only <span class="qtext400">&quot;.ROOT&quot;</span> could be used for addressing the data root directly.</li>

</ul>

<ul>

<li>In the context of the two subsequent <span class="qtext400">tt:value</span> commands, the current
node is set consecutively to the subnodes <span class="qtext400">COL1</span> and <span class="qtext400">COL2</span>
of <span class="qtext400">ROOT</span>. The commands serialize or deserialize the ABAP data object that is bound to the current node.</li>

</ul>

<ul>

<li>The current node for literal element <span class="qtext400">X3</span>, which is nested in <span class="qtext400">
X</span>, is set to another subnode <span class="qtext400">STRUC2</span> of <span class="qtext400">ROOT</span>.</li>

</ul>

<ul>

<li>In the context of the two subsequent <span class="qtext400">tt:value</span> commands, the current
node is set consecutively to the subnodes <span class="qtext400">COL1</span> and <span class="qtext400">COL2</span>
of <span class="qtext400">STRUC2</span>. ,,Each time an element is exited, the current node is set back to that of the surrounding element.</li>

</ul>

<p>Also see the example for calling a transformation in the <a href="../abenst_tt_value_structure" class="blue"><span class="qtext400">tt:value</span>, Structures</a> section.</p>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>