


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abenconversion references - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#assignment-rules-for-reference-variables" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abenconversion references
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#static-type-and-dynamic-type" class="md-nav__link">
    Static Type and Dynamic Type
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#up-cast-and-down-cast" class="md-nav__link">
    Up Cast and Down Cast
  </a>
  
    <nav class="md-nav" aria-label="Up Cast and Down Cast">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#up-cast" class="md-nav__link">
    Up Cast
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#down-cast" class="md-nav__link">
    Down Cast
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#continue" class="md-nav__link">
    Continue
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abenconversion_references.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP &#x2212; Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_data_working" class="blue">Processing Internal Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenvalue_assignments" class="blue">Assignments</a>&#xA0;&#x2192;&#xA0;
<a href="../abenreference_assignments" class="blue">Assigning References</a>&#xA0;&#x2192;&#xA0;
<a href="../abenset_references" class="blue">Setting Reference Variables</a>&#xA0;</small></p>
<h1 id="assignment-rules-for-reference-variables">Assignment Rules for Reference Variables</h1>
<p>The content of a reference variable can only be assigned to another reference variable. At the same time,</p>
<ul>

<li><a href="../abenconversion_references_data" class="blue">data references can only be assigned to data reference variables</a> and</li>

</ul>

<ul>

<li><a href="../abenconversion_references_objects" class="blue">object references can only be assigned to object reference variables</a></li>

</ul>

<p>. No conversion takes place when variables are assigned. For an assignment to take place, the
<a href="../abenstatic_type_glosry" class="grey" title="Glossary Entry">static type</a> of the target reference variable must be more general than or match the
<a href="../abendynamic_type_glosry" class="grey" title="Glossary Entry">dynamic type</a> of the source
reference variable.  If the assignment is successful, the target reference variable points to the same
object as the source reference variable, meaning that the target reference variable inherits the dynamic type of the source reference variable.</p>
<ul>

<li><a href="#@@ITOC@@ABENCONVERSION_REFERENCES_1" class="blue">Static Type and Dynamic Type</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@ABENCONVERSION_REFERENCES_2" class="blue">Up Cast and Down Cast</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@ABENCONVERSION_REFERENCES_3" class="blue">Up Cast</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@ABENCONVERSION_REFERENCES_4" class="blue">Down Cast</a></li>

</ul>

<p>Other versions: 
 <a href="../../7.31/abenconversion_references">7.31</a> | <a href="../../7.40/abenconversion_references">7.40</a> | <b>7.54</b></p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>Reference variables can point to <a href="../abenobject_glosry" class="grey" title="Glossary Entry">objects</a> in the
<a href="../abeninternal_session_glosry" class="grey" title="Glossary Entry">internal session</a> or in the
<a href="../abenshared_objects_memory_glosry" class="grey" title="Glossary Entry">shared objects memory</a>. An
<a href="../abenarea_handle_glosry" class="grey" title="Glossary Entry">area handle</a> is used to bind an
<a href="../abenarea_instance_version_glosry" class="grey" title="Glossary Entry">area instance version</a> to a program, however references from the program can be made to
<a href="../abenshared_objects_glosry" class="grey" title="Glossary Entry">shared objects</a> and vice
versa (if these are read or write references).  In other cases, an area instance version is closed,
which means that no references can point to the internal session from an area instance version. References
that point from the internal session to shared objects can be saved, but not dereferenced. Object references
and data references are possible within a completed area instance version, although data references are subject to restrictions with respect to the dynamic type.</p>
<p><a name="@@ITOC@@ABENCONVERSION_REFERENCES_1"></a>
</div></p>
<h2 id="static-type-and-dynamic-type">Static Type and Dynamic Type</h2>
<p>Each reference variable has a dynamic type and a static type.</p>
<ul>

<li>The dynamic type is defined at runtime of the program, and is the data type of the data object or
the class of the object to which the reference variable points. It determines the components contained in the object.</li>

</ul>

<ul>

<li>The static type is set with the declaration of the reference variable. In data references, the static
type is either a non-generic data type or the predefined generic type <code style="display: inline;"><span class="qtext">data</span></code>.
In object references, the static type is either a class or an interface, so an object reference can also be referred to as a class reference or an interface reference.</li>

</ul>

<p>The static type of a reference variable is always less specific or the same as the dynamic type.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>An initial reference variable contains the <a href="../abennull_reference_glosry" class="grey" title="Glossary Entry">
null reference</a>, which does not point to any objects. This means that it does not have a data type
or a class as a dynamic type. The same applies to a non-initial reference variable containing an invalid reference that no longer points to an object.</p>
<p></div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The object reference variable <code style="display: inline;"><span class="qtext">oref</span></code> has the static type <code style="display: inline;"><span class="qtext">super_class</span></code>.
After the object is generated with <code style="display: inline;"><span class="qtext">NEW</span></code>, its dynamic type is the special class <code style="display: inline;"><span class="qtext">sub_class</span></code> - as shown by
<a href="../abenrun_time_type_identific_glosry" class="grey" title="Glossary Entry">RTTI</a>.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">CLASS</span> <span class="nv">super_class</span> <span class="k">DEFINITION</span><span class="p">.</span> 
<span class="k">ENDCLASS</span><span class="p">.</span> 

<span class="k">CLASS</span> <span class="nv">sub_class</span> <span class="k">DEFINITION</span> <span class="k">INHERITING FROM</span> <span class="nv">super_class</span><span class="p">.</span> 
<span class="k">ENDCLASS</span><span class="p">.</span> 

<span class="k">DATA</span> <span class="nv">oref</span> <span class="k">TYPE REF TO</span> <span class="nv">super_class</span><span class="p">.</span> 

<span class="k">START-OF-SELECTION</span><span class="p">.</span> 
  <span class="nv">oref</span> <span class="o">=</span> <span class="nv">NEW</span> <span class="nv">sub_class</span><span class="p">(</span> <span class="p">).</span> 

  <span class="nv">cl_demo_output</span><span class="o">=&gt;</span><span class="nf">display</span><span class="p">(</span> <span class="nv">CAST</span> <span class="nv">cl_abap_classdescr</span><span class="p">(</span> 
    <span class="nv">cl_abap_refdescr</span><span class="o">=&gt;</span><span class="nf">describe_by_object_ref</span><span class="p">(</span> <span class="nv">oref</span> <span class="p">)</span> <span class="p">)</span><span class="o">-&gt;</span><span class="nv">absolute_name</span> <span class="p">).</span>
</code></pre></div>
<a name="@@ITOC@@ABENCONVERSION_REFERENCES_2"></a>
</div></p>
<h2 id="up-cast-and-down-cast">Up Cast and Down Cast</h2>
<p>In an assignment between reference variables, the target variable applies the dynamic type of the source
variable. An assignment is possible if the static type of the target variable is less specific or the same as the dynamic type of the source variables.</p>
<p><a name="@@ITOC@@ABENCONVERSION_REFERENCES_3"></a></p>
<h3 id="up-cast">Up Cast</h3>
<p>If the static type of the target variables is less specific or the same as the static type of the source
variable, assignment is always possible. The name up cast arises from the fact that the movement within
the inheritance space is upwards. Since the target variable can accept more dynamic types in comparison
to the source variables, this assignment is also known as a widening cast. An up cast is possible in
all ABAP statements in which the content of a data object is assigned to another data object. This includes, for example, assignments with the normal assignment operator
(<a href="../abapmove_cast" class="blue"><code style="display: inline;"><span class="qtext">=</span></code></a>), the insertion of rows in internal tables, or passes from actual to formal parameters.</p>
<p>Explicit castings using the <a href="../abencasting_operator_glosry" class="grey" title="Glossary Entry">casting
operator</a> <a href="../abapmove_cast" class="blue"><code style="display: inline;"><span class="qtext">?=</span></code></a> are also possible, but not usually necessary. Using the
<a href="../abencasting_operator_glosry" class="grey" title="Glossary Entry">casting
operators</a> <a href="../abenconstructor_expression_cast" class="blue"><code style="display: inline;"><span class="qtext">CAST</span></code></a> for an up cast in combination with
<a href="../abendata_inline" class="blue">inline declarations</a>, however, can be a good way of providing a reference variable with a more general type.</p>
<p><br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>See the previous example. The statement <span class="qtext">iref = NEW class(
)</span> is an up cast, because it is followed by an reference variable of the static type of a superclass that references an object of a subclass.</p>
<p><a name="@@ITOC@@ABENCONVERSION_REFERENCES_4"></a>
</div></p>
<h3 id="down-cast">Down Cast</h3>
<p>If the static type of the target variable is more specific than the static type of the source variable,
a check must be made at runtime (before the assignment is executed) to see whether it is less specific
or the same as the dynamic type of the source variable. The name down cast arises from the fact that
the movement in the inheritance space is downwards. Since the target variable can accept fewer dynamic
types in comparison to the source variable, this assignment is also known as a narrowing cast. A down cast must always be performed explicitly. The following options are available:</p>
<ul>

<li>Special assignment with the <a href="../abencasting_operator_glosry" class="grey" title="Glossary Entry">
casting operator</a> <a href="../abapmove_cast" class="blue"><code style="display: inline;"><span class="qtext">?=</span></code></a>.</li>

</ul>

<ul>

<li>Using a <a href="../abenconstructor_expression_glosry" class="grey" title="Glossary Entry">constructor expression</a> with the
<a href="../abencasting_operator_glosry" class="grey" title="Glossary Entry">casting operator</a> <a href="../abenconstructor_expression_cast" class="blue"><code style="display: inline;"><span class="qtext">CAST</span></code></a>.</li>

</ul>

<ul>

<li>Using the addition <code style="display: inline;"><span class="qtext">INTO</span></code> of the statement <a href="../abapwhen_type" class="blue">
<code style="display: inline;"><span class="qtext">WHEN TYPE</span></code></a> in a case distinction with <a href="../abapcase_type" class="blue"><code style="display: inline;"><span class="qtext">CASE TYPE OF</span></code></a> for object reference variables.</li>

</ul>

<p>If this prerequisite is not met, a handleable exception is raised and the reference variable keeps its original value after the assignment.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>For non-initial source variables, the predicate expression <a href="../abenlogexp_instance_of" class="blue">
<code style="display: inline;"><span class="qtext">IS INSTANCE OF</span></code></a> or the case distinction <a href="../abapcase_type" class="blue"><span class="qtext">
CASE TYPE OF</span></a> can be used to check whether a down cast can be applied to specific classes or interfaces.</li>

<p></ul>
<ul></p>
<li>The dynamic type of an initial or invalid source variable is undefined. In a down cast, the
<a href="../abennull_reference_glosry" class="grey" title="Glossary Entry">null reference</a> or an
invalid reference that does not point to an object can be assigned to every target variable that can be specified here.</li>

<p></ul>
<ul></p>
<li>When a subclass is instantiated, an associated object reference variable cannot be cast to the subclass until the
<a href="../abeninstance_constructor_glosry" class="grey" title="Glossary Entry">instance constructors</a>
of all superclasses have been executed. When an instance constructor is executed, the dynamic type of the object reference variable is the current superclass.</li>

<p></ul>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following example shows the three ways of performing a down cast for object reference variables.</p>
<ul>

<li>If the casting operator <a href="../abapmove_cast" class="blue"><code style="display: inline;"><span class="qtext">?=</span></code></a> is used, the exception CX_SY_MOVE_CAST_ERROR is caught if a down cast is not possible.</li>

</ul>

<ul>

<li>If the casting operator <a href="../abenconstructor_expression_cast" class="blue"><code style="display: inline;"><span class="qtext">CAST</span></code></a>
is used, the predicate expression <a href="../abenlogexp_instance_of" class="blue"><code style="display: inline;"><span class="qtext">IS INSTANCE OF</span></code></a> is used in advance to check whether the down cast is possible.</li>

</ul>

<ul>

<li>The use of the addition <code style="display: inline;"><span class="qtext">INTO</span></code> of the statement <a href="../abapwhen_type" class="blue">
<code style="display: inline;"><span class="qtext">WHEN TYPE</span></code></a> in a case distinction with <a href="../abapcase_type" class="blue"><code style="display: inline;"><span class="qtext">CASE TYPE OF</span></code></a> combines the check and the down cast.</li>

</ul>

<p>In each case, <code style="display: inline;"><span class="qtext">oref</span></code> is assigned to the class reference variable that is reached
first. Of course, a <code style="display: inline;"><span class="qtext">IS INSTANCE OF</span></code> check would also be possible before the use of the casting operator <code style="display: inline;"><span class="qtext">?=</span></code>.</p>
<div class="highlight"><pre><span></span><code><span class="k">CLASS</span> <span class="nv">c1</span> <span class="k">DEFINITION</span><span class="p">.</span> 
  <span class="k">PUBLIC SECTION</span><span class="p">.</span> 
    <span class="k">DATA</span> <span class="nv">a1</span> <span class="k">TYPE </span><span class="nv">string</span> <span class="k">VALUE</span> <span class="s1">`C1`</span><span class="p">.</span> 
<span class="k">ENDCLASS</span><span class="p">.</span> 
<span class="k">CLASS</span> <span class="nv">c2</span> <span class="k">DEFINITION</span> <span class="k">INHERITING FROM</span> <span class="nv">c1</span><span class="p">.</span> 
  <span class="k">PUBLIC SECTION</span><span class="p">.</span> 
    <span class="k">DATA</span> <span class="nv">a2</span> <span class="k">TYPE </span><span class="nv">string</span> <span class="k">VALUE</span> <span class="s1">`C2`</span><span class="p">.</span> 
<span class="k">ENDCLASS</span><span class="p">.</span> 
<span class="k">CLASS</span> <span class="nv">c3</span> <span class="k">DEFINITION</span> <span class="k">INHERITING FROM</span> <span class="nv">c2</span><span class="p">.</span> 
  <span class="k">PUBLIC SECTION</span><span class="p">.</span> 
    <span class="k">DATA</span> <span class="nv">a3</span> <span class="k">TYPE </span><span class="nv">string</span> <span class="k">VALUE</span> <span class="s1">`C3`</span><span class="p">.</span> 
<span class="k">ENDCLASS</span><span class="p">.</span> 

<span class="k">DATA</span><span class="p">(</span><span class="nv">o</span><span class="p">)</span> <span class="o">=</span> <span class="nv">cl_demo_output</span><span class="o">=&gt;</span><span class="nf">new</span><span class="p">(</span> <span class="p">).</span> 

<span class="k">DATA</span> <span class="nv">oref</span> <span class="k">TYPE REF TO</span> <span class="k">object</span><span class="p">.</span> 

<span class="nv">oref</span> <span class="o">=</span> <span class="nv">NEW</span> <span class="nv">c1</span><span class="p">(</span> <span class="p">).</span> 
<span class="k">DATA</span><span class="p">:</span> 
  <span class="nv">cref11</span> <span class="k">TYPE REF TO</span> <span class="nv">c1</span><span class="p">,</span> 
  <span class="nv">cref12</span> <span class="k">TYPE REF TO</span> <span class="nv">c2</span><span class="p">,</span> 
  <span class="nv">cref13</span> <span class="k">TYPE REF TO</span> <span class="nv">c3</span><span class="p">.</span> 
<span class="k">TRY</span><span class="p">.</span> 
    <span class="nv">cref13</span> <span class="o">?=</span> <span class="nv">oref</span><span class="p">.</span> 
    <span class="nv">o</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">cref13</span><span class="o">-&gt;</span><span class="nv">a3</span> <span class="p">).</span> 
  <span class="k">CATCH</span> <span class="nv">cx_sy_move_cast_error</span><span class="p">.</span> 
    <span class="k">TRY</span><span class="p">.</span> 
        <span class="nv">cref12</span> <span class="o">?=</span> <span class="nv">oref</span><span class="p">.</span> 
        <span class="nv">o</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">cref12</span><span class="o">-&gt;</span><span class="nv">a2</span> <span class="p">).</span> 
      <span class="k">CATCH</span> <span class="nv">cx_sy_move_cast_error</span><span class="p">.</span> 
        <span class="k">TRY</span><span class="p">.</span> 
            <span class="nv">cref11</span> <span class="o">?=</span> <span class="nv">oref</span><span class="p">.</span> 
            <span class="nv">o</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">cref11</span><span class="o">-&gt;</span><span class="nv">a1</span> <span class="p">).</span> 
          <span class="k">CATCH</span> <span class="nv">cx_sy_move_cast_error</span><span class="p">.</span> 
        <span class="k">ENDTRY</span><span class="p">.</span> 
    <span class="k">ENDTRY</span><span class="p">.</span> 
<span class="k">ENDTRY</span><span class="p">.</span> 

<span class="nv">oref</span> <span class="o">=</span> <span class="nv">NEW</span> <span class="nv">c2</span><span class="p">(</span> <span class="p">).</span> 
<span class="k">IF</span> <span class="nv">oref</span> <span class="nv">IS</span> <span class="nv">INSTANCE</span> <span class="k">OF</span> <span class="nv">c3</span><span class="p">.</span> 
  <span class="k">DATA</span><span class="p">(</span><span class="nv">cref23</span><span class="p">)</span> <span class="o">=</span> <span class="nv">CAST</span> <span class="nv">c3</span><span class="p">(</span> <span class="nv">oref</span> <span class="p">).</span> 
  <span class="nv">o</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">cref23</span><span class="o">-&gt;</span><span class="nv">a3</span> <span class="p">).</span> 
<span class="k">ELSEIF</span> <span class="nv">oref</span> <span class="nv">IS</span> <span class="nv">INSTANCE</span> <span class="k">OF</span> <span class="nv">c2</span><span class="p">.</span> 
  <span class="k">DATA</span><span class="p">(</span><span class="nv">cref22</span><span class="p">)</span> <span class="o">=</span> <span class="nv">CAST</span> <span class="nv">c2</span><span class="p">(</span> <span class="nv">oref</span> <span class="p">).</span> 
  <span class="nv">o</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">cref22</span><span class="o">-&gt;</span><span class="nv">a2</span> <span class="p">).</span> 
<span class="k">ELSEIF</span> <span class="nv">oref</span> <span class="nv">IS</span> <span class="nv">INSTANCE</span> <span class="k">OF</span> <span class="nv">c1</span><span class="p">.</span> 
  <span class="k">DATA</span><span class="p">(</span><span class="nv">cref21</span><span class="p">)</span> <span class="o">=</span> <span class="nv">CAST</span> <span class="nv">c1</span><span class="p">(</span> <span class="nv">oref</span> <span class="p">).</span> 
  <span class="nv">o</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">cref21</span><span class="o">-&gt;</span><span class="nv">a1</span> <span class="p">).</span> 
<span class="k">ENDIF</span><span class="p">.</span> 

<span class="nv">oref</span> <span class="o">=</span> <span class="nv">NEW</span> <span class="nv">c3</span><span class="p">(</span> <span class="p">).</span> 
<span class="k">CASE</span> <span class="k">TYPE OF</span> <span class="nv">oref</span><span class="p">.</span> 
  <span class="k">WHEN</span> <span class="k">TYPE </span><span class="nv">c3</span> <span class="k">INTO</span> <span class="k">DATA</span><span class="p">(</span><span class="nv">cref33</span><span class="p">).</span> 
    <span class="nv">o</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">cref33</span><span class="o">-&gt;</span><span class="nv">a3</span> <span class="p">).</span> 
  <span class="k">WHEN</span> <span class="k">TYPE </span><span class="nv">c2</span> <span class="k">INTO</span> <span class="k">DATA</span><span class="p">(</span><span class="nv">cref32</span><span class="p">).</span> 
    <span class="nv">o</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">cref32</span><span class="o">-&gt;</span><span class="nv">a2</span> <span class="p">).</span> 
  <span class="k">WHEN</span> <span class="k">TYPE </span><span class="nv">c1</span> <span class="k">INTO</span> <span class="k">DATA</span><span class="p">(</span><span class="nv">cref31</span><span class="p">).</span> 
    <span class="nv">o</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">cref31</span><span class="o">-&gt;</span><span class="nv">a1</span> <span class="p">).</span> 
<span class="k">ENDCASE</span><span class="p">.</span> 

<span class="nv">o</span><span class="o">-&gt;</span><span class="nf">display</span><span class="p">(</span> <span class="p">).</span>
</code></pre></div>

</div>

<h3 id="continue">Continue</h3>
<p><a href="../abenconversion_references_data" class="blue">Assignments Between Data Reference Variables</a></p>
<p><a href="../abenconversion_references_objects" class="blue">Assignments Between Object Reference Variables</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>