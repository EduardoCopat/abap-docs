


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>INSERT, UPDATE, MODIFY dbtab - LOB Handles - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#insert-update-modify-dbtab-lob-handles" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              INSERT, UPDATE, MODIFY dbtab - LOB Handles
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="ABAP docs" class="md-nav__link">
      ABAP docs
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rules" class="md-nav__link">
    Rules
  </a>
  
    <nav class="md-nav" aria-label="Rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#writes-using-writer-streams" class="md-nav__link">
    Writes Using Writer Streams
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writes-using-locators" class="md-nav__link">
    Writes Using Locators
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restrictions" class="md-nav__link">
    Restrictions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#executable-examples" class="md-nav__link">
    Executable Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abenium_lob.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="insert-update-modify-dbtab-lob-handles">INSERT, UPDATE, MODIFY dbtab - LOB Handles</h1>
<p>In the statements <a href="../abapinsert_dbtab" class="blue"><code style="display: inline;"><span class="qtext">INSERT</span></code></a>,
<a href="../abapupdate" class="blue"><code style="display: inline;"><span class="qtext">UPDATE</span></code></a>, or <a href="../abapmodify_dbtab" class="blue"><code style="display: inline;"><span class="qtext">MODIFY</span></code></a>,
<a href="../abenlob_handle_glosry" class="grey" title="Glossary Entry">LOB handles</a> can be created as
<a href="../abenwriter_stream_glosry" class="grey" title="Glossary Entry">writer streams</a> and specified as <a href="../abenlocator_glosry" class="grey" title="Glossary Entry">locators</a>.</p>
<ul>

<li><a href="#@@ITOC@@ABENIUM_LOB_1" class="blue">Prerequisites</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@ABENIUM_LOB_2" class="blue">Rules</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@ABENIUM_LOB_3" class="blue">Writes Using Writer Streams</a></li>

</ul>

<ul class="circlem2">

<li><a href="#@@ITOC@@ABENIUM_LOB_4" class="blue">Writes Using Locators</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@ABENIUM_LOB_5" class="blue">Restrictions</a></li>

</ul>

<ul>

<li><a href="#@@ITOC@@ABENIUM_LOB_6" class="blue">Examples</a></li>

</ul>

<p><a name="@@ITOC@@ABENIUM_LOB_1"></a>
<s><i>7.31</i></s> <s><i>7.40</i></s> <b>7.54</b></p>
<p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP &#x2212; Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_language_external_data" class="blue">Processing External Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_sql" class="blue">ABAP Database Access</a>&#xA0;&#x2192;&#xA0;
<a href="../abenopensql" class="blue">ABAP SQL</a>&#xA0;&#x2192;&#xA0;
<a href="../abenopen_sql_writing" class="blue">ABAP SQL - Write Accesses</a>&#xA0;</small></p>
<h2 id="prerequisites">Prerequisites</h2>
<p>An <a href="../abenlob_glosry" class="grey" title="Glossary Entry">LOB</a> in a row to be inserted or changed can be supplied from an
<a href="../abenlob_handle_glosry" class="grey" title="Glossary Entry">LOB handle component</a> of
a work area or an individual reference variable for an LOB handle (at <code style="display: inline;"><span class="qtext">UPDATE</span></code> with <code style="display: inline;"><span class="qtext">SET</span></code>). The static type of each LOB handle component must be one of the following system classes for
<a href="../abenopen_sql_streaming" class="blue">streaming</a> or <a href="../abenlocators" class="blue">locators</a>:</p>
<ul>

<li><span class="lnkgrey">CL_ABAP_DB_C_WRITER</span> or <span class="lnkgrey">CL_ABAP_DB_C_LOCATOR</span> in the case of <a href="../abenclob_glosry" class="grey" title="Glossary Entry">CLOBs</a>.</li>

</ul>

<ul>

<li><span class="lnkgrey">CL_ABAP_DB_X_WRITER</span> or <span class="lnkgrey">CL_ABAP_DB_X_LOCATOR</span> in the case of <a href="../abenblob_glosry" class="grey" title="Glossary Entry">BLOBs</a>.</li>

</ul>

<p>The <a href="../abenstream_type_glosry" class="grey" title="Glossary Entry">stream type</a> or
<a href="../abenlocator_type_glosry" class="grey" title="Glossary Entry">locator type</a> must match the data type of the LOBs.</p>
<p><a name="@@ITOC@@ABENIUM_LOB_2"></a></p>
<h2 id="rules">Rules</h2>
<p>Unlike in <a href="../abenselect_into_lob_handles" class="blue">reads</a>, the behavior for streams does not match the behavior for locators.</p>
<p><a name="@@ITOC@@ABENIUM_LOB_3"></a></p>
<h3 id="writes-using-writer-streams">Writes Using Writer Streams</h3>
<p>If, in a write, an <a href="../abenlob_glosry" class="grey" title="Glossary Entry">LOB</a> is associated
with a reference variable of the type <span class="lnkgrey">CL_ABAP_DB_C_WRITER</span> or <span class="lnkgrey">CL_ABAP_DB_X_WRITER</span>,
a corresponding writer stream is usually created and the reference variable points to the object after
execution. The LOB to be changed can be edited using the methods of the writer stream. When an LOB is associated with a writer stream referenced by an
<a href="../abenlob_handle_component_glosry" class="grey" title="Glossary Entry">LOB handle component</a> from the source work area, the following various platform-dependent behavior may occur:</p>
<ul>

<li>On some database systems (MaxDB, Oracle), the components of the work area which are not LOB handle
components are written directly to the database when executing the statement. If the rows cannot be
added or changed, <code style="display: inline;"><span class="qtext">sy-subrc</span></code> and <code style="display: inline;"><span class="qtext">sy-dbcnt</span></code> respectively
are set immediately and no writer stream is created for the LOB handle components. If the rows can be
added or changed, writer streams are created and their content is passed to the database when closing the last writer stream of the ABAP SQL statement at the latest.</li>

</ul>

<ul>

<li>On other database systems, the components of the work area which are not LOB handle components are
not written directly to the database when executing the statement. Instead, writer streams are always
created for the LOB handle components. The contents of the remaining components are also delayed, that
is, they are passed when closing the last writer stream of the ABAP SQL statement at the latest. Between
executing the statement and actually writing the remaining components, the status is undefined since
it is not yet determined whether the operation can be executed at all. In this case, <code style="display: inline;"><span class="qtext">sy-subrc</span></code>
is set to the value 2 and <code style="display: inline;"><span class="qtext">sy-dbcnt</span></code> is set to -1 after the statement is executed.
Before a writer stream is closed, a reference to an object from the class <span class="lnkgrey">CL_ABAP_SQL_CHANGING_STMNT</span>,
a subclass of <span class="lnkgrey">CL_ABAP_SQL_STATEMENT_HANDLE</span>, from the interface <span class="lnkgrey">IF_ABAP_DB_WRITER</span>,
can be obtained using the method GET_STATEMENT_HANDLE. The GET_STATE method provides information about
the status of the ABAP SQL statement, and the GET_DB_COUNT method returns the number of added or changed
rows after the last writer stream of the ABAP SQL statement was closed. The methods of the abstract
superclass can be used to check the status of the ABAP SQL statement and all streams that are still
open can be closed. If the ABAP SQL statement is not closed by the closing of the last writer stream,
GET_DB_COUNT also returns the value -1. If the operation cannot be executed, for example due to duplicate
key entries, the exception CX_STREAM_IO_EXCEPTION or CX_CLOSE_RESOURCE_ERROR is raised when the data is passed to the database, depending on exactly when the data is passed.</li>

</ul>

<p>A writer stream created in this way exists until it is explicitly closed using its method CLOSE from
the IF_ABAP_CLOSE_RESOURCE interface. As long as a writer stream for an ABAP SQL statement is still
open, the corresponding database operation is not finished. The state of the ABAP SQL statement is described
using an object of the CL_ABAP_SQL_STATEMENT_HANDLE class, for which the GET_STATEMENT_HANDLE method returns a reference for every writer stream.</p>
<p>When using writer streams, a non-handleable exception is raised in the following cases:</p>
<ul>

<li>If a writer stream is still open when closing a
<a href="../abendatabase_luw_glosry" class="grey" title="Glossary Entry">database LUW</a> using a <a href="../abendatabase_commit_glosry" class="grey" title="Glossary Entry">database commit</a>.</li>

</ul>

<ul>

<li>When accessing a writer stream that is already closed.</li>

</ul>

<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Notes</p>
<ul></p>
<li>Exactly when the data of a writer stream is passed to the database is not defined. The data is passed
at the latest when the last writer stream is closed but can also occur during writing in the stream, for example because a buffer is no longer large enough.</li>

<p></ul>
<ul></p>
<li>Always close a writer stream explicitly and as soon as possible using its method CLOSE. Also refer to <a href="../abenstreams_locators" class="blue">Streaming and Locators</a>.</li>

<p></ul>
<a name="@@ITOC@@ABENIUM_LOB_4"></a>
</div></p>
<h3 id="writes-using-locators">Writes Using Locators</h3>
<p>If, in a write, an <a href="../abenlob_glosry" class="grey" title="Glossary Entry">LOB</a> is associated
with a reference variable of type <span class="lnkgrey">CL_ABAP_DB_C_LOCATOR</span> or <span class="lnkgrey">CL_ABAP_DB_X_LOCATOR</span>, this variable must point to an appropriate locator,
<a href="../abenselect_into_lob_handles" class="blue">created</a> in a statement <code style="display: inline;"><span class="qtext">SELECT</span></code> for a LOB in a different database table or the same table. If the statement can be executed
(<code style="display: inline;"><span class="qtext">sy-subrc</span></code> is 0), the LOB to be changed is replaced directly in the database system using the complete LOB of the locator.</p>
<p><a name="@@ITOC@@ABENIUM_LOB_5"></a></p>
<h2 id="restrictions">Restrictions</h2>
<p>The following restrictions apply:</p>
<ul>

<li>A maximum of 16 data streams can be opened for an ABAP SQL statement.</li>

</ul>

<ul>

<li>In a <a href="../abendatabase_luw_glosry" class="grey" title="Glossary Entry">database LUW</a> there can be a maximum of 16 ABAP SQL statements whose data streams are open at the same time.</li>

</ul>

<ul>

<li>A maximum of 1000 LOB handles can be open in a <a href="../abendatabase_luw_glosry" class="grey" title="Glossary Entry">database LUW</a>.</li>

</ul>

<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>Always close a LOB handle as soon as possible using its method CLOSE. Also refer to <a href="../abenstreams_locators" class="blue">Streaming and Locators</a>.</p>
<p><a name="@@ITOC@@ABENIUM_LOB_6"></a>
</div></p>
<h2 id="examples">Examples</h2>
<p><br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>Components <code style="display: inline;"><span class="qtext">string1</span></code> and <code style="display: inline;"><span class="qtext">string2</span></code> in structure <span class="qtext">
wa</span> are declared as LOB handles for character-like writer streams. The statement <code style="display: inline;"><span class="qtext">MODIFY</span></code>
creates the writer streams. Character strings are passed to both writer streams via reference variable
<code style="display: inline;"><span class="qtext">stmnt</span></code>. Once the writer streams have been closed, the associated database fields STRING1 und STRING2 contain the chained content of the streams.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">DATA</span> <span class="nv">wa</span> <span class="k">TYPE </span><span class="nv">demo_expressions</span> <span class="nv">WRITER</span> <span class="k">FOR</span> <span class="nv">COLUMNS</span> <span class="nv">string1</span> <span class="nv">string2</span><span class="p">.</span> 

<span class="nv">wa</span> <span class="o">=</span> <span class="k">VALUE</span> <span class="err">#</span><span class="p">(</span> <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;X&#39;</span> <span class="p">).</span> 

<span class="k">MODIFY</span> <span class="nv">demo_expressions</span> <span class="k">FROM</span> <span class="nv">wa</span><span class="p">.</span> 

<span class="k">DATA</span><span class="p">(</span><span class="nv">stmnt</span><span class="p">)</span> <span class="o">=</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">string1</span><span class="o">-&gt;</span><span class="nf">get_statement_handle</span><span class="p">(</span> <span class="p">).</span> 
<span class="k">DO</span> <span class="mi">10</span> <span class="k">TIMES</span><span class="p">.</span> 
  <span class="nv">wa</span><span class="o">-</span><span class="nv">string1</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">CONV</span> <span class="err">#</span><span class="p">(</span> <span class="nv">sy</span><span class="o">-</span><span class="nv">index</span> <span class="p">)</span> <span class="p">).</span> 
<span class="k">ENDDO</span><span class="p">.</span> 
<span class="nv">wa</span><span class="o">-</span><span class="nv">string1</span><span class="o">-&gt;</span><span class="nf">close</span><span class="p">(</span> <span class="p">).</span> 

<span class="nv">stmnt</span> <span class="o">=</span> <span class="nv">wa</span><span class="o">-</span><span class="nv">string2</span><span class="o">-&gt;</span><span class="nf">get_statement_handle</span><span class="p">(</span> <span class="p">).</span> 
<span class="k">DO</span> <span class="mi">26</span> <span class="k">TIMES</span><span class="p">.</span> 
  <span class="nv">wa</span><span class="o">-</span><span class="nv">string2</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span> <span class="nv">substring</span><span class="p">(</span> <span class="nv">val</span> <span class="o">=</span> <span class="nv">sy</span><span class="o">-</span><span class="nv">abcde</span> 
                               <span class="k">off</span> <span class="o">=</span> <span class="nv">sy</span><span class="o">-</span><span class="nv">index</span> <span class="o">-</span> <span class="mi">1</span> 
                               <span class="nv">len</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">).</span> 
<span class="k">ENDDO</span><span class="p">.</span> 
<span class="nv">wa</span><span class="o">-</span><span class="nv">string2</span><span class="o">-&gt;</span><span class="nf">close</span><span class="p">(</span> <span class="p">).</span> 

<span class="k">SELECT</span> <span class="k">SINGLE</span> <span class="nv">string1</span><span class="p">,</span> <span class="nv">string2</span> 
       <span class="k">FROM</span> <span class="nv">demo_expressions</span> 
       <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;X&#39;</span> 
       <span class="k">INTO</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">result</span><span class="p">).</span> 

<span class="nv">cl_demo_output</span><span class="o">=&gt;</span><span class="nf">display</span><span class="p">(</span> <span class="nv">result</span> <span class="p">).</span>
</code></pre></div>
</div>
<br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>In the statement <code style="display: inline;"><span class="qtext">UPDATE</span></code>, the column STRING2 is modified with a locator, which
was created in a <code style="display: inline;"><span class="qtext">SELECT</span></code> statement for the column STRING1 of the same database table. Afterwards STRING1 and STRING2 have the same content.</p>
<p><div class="highlight"><pre><span></span><code><span class="k">DELETE</span> <span class="k">FROM</span> <span class="nv">demo_expressions</span><span class="p">.</span> 
<span class="k">INSERT</span> <span class="nv">demo_expressions</span> <span class="k">FROM</span> <span class="err">@</span><span class="p">(</span> <span class="k">VALUE</span> <span class="err">#</span><span class="p">(</span> <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;X&#39;</span> <span class="nv">string1</span> <span class="o">=</span> <span class="nv">sy</span><span class="o">-</span><span class="nv">abcde</span> <span class="p">)</span> <span class="p">).</span> 

<span class="k">DATA</span> <span class="nv">locator</span> <span class="k">TYPE REF TO</span> <span class="nv">cl_abap_db_c_locator</span><span class="p">.</span> 

<span class="k">SELECT</span> <span class="k">SINGLE</span> <span class="nv">string1</span> 
       <span class="k">FROM</span>   <span class="nv">demo_expressions</span> 
       <span class="k">WHERE</span>  <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;X&#39;</span> 
       <span class="k">INTO</span>   <span class="err">@</span><span class="nv">locator</span><span class="p">.</span> 

<span class="k">UPDATE</span> <span class="nv">demo_expressions</span> <span class="nv">SET</span> <span class="nv">string2</span> <span class="o">=</span> <span class="err">@</span><span class="nv">locator</span> <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;X&#39;</span><span class="p">.</span> 

<span class="k">SELECT</span> <span class="k">SINGLE</span> <span class="nv">string1</span><span class="p">,</span> <span class="nv">string2</span> 
       <span class="k">FROM</span> <span class="nv">demo_expressions</span> 
       <span class="k">WHERE</span> <span class="k">id</span> <span class="o">=</span> <span class="s1">&#39;X&#39;</span> 
       <span class="k">INTO</span> <span class="err">@</span><span class="nv">DATA</span><span class="p">(</span><span class="nv">result</span><span class="p">).</span> 

<span class="nv">cl_demo_output</span><span class="o">=&gt;</span><span class="nf">display</span><span class="p">(</span> <span class="nv">result</span> <span class="p">).</span>
</code></pre></div>
</div></p>
<h3 id="executable-examples">Executable Examples</h3>
<ul>

<li><a href="../abendb_writer_abexa" class="blue">Writer Stream, Fill Database Table</a></li>

<p></ul>
<ul></p>
<li><a href="../abendb_copy_abexa" class="blue">Locator, Copy Column</a></li>

</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../abenits_glosry/" title="ITS" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                ITS
              </div>
            </div>
          </a>
        
        
          <a href="../abenixml_attributes_abexa/" title="iXML Library, Access Attributes" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                iXML Library, Access Attributes
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>