


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Separation of Concerns - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#separation-of-concerns" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Separation of Concerns
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="ABAP docs" class="md-nav__link">
      ABAP docs
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    Background
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rule" class="md-nav__link">
    Rule
  </a>
  
    <nav class="md-nav" aria-label="Rule">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#follow-the-soc-principle" class="md-nav__link">
    Follow the SoC principle
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#details" class="md-nav__link">
    Details
  </a>
  
    <nav class="md-nav" aria-label="Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bad-example" class="md-nav__link">
    Bad Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#good-example" class="md-nav__link">
    Good Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.54/abenseperation_concerns_guidl.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="separation-of-concerns">Separation of Concerns</h1>
<p><a name="@@ITOC@@ABENSEPERATION_CONCERNS_GUIDL_1"></a>
<a href="../abenseperation_concerns_guidl">7.31</a> <a href="../abenseperation_concerns_guidl">7.40</a> <b>7.54</b></p>
<p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_pgl" class="blue">ABAP Programming Guidelines</a>&#xA0;&#x2192;&#xA0;
<a href="../abengeneral_rules_guidl" class="blue">General Rules</a>&#xA0;</small></p>
<h2 id="background">Background</h2>
<p>The term &apos;separation of concerns&apos; (SoC) was coined in Edsger W. Dijkstra&apos;s article <span class="qtext400">On the role of scientific thought</span> from 1974:</p>
<p><span class="qtext400">&quot;... But nothing is gained --on the contrary!-- by tackling these various aspects
simultaneously. It is what I sometimes have called &apos;the separation of concerns&apos;, which, even if not
perfectly possible, is yet the only available technique for effective ordering of one&apos;s thoughts, that
I know of. This is what I mean by &apos;focusing one&apos;s attention upon some aspect&apos;: it does not mean ignoring
the other aspects, it is just doing justice to the fact that from this aspect&apos;s point of view, the other is irrelevant.&quot; (Springer-Verlag, 1982)</span></p>
<p>Separation of concerns is a principle used in programming to separate an application into units, with
minimal overlapping between the functions of the individual units. The separation of concerns is achieved using modularization, encapsulation and arrangement in software layers.</p>
<p>Although the classic three-layer architecture of Application Server ABAP (AS ABAP) is ideal for ABAP
programming based on the SoC principle, this possibility was never explored. Application programs (in
other words, dialog programs in module pools or reports in executable programs) were usually displayed
as monolithic blocks, in which the system simultaneously reacted to user actions of the presentation
layer, completed the application logic and executed accesses to data on the persistency layer. This
type of programming is no longer relevant in today&apos;s programming world, where concepts like service-oriented architecture (SOA) set the trend.</p>
<p><a name="@@ITOC@@ABENSEPERATION_CONCERNS_GUIDL_2"></a></p>
<h2 id="rule">Rule</h2>
<h3 id="follow-the-soc-principle">Follow the SoC principle</h3>
<p>Follow the separation of concerns principle. Model your applications strictly as service-oriented applications.
It is especially important that you separate the logic of the application from the logic of the presentation
logic, persistency, and the logic for communication with external systems. Encapsulate the repository objects of the individual concerns in separate packages.</p>
<p><a name="@@ITOC@@ABENSEPERATION_CONCERNS_GUIDL_3"></a></p>
<h2 id="details">Details</h2>
<p>The SoC principle identifies the parts of an application with a specific purpose and encapsulates these
parts in closed units. These units only communicate with each other using specified interfaces. Thanks
to this principle, the software - which would have otherwise been overcomplicated - is divided up into manageable components. As a result, the software is:</p>
<ul>

<li>more stable</li>

</ul>

<ul>

<li>easier to understand</li>

</ul>

<ul>

<li>easier to reuse</li>

</ul>

<ul>

<li>easier to transport</li>

</ul>

<ul>

<li>easier to maintain</li>

</ul>

<ul>

<li>easier to test</li>

</ul>

<p>Regarding the last point, it would even be true to say that following the SoC principle is a prerequisite for executing isolated, automated
<a href="../abencorrectness_quality_guidl" class="lnkpurple" title="Guideline">unit tests</a>.</p>
<h3 id="bad-example">Bad Example</h3>
<p>The following graphic shows two examples of an ABAP application that do not follow the SoC principle.</p>
<p><img src="abdoc_soc_bad.jpg" width="00590" height="00400" alt="Figure"></p>
<p>In fact, the two bad examples here are the programmer models for reporting and dialog programming that
were propagated by SAP for a considerable length of time! To be more precise, the example is not bad
due to the reporting or programming of transactions itself, but due to the way in which these applications
are usually implemented. The mini report in the following source code is a typical example of how different
concerns are mixed together in a single program unit. Both the data declarations and the implementation
of the functions are mixed together. Access to persistent data, data processing, data presentation and the associated declarations all occur in one single unit.</p>
<dd>
<code style="display: inline;"><span class="qtext">REPORT z_non_soc_report.</span></code>
</dd>

<dd>
<code style="display: inline;"><span class="qtext">PARAMETERS p_carrid TYPE spfli-carrid.</span></code>
</dd>

<dd>
<span class="qtext">DATA: spfli_tab TYPE STANDARD TABLE OF spfli, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;alv&#xA0;&#xA0;&#xA0;&#xA0; TYPE REF TO cl_salv_table, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;alv_exc TYPE REF TO cx_salv_msg.</span>
</dd>

<dd>
<code style="display: inline;"><span class="qtext">SELECT * <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FROM spfli <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; WHERE carrid = @p_carrid <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; INTO TABLE @spfli_tab.</span></code>
</dd>

<dd>
<span class="qtext">IF sy-subrc = 0. <br>&#xA0;&#xA0;SORT spfli_tab BY cityfrom cityto. <br>&#xA0;&#xA0;TRY. <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;cl_salv_table=&gt;factory( <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;IMPORTING r_salv_table = alv <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;CHANGING t_table = spfli_tab ). <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;alv-&gt;display( ). <br>
&#xA0;&#xA0;&#xA0;&#xA0;CATCH cx_salv_msg INTO alv_exc. <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;MESSAGE alv_exc TYPE &apos;I&apos; DISPLAY LIKE &apos;E&apos;. <br>&#xA0;&#xA0;ENDTRY. <br>ENDIF.</span>
</dd>

<p>Of course, it would be too much to insist that concerns should be completely separated even in short
programs like in the source code above. However, real applications are usually very long ABAP programs
(executable programs, module pools), in which all concerns are handled at the same time. If modularization
was performed, it was usually restricted to reusing functional units and was rarely focused on the actual
available layers. In addition, large volumes of global data were usually created that were used in different
procedures and layers. As a result, all the parts of the program were inherently dependent on each other
and could not be tested individually. We are convinced that the quality of these programs can be improved
not only by following naming conventions, but also by changing the paradigm for the procedure used for programming tasks.</p>
<p>The following source codes proves that you can implement the SoC principle using classic ABAP procedural
methods (in this case, subroutines). This source code works in the same way as the source code above.
However, all the concerns are implemented in separate procedures that are assigned to layers. As we
have already mentioned, this type of implementation would be too much for a simple program. However,
if you needed to test the concerns in the above source code individually and independently of each other
by using unit tests, the only possibility would be to adapt the source code as shown below. The program
of the following source code can now be easily assigned test methods in ABAP unit test classes, which test the individual procedures.</p>
<dd>
<code style="display: inline;"><span class="qtext">REPORT z_soc_report.</span></code>
</dd>

<dd>
<code style="display: inline;"><span class="qtext">SELECTION-SCREEN BEGIN OF SCREEN 100. <br>PARAMETERS p_carrid TYPE spfli-carrid. <br>SELECTION-SCREEN END OF SCREEN 100.</span></code>
</dd>

<dd>
<code style="display: inline;"><span class="qtext">TYPES spfli_tab TYPE STANDARD TABLE OF spfli.</span></code>
</dd>

<dd>
<code style="display: inline;"><span class="qtext">DATA: carrid TYPE spfli-carrid, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;table&#xA0;&#xA0;TYPE spfli_tab, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;arc&#xA0;&#xA0;&#xA0;&#xA0; TYPE sy-subrc.</span></code>
</dd>

<dd>
<span class="qtext">START-OF-SELECTION. <br>&#xA0;&#xA0;PERFORM get_carrid CHANGING carrid. <br>&#xA0;&#xA0;PERFORM get_table&#xA0;&#xA0;USING&#xA0;&#xA0;&#xA0;&#xA0;carrid <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; CHANGING table <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;arc.</span>
</dd>

<dd>
<code style="display: inline;"><span class="qtext">IF arc = 0 <br>&#xA0;&#xA0;PERFORM sort_table&#xA0;&#xA0;&#xA0;&#xA0;CHANGING table. <br>&#xA0;&#xA0;PERFORM display_table USING&#xA0;&#xA0;&#xA0;&#xA0;table. <br>ENDIF.</span></code>
</dd>

<dd>
<code style="display: inline;"><span class="qtext">* Presentation layer</span></code>
</dd>

<dd>
<span class="qtext">FORM get_carrid <br>&#xA0;&#xA0;&#xA0;&#xA0; CHANGING value(carrid) TYPE spfli-carrid. <br>
&#xA0;&#xA0;CALL SELECTION-SCREEN 100. <br>&#xA0;&#xA0;IF sy-subrc = 0. <br>&#xA0;&#xA0;&#xA0;&#xA0;carrid = p_carrid. <br>&#xA0;&#xA0;ENDIF. <br>ENDFORM.</span>
</dd>

<dd>
<span class="qtext">FORM display_table <br>&#xA0;&#xA0;&#xA0;&#xA0; USING table TYPE spfli_tab. <br>&#xA0;&#xA0;DATA: alv TYPE&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;REF TO cl_salv_table, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;alv_exc TYPE REF TO cx_salv_msg. <br>&#xA0;&#xA0;TRY. <br>
&#xA0;&#xA0;&#xA0;&#xA0; cl_salv_table=&gt;factory( <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; IMPORTING r_salv_table = alv <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; CHANGING t_table = table ). <br>&#xA0;&#xA0;&#xA0;&#xA0; alv-&gt;display( ). <br>
&#xA0;&#xA0; CATCH cx_salv_msg INTO alv_exc. <br>&#xA0;&#xA0;&#xA0;&#xA0; MESSAGE alv_exc TYPE &apos;I&apos; DISPLAY LIKE &apos;E&apos;. <br>&#xA0;&#xA0;ENDTRY. <br>ENDFORM.</span>
</dd>

<dd>
<code style="display: inline;"><span class="qtext">* Application layer</span></code>
</dd>

<dd>
<code style="display: inline;"><span class="qtext">FORM sort_table <br>&#xA0;&#xA0;&#xA0;&#xA0; CHANGING table TYPE spfli_tab. <br>&#xA0;&#xA0;&#xA0;&#xA0; SORT table BY cityfrom cityto. <br>ENDFORM.</span></code>
</dd>

<dd>
<code style="display: inline;"><span class="qtext">* Persistency layer</span></code>
</dd>

<dd>
<span class="qtext">FORM get_table <br>&#xA0;&#xA0;&#xA0;&#xA0; USING&#xA0;&#xA0;&#xA0;&#xA0; carrid TYPE spfli-carrid <br>
&#xA0;&#xA0;&#xA0;&#xA0; CHANGING table&#xA0;&#xA0; TYPE spfli_tab <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;arc&#xA0;&#xA0;&#xA0;&#xA0; TYPE sy-subrc. <br>
&#xA0;&#xA0;SELECT * <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FROM spfli <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; WHERE carrid = @carrid <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; INTO TABLE @table. <br>&#xA0;&#xA0;arc = sy-subrc. <br>ENDFORM.</span>
</dd>

<p>However, this separation of concerns using subroutines shown above does not create a good impression.
The following source code shows how the separation of concerns should be implemented instead using methods in concern-specific classes.</p>
<h3 id="good-example">Good Example</h3>
<p>The following graphic shows how an ABAP application should look that follows the separation of concerns.</p>
<p><img src="abdoc_soc_good.jpg" width="00500" height="00430" alt="Figure"></p>
<p>After the concerns have been identified, they are implemented in ABAP object classes. The concerns shown in the graphic are the main tasks that are usually performed in ABAP application programming:</p>
<ul>

<li>Communication with a user interface (UI) using UI services</li>

</ul>

<ul>

<li>Actual application logic</li>

</ul>

<ul>

<li>Access to persistent data using persistency services</li>

</ul>

<ul>

<li>Communication with external systems using proxy services</li>

</ul>

<p>These main rules can be subdivided further, which is often necessary.</p>
<p>The boxes for the individual concerns in the graphic represent packages. All the repository objects
(classes, data types) belonging to a concern should be located in corresponding packages. The package
concept (encapsulated packages) supports this separation of concerns. In encapsulated packages, repository
objects in one package can only access the objects of another package using package interfaces, which
is checked by the syntax check. A package can restrict the usability of its repository objects even
more by using access control lists. Subdividing the separation of concerns in a package is a concept supported by subpackages.</p>
<p>For example, encapsulating all database tables of an application in a package for persistency services
prevents any program, that does not belong to this package, from accessing these database tables. The
reverse is also true. For example, programs in the persistency layer cannot communicate directly with
components in the presentation layer, such as a Web Dynpro ABAP application. You should prepare the
package encapsulation (by choosing <span class="italic">Package Check as Server</span>) in the package properties. These packages have package interfaces, A package check is performed during the extended program check.</p>
<p>The following source code shows how to adapt the separation of concerns from the above source code for classes local to the program.</p>
<dd>
<code style="display: inline;"><span class="qtext">REPORT z_soc_class_report. <br>SELECTION-SCREEN BEGIN OF SCREEN 100. <br>PARAMETERS p_carrid TYPE spfli-carrid. <br>SELECTION-SCREEN END OF SCREEN 100.</span></code>
</dd>

<dd>
<code style="display: inline;"><span class="qtext">TYPES spfli_tab TYPE STANDARD TABLE OF spfli.</span></code>
</dd>

<dd>
<span class="qtext">CLASS presentation_server DEFINITION. <br>&#xA0;&#xA0;PUBLIC SECTION. <br>&#xA0;&#xA0;&#xA0;&#xA0;CLASS-METHODS: <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;get_carrid RETURNING VALUE(carrid) TYPE spfli-carrid, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;display_table IMPORTING VALUE(table) TYPE spfli_tab. <br>ENDCLASS.</span>
</dd>

<dd>
<span class="qtext">CLASS presentation_server IMPLEMENTATION. <br>&#xA0;&#xA0;METHOD get_carrid. <br>&#xA0;&#xA0;&#xA0;&#xA0;CALL SELECTION-SCREEN 100. <br>
&#xA0;&#xA0;&#xA0;&#xA0;IF sy-subrc = 0. <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;carrid = p_carrid. <br>
&#xA0;&#xA0;&#xA0;&#xA0;ENDIF. <br>&#xA0;&#xA0;ENDMETHOD. <br>&#xA0;&#xA0;METHOD display_table. <br>&#xA0;&#xA0;&#xA0;&#xA0;DATA: alv&#xA0;&#xA0;&#xA0;&#xA0; TYPE REF TO cl_salv_table, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;alv_exc TYPE REF TO cx_salv_msg. <br>&#xA0;&#xA0;&#xA0;&#xA0;TRY. <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; cl_salv_table=&gt;factory( <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; IMPORTING r_salv_table = alv <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; CHANGING t_table = table ). <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;alv-&gt;display( ). <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;CATCH cx_salv_msg INTO alv_exc. <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;MESSAGE alv_exc TYPE &apos;I&apos; DISPLAY LIKE &apos;E&apos;. <br>
&#xA0;&#xA0;&#xA0;&#xA0; ENDTRY. <br>&#xA0;&#xA0; ENDMETHOD. <br>ENDCLASS.</span>
</dd>

<dd>
<span class="qtext">CLASS application_server DEFINITION. <br>&#xA0;&#xA0;PUBLIC SECTION. <br>&#xA0;&#xA0;&#xA0;&#xA0;CLASS-METHODS <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; sort_table CHANGING table TYPE spfli_tab. <br>&#xA0;&#xA0;&#xA0;&#xA0;ENDCLASS.</span>
</dd>

<dd>
<code style="display: inline;"><span class="qtext">CLASS application_server IMPLEMENTATION. <br>&#xA0;&#xA0;METHOD sort_table. <br>&#xA0;&#xA0;&#xA0;&#xA0;SORT table BY cityfrom cityto. <br>&#xA0;&#xA0;ENDMETHOD. <br>ENDCLASS.</span></code>
</dd>

<dd>
<span class="qtext">CLASS persistency_server DEFINITION. <br>&#xA0;&#xA0;PUBLIC SECTION. <br>&#xA0;&#xA0;&#xA0;&#xA0;CLASS-METHODS <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; get_table IMPORTING carrid TYPE spfli-carrid <br>&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; EXPORTING table&#xA0;&#xA0;TYPE spfli_tab <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; arc&#xA0;&#xA0;&#xA0;&#xA0; TYPE sy-subrc. <br>ENDCLASS.</span>
</dd>

<dd>
<span class="qtext">CLASS persistency_server IMPLEMENTATION. <br>&#xA0;&#xA0;METHOD get_table. <br>&#xA0;&#xA0; SELECT * <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;FROM spfli <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;WHERE carrid = @carrid <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;INTO TABLE @table. <br>&#xA0;&#xA0;&#xA0;&#xA0;arc = sy-subrc. <br>&#xA0;&#xA0;ENDMETHOD. <br>ENDCLASS.</span>
</dd>

<dd>
<code style="display: inline;"><span class="qtext">CLASS report DEFINITION. <br>&#xA0;&#xA0;PUBLIC SECTION. <br>&#xA0;&#xA0;&#xA0;&#xA0;CLASS-METHODS main. <br>ENDCLASS.</span></code>
</dd>

<dd>
<span class="qtext">CLASS report IMPLEMENTATION. <br>&#xA0;&#xA0;METHOD main. <br>&#xA0;&#xA0;&#xA0;&#xA0;DATA: carrid TYPE spfli-carrid, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;table&#xA0;&#xA0;TYPE spfli_tab, <br>&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;arc&#xA0;&#xA0;&#xA0;&#xA0; TYPE sy-subrc. <br>&#xA0;&#xA0;&#xA0;&#xA0;carrid = presentation_server=&gt;get_carrid( ). <br>
&#xA0;&#xA0;&#xA0;&#xA0;persistency_server=&gt;get_table( EXPORTING carrid = carrid <br>&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; IMPORTING table&#xA0;&#xA0;= table <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; arc&#xA0;&#xA0;&#xA0;&#xA0; = arc ). <br>
&#xA0;&#xA0;&#xA0;&#xA0;IF arc = 0. <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;application_server=&gt;sort_table( <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;CHANGING table = table ). <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;presentation_server=&gt;display_table( table ). <br>
&#xA0;&#xA0;&#xA0;&#xA0;ENDIF. <br>&#xA0;&#xA0;ENDMETHOD. <br>ENDCLASS.</span>
</dd>

<dd>
<code style="display: inline;"><span class="qtext">START-OF-SELECTION. <br>report=&gt;main( ).</span></code>
</dd>

<p>At first glance, the above source code appears to be very excessive compared to the first source code.
But only on the first glance. A real application program usually only consists of 25 lines. The larger
and more realistic the application program, the smaller the proportion of the overhead that is incurred by wrapping the concerns in classes. If the reuse options for
<a href="../abenabap_obj_progr_model_guidl" class="lnkpurple" title="Guideline">ABAP Objects</a> are used appropriately, it is even possible to reduce the amount of source code.</p>
<p>In addition, the individual steps are now wrapped in classes, in other words, real program units (unlike
in the second source code). In practice, wrapping is not performed in one single program, but in global
classes that are assigned to different packages, depending on the layer. These packages are connected
to each other using package interfaces. It is only by using these interfaces that you can achieve the other benefits of separating the concerns (in addition to the testing capability achieved in the second source code).</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../abenselscreen_processing_glosry/" title="selection screen processing" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                selection screen processing
              </div>
            </div>
          </a>
        
        
          <a href="../abensequence_2_glosry/" title="series" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                series
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>