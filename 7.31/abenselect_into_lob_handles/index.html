


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>SELECT - LOB handles - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#select-lob-handles" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              SELECT - LOB handles
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="ABAP docs" class="md-nav__link">
      ABAP docs
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rules" class="md-nav__link">
    Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restrictions" class="md-nav__link">
    Restrictions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.31/abenselect_into_lob_handles.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="select-lob-handles">SELECT - LOB handles</h1>
<p>In the statement <a href="../abapselect" class="blue"><code style="display: inline;"><span class="qtext">SELECT</span></code></a> ,
<a href="../abenlob_handle_glosry" class="grey" title="Glossary Entry">LOB handles</a> can be created as
<a href="../abenreader_stream_glosry" class="grey" title="Glossary Entry">reader streams</a> and as <a href="../abenlocator_glosry" class="grey" title="Glossary Entry">locators</a>.</p>
<p><b>7.31</b> <a href="../abenselect_into_lob_handles">7.40</a> <a href="../abenselect_into_lob_handles">7.54</a></p>
<p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP - Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_language_external_data" class="blue">Processing External Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_sql" class="blue">ABAP - Database Accesses</a>&#xA0;&#x2192;&#xA0;
<a href="../abenopensql" class="blue">Open SQL</a>&#xA0;&#x2192;&#xA0;
<a href="../abenopen_sql_reading" class="blue">Open SQL - Read Accesses</a>&#xA0;&#x2192;&#xA0;
<a href="../abapselect" class="blue">SELECT</a>&#xA0;&#x2192;&#xA0;
<a href="../abapinto_clause" class="blue">SELECT - target</a>&#xA0;</small></p>
<h2 id="prerequisites">Prerequisites</h2>
<p>An <a href="../abenlob_glosry" class="grey" title="Glossary Entry">LOB</a> from the result set can be assigned to an
<a href="../abenlob_handle_component_glosry" class="grey" title="Glossary Entry">LOB handle component</a>
of a work area, or to an individual reference variable for an LOB handle. The static type of all LOB handle components must contain the
<a href="../abeninterface_oo_glosry" class="grey" title="Glossary Entry">interface</a> <span class="lnkgrey">IF_ABAP_DB_LOB_HANDLE</span>
and match the corresponding database table component, that means they must be less specific or the same as one of the following system classes for
<a href="../abenopen_sql_streaming" class="blue">streaming</a> or <a href="../abenlocators" class="blue">locators</a>:</p>
<ul>

<li><span class="lnkgrey">CL_ABAP_DB_C_READER</span> or <span class="lnkgrey">CL_ABAP_DB_C_LOCATOR</span> in the case of <a href="../abenclob_glosry" class="grey" title="Glossary Entry">CLOBs</a>.</li>

</ul>

<ul>

<li><span class="lnkgrey">CL_ABAP_DB_X_READER</span> or <span class="lnkgrey">CL_ABAP_DB_X_LOCATOR</span> in the case of <a href="../abenblob_glosry" class="grey" title="Glossary Entry">BLOBs</a>.</li>

</ul>

<p>The <a href="../abenstream_type_glosry" class="grey" title="Glossary Entry">stream type</a> or
<a href="../abenlocator_type_glosry" class="grey" title="Glossary Entry">locator type</a> must match the data type of the LOBs.</p>
<h2 id="rules">Rules</h2>
<p>If an <a href="../abenlob_glosry" class="grey" title="Glossary Entry">LOB</a> from the result set of a selection is assigned to an LOB handle component of a work area or to an individual reference variable for an
<a href="../abenlob_handle_glosry" class="grey" title="Glossary Entry">LOB handle</a>, either</p>
<ul>

<li>a <a href="../abenreader_stream_glosry" class="grey" title="Glossary Entry">read stream</a> is
created as an instance of one of the classes <span class="lnkgrey">CL_ABAP_DB_C_READER</span>, <span class="lnkgrey">CL_ABAP_DB_X_READER</span> or,</li>

</ul>

<ul>

<li>a <a href="../abenlocator_glosry" class="grey" title="Glossary Entry">locator</a> is created as
an instance of one of the classes <span class="lnkgrey">CL_ABAP_DB_C_LOCATOR</span>or <span class="lnkgrey">CL_ABAP_DB_X_LOCATOR</span></li>

</ul>

<p>and after the execution of the <code style="display: inline;"><span class="qtext">SELECT</span></code> statement the reference variable points
to the object. The class used is determined using the data type of the result set column and the static
type of the target variable, or using the <a href="../abapselect_creating" class="blue"><code style="display: inline;"><span class="qtext">CREATING</span></code></a>
addition if required. The LOB to be read can be evaluated or forwarded using LOB handle methods.</p>
<p>A LOB handle created in this way, that is a reader stream or a locator, exists until it:</p>
<ul>

<li>is closed explicitly using its CLOSE method from the IF_ABAP_CLOSE_RESOURCE interface,</li>

</ul>

<ul>

<li>is closed implicitly at the end of the current <a href="../abendatabase_luw_glosry" class="grey" title="Glossary Entry">database LUW</a>.</li>

</ul>

<p>Reader streams, but not locators, are also closed implicitly by the statement <a href="../abapendselect" class="blue"><code style="display: inline;"><span class="qtext">ENDSELECT</span></code></a> .</p>
<p>Accessing a closed LOB handle leads to a runtime error.</p>
<p>Special properties of open reader streams and locators:</p>
<ul>

<li>As long as a reader stream for an Open SQL statement is still open, the corresponding database is
not closed. This can only occur with <a href="../abapselect_clause_lines" class="blue"><span class="qtext">SELECT
SINGLE</span></a>, since there is no implicit termination of the read stream using <code style="display: inline;"><span class="qtext">ENDSELECT</span></code>.
In this case, you can get a reference to an object of the class <span class="lnkgrey">CL_ABAP_SQL_SELECT_STATEMENT</span>,
a subclass of <span class="lnkgrey">CL_ABAP_SQL_STATEMENT_HANDLE</span>, from the interface <span class="lnkgrey">IF_ABAP_DB_READER</span>
 using the method GET_STATEMENT_HANDLE before closing the reader stream. The methods of the abstract
superclass implemented there can be used to check the state of the Open SQL statement, and all streams that are still open can be closed.</li>

</ul>

<ul>

<li>It is guaranteed that, once created, a locator always works with the same LOB data. If the associated
LOB column is modified whilst a locator is open, an internal copy of the LOB data for the locatoris created on the database first.</li>

</ul>

<h2 id="restrictions">Restrictions</h2>
<p>The following restrictions apply:</p>
<ul>

<li>A maximum of 16 data streams can be opened for an Open SQL statement.</li>

</ul>

<ul>

<li>In a <a href="../abendatabase_luw_glosry" class="grey" title="Glossary Entry">database LUW</a> there can be a maximum of 16 Open SQL statements whose streams are open at the same time.</li>

</ul>

<ul>

<li>A maximum of 1000 LOB handles can be open in a <a href="../abendatabase_luw_glosry" class="grey" title="Glossary Entry">database LUW</a>.</li>

</ul>

<ul>

<li>If the creation of LOB handles takes place with the <a href="../abapselect_clause_lines" class="blue"><span class="qtext">
SINGLE</span></a> addition, all primary key fields in logical expressions linked with <code style="display: inline;"><span class="qtext">AND</span></code>
in the <a href="../abapwhere" class="blue"><code style="display: inline;"><span class="qtext">WHERE</span></code> condition</a> are checked for equality.</li>

</ul>

<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>Always close a LOB handle as soon as possible using its method CLOSE. Also refer to <a href="../abenstreams_locators" class="blue">Streaming and Locators</a>.</p>
</div>

<h2 id="examples">Examples</h2>
<ul>

<li><a href="../abendb_reader_abexa" class="blue">Reader stream, read database table</a></li>

<p></ul>
<ul></p>
<li><a href="../abendb_copy_abexa" class="blue">Locator, copy column</a></li>

<p></ul>
<ul></p>
<li><a href="../abendb_locator_abexa" class="blue">Locator, access to column content</a></li>

</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../abenselect_into_conversion/" title="SELECT - Assignment Rules for Individual Columns" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                SELECT - Assignment Rules for Individual Columns
              </div>
            </div>
          </a>
        
        
          <a href="../abenselect_numeric_type_guidl/" title="Selecting the Numeric Type" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Selecting the Numeric Type
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>