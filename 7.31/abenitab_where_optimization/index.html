


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abenitab where optimization - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#optimization-of-the-where-condition" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abenitab where optimization
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites-for-the-optimization-of-hash-keys" class="md-nav__link">
    Prerequisites for the Optimization of Hash Keys
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites-for-the-optimization-of-sorted-keys" class="md-nav__link">
    Prerequisites for the Optimization of Sorted Keys
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirements-made-on-the-operands" class="md-nav__link">
    Requirements Made on the Operands
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.31/abenitab_where_optimization.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP - Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_data_working" class="blue">Processing Internal Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenitab" class="blue">Internal Tables</a>&#xA0;&#x2192;&#xA0;
<a href="../abenitab_oview" class="blue">Internal Tables - Overview</a>&#xA0;&#x2192;&#xA0;
<a href="../abenitab_perfo" class="blue">Internal Tables: Performance Notes</a>&#xA0;</small></p>
<h1 id="optimization-of-the-where-condition">Optimization of the WHERE Condition</h1>
<p>The statements <a href="../abaploop_at_itab" class="blue"><code style="display: inline;"><span class="qtext">LOOP AT</span></code></a>, <a href="../abapdelete_itab" class="blue">
<code style="display: inline;"><span class="qtext">DELETE</span></code></a>, and <a href="../abapmodify_itab" class="blue"><code style="display: inline;"><span class="qtext">MODIFY</span></code></a>
can be specified together with a <code style="display: inline;"><span class="qtext">WHERE</span></code> condition that selects specific rows of the internal table. Searches in a
<a href="../abenstandard_table_glosry" class="grey" title="Glossary Entry">standard table</a> using the
<a href="../abenprimary_table_key_glosry" class="grey" title="Glossary Entry">primary table key</a> are always linear and cannot be optimized. Searches using a
<a href="../abensorted_key_glosry" class="grey" title="Glossary Entry">sorted key</a> or a
<a href="../abenhash_key_glosry" class="grey" title="Glossary Entry">hash key</a>, however, can be optimized in certain circumstances. These keys are used when:</p>
<ul>

<li>processing a <a href="../abensorted_table_glosry" class="grey" title="Glossary Entry">sorted table</a> using its primary key.</li>

</ul>

<ul>

<li>processing a <a href="../abenhashed_table_glosry" class="grey" title="Glossary Entry">hashed table</a> using its primary key.</li>

</ul>

<ul>

<li>Processing a table (any type) using a <a href="../abensecondary_table_key_glosry" class="grey" title="Glossary Entry">secondary table key</a> specified by <code style="display: inline;"><span class="qtext">USING KEY</span></code>.</li>

</ul>

<p>The optimization is achieved by the entire <code style="display: inline;"><span class="qtext">WHERE</span></code> condition (or parts of it)
being mapped to a specified key. This key specification performs an appropriate optimized key access
(binary search or hash algorithm as in the statement <a href="../abapread_table" class="blue"><code style="display: inline;"><span class="qtext">READ TABLE</span></code></a>), to find and process one or more rows.</p>
<p>Prerequisites for the optimization are, therefore, as follows:</p>
<ul>

<li>The <a href="../abenlogical_expression_glosry" class="grey" title="Glossary Entry">logical expression</a> of the <code style="display: inline;"><span class="qtext">WHERE</span></code> condition can be transformed to a key specification.</li>

</ul>

<ul>

<li>The key access returns the same results as the evaluation of the logical expression would. This
is guaranteed only for compatible data types, since the following happens when incompatible data types are compared:</li>

</ul>

<ul class="circlem2">

<li>When accessed using a key, the content of the specified data objects is converted to the data type of the columns before the comparison.</li>

</ul>

<ul class="circlem2">

<li>The <a href="../abenlogexp_rules" class="blue">comparison rules</a> for incompatible data types
apply when evaluating a logical expression. Here, all the data types involved play a part in determining which operand is converted into which comparison type.</li>

</ul>

<p>If one of these prerequisites is not met, no optimization can take place, and the behavior is as follows:</p>
<ul>

<li>If the primary table key is used to access a sorted table or a hashed table, all rows of the internal table are checked (as in a standard table).</li>

</ul>

<ul>

<li>If the table is accessed using a secondary table key (if specified after <span class="qtext">USING
KEY</span>), a syntax error is produced or an exception raised. Accesses that use a secondary table key must always be optimized.</li>

</ul>

<p>The following sections describe exactly when an access can be optimized.</p>
<p>Other versions: 
 <b>7.31</b> | <a href="../../7.40/abenitab_where_optimization">7.40</a> | <a href="../../7.54/abenitab_where_optimization">7.54</a></p>
<h2 id="prerequisites-for-the-optimization-of-hash-keys">Prerequisites for the Optimization of Hash Keys</h2>
<p>To enable the logical expression of the <code style="display: inline;"><span class="qtext">WHERE</span></code> condition to be mapped to a key access, the expression must use (in the case of
<a href="../abenhash_key_glosry" class="grey" title="Glossary Entry">hash key</a> accesses) <code style="display: inline;"><span class="qtext">AND</span></code>
comparisons with the operator <code style="display: inline;"><span class="qtext">=</span></code> (or <code style="display: inline;"><span class="qtext">EQ</span></code>) to cover
all components of the key. An <code style="display: inline;"><span class="qtext">AND</span></code> association with further comparisons is
possible. Optimization may not be possible if the boolean operator <code style="display: inline;"><span class="qtext">NOT</span></code> or
an <code style="display: inline;"><span class="qtext">OR</span></code> relationship between two comparisons is used. A condition specified using the operator <code style="display: inline;"><span class="qtext">IN</span></code> in a
<a href="../abenselection_table_glosry" class="grey" title="Glossary Entry">selection table</a> cannot be optimized, regardless of its structure.</p>
<p><br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>In the following example, the first two <code style="display: inline;"><span class="qtext">WHERE</span></code> conditions can be optimized as key accesses with the secondary table key <code style="display: inline;"><span class="qtext">key</span></code>. This is because:</p>
<li>
<code style="display: inline;"><span class="qtext">b</span></code>, <code style="display: inline;"><span class="qtext">d</span></code>, and <code style="display: inline;"><span class="qtext">e</span></code> cover the entire key.
</li>

<li>
<code style="display: inline;"><span class="qtext">b</span></code>, <code style="display: inline;"><span class="qtext">d</span></code>, aund <code style="display: inline;"><span class="qtext">e</span></code> cover the entire key and <code style="display: inline;"><span class="qtext">a</span></code> is an independent condition.
</li>

<p>The next six <code style="display: inline;"><span class="qtext">WHERE</span></code> conditions cannot be optimized and produce syntax errors. This is because:</p>
<li>
The key component <code style="display: inline;"><span class="qtext">d</span></code> is not specified.
</li>

<li>
<code style="display: inline;"><span class="qtext">OR</span></code> is used in an association.
</li>

<li>
An inequality comparison takes is performed.
</li>

<li>
A comparison in a selection table is specified.
</li>

<li>
The boolean operator <code style="display: inline;"><span class="qtext">NOT</span></code> is used.
</li>

<li>
An additional <code style="display: inline;"><span class="qtext">OR</span></code> relationship is used.
</li>

<dd>
<span class="qtext">DATA: BEGIN OF line, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;a TYPE c LENGTH 3, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;b TYPE c LENGTH 3, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;c TYPE c LENGTH 3, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;d TYPE c LENGTH 3, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;e TYPE c LENGTH 3, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;f TYPE c LENGTH 3, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;END OF line. <br>
 <br>DATA itab LIKE STANDARD TABLE OF line <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; WITH UNIQUE HASHED KEY key COMPONENTS b e d. <br>
 <br>DATA b_tab LIKE RANGE OF line-b. <br> <br>LOOP AT itab INTO line USING KEY key <br>&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; WHERE b = &apos;...&apos; AND d = &apos;...&apos; AND e = &apos;...&apos; . <br>
ENDLOOP. <br> <br>LOOP AT itab INTO line USING KEY key <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; WHERE a = &apos;...&apos; AND b = &apos;...&apos; AND d = &apos;...&apos; AND e = &apos;...&apos; . <br>
ENDLOOP. <br> <br>LOOP AT itab INTO line USING KEY key <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0; WHERE b = &apos;...&apos; AND e = &apos;...&apos; .&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;syntax error <br>
ENDLOOP. <br> <br>LOOP AT itab INTO line USING KEY key <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0; WHERE b = &apos;...&apos; OR d = &apos;...&apos; AND e = &apos;...&apos; .&#xA0;&#xA0;&quot;syntax error <br>ENDLOOP. <br>
 <br>LOOP AT itab INTO line USING KEY key <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; WHERE b = &apos;...&apos; AND d = &apos;...&apos; AND e &lt;&gt; &apos;...&apos; .&quot;syntax error <br>
ENDLOOP. <br> <br>LOOP AT itab INTO line USING KEY key <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0; WHERE b IN b_tab.&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;syntax error <br>
ENDLOOP. <br> <br>LOOP AT itab INTO line USING KEY key <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0; WHERE b = &apos;...&apos;&#xA0;&#xA0;AND NOT e = &apos;...&apos; .&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&quot;syntax error <br>
ENDLOOP. <br> <br>LOOP AT itab INTO line USING KEY key&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;syntax error <br>&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; WHERE b = &apos;...&apos;&#xA0;&#xA0;AND ( d = &apos;...&apos; OR e = &apos;...&apos; ). <br>ENDLOOP.</span>
</dd>

</div>

<h2 id="prerequisites-for-the-optimization-of-sorted-keys">Prerequisites for the Optimization of Sorted Keys</h2>
<p>To enable the logical expression of the <code style="display: inline;"><span class="qtext">WHERE</span></code> condition to be mapped to a key access, the expression must use (in the case of
<a href="../abensorted_key_glosry" class="grey" title="Glossary Entry">sorted key</a> accesses) <span class="qtext">
AND</span> comparisons with the operator <code style="display: inline;"><span class="qtext">=</span></code> (or <code style="display: inline;"><span class="qtext">EQ</span></code>)
to cover an initial part of the key consisting of at least one component. An <code style="display: inline;"><span class="qtext">AND</span></code>
association with further comparisons is possible. Optimization may not be possible if the boolean operator
<code style="display: inline;"><span class="qtext">NOT</span></code> or an <code style="display: inline;"><span class="qtext">OR</span></code> relationship between two comparisons is used. A condition specified using the operator <code style="display: inline;"><span class="qtext">IN</span></code> in a
<a href="../abenselection_table_glosry" class="grey" title="Glossary Entry">selection table</a> cannot be optimized, regardless of its structure.</p>
<p>The internal table is accessed in partly sequential form. The starting point for the processing of the
table is determined by a binary search using the subconditions that cover the table key in full or in
part. From the starting point onwards, the table is only processed for as long as these subconditions remain fulfilled.</p>
<p><br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>In the following example, the first five <code style="display: inline;"><span class="qtext">WHERE</span></code> conditions can be optimized as key accesses with the secondary table key <code style="display: inline;"><span class="qtext">key</span></code>. This is because:</p>
<li>
<code style="display: inline;"><span class="qtext">b</span></code> is an initial part of the key.
</li>

<li>
<code style="display: inline;"><span class="qtext">b</span></code> is an initial part of the key and <code style="display: inline;"><span class="qtext">a</span></code> is an independent condition.
</li>

<li>
<code style="display: inline;"><span class="qtext">b</span></code> and <code style="display: inline;"><span class="qtext">e</span></code> are an initial part of the key.
</li>

<li>
<code style="display: inline;"><span class="qtext">b</span></code>, <code style="display: inline;"><span class="qtext">e</span></code>, and <code style="display: inline;"><span class="qtext">d</span></code> are an initial part of the key and the order in the <code style="display: inline;"><span class="qtext">WHERE</span></code> condition is ignored.
</li>

<li>
<code style="display: inline;"><span class="qtext">b</span></code> is an initial part of the key and in this case <code style="display: inline;"><span class="qtext">d</span></code> is an independent condition, even though it is part of the key.
</li>

<p>The next five <code style="display: inline;"><span class="qtext">WHERE</span></code> conditions cannot be optimized and produce syntax errors. This is because:</p>
<li>
<code style="display: inline;"><span class="qtext">e</span></code> is not an initial part of the key.
</li>

<li>
An inequality comparison does not place.
</li>

<li>
A comparison in a selection table is specified.
</li>

<li>
The boolean operator <code style="display: inline;"><span class="qtext">NOT</span></code> is used.
</li>

<li>
An additional <code style="display: inline;"><span class="qtext">OR</span></code> relationship is used.
</li>

<dd>
<span class="qtext">DATA: BEGIN OF line, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;a TYPE c LENGTH 3, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;b TYPE c LENGTH 3, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;c TYPE c LENGTH 3, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;d TYPE c LENGTH 3, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;e TYPE c LENGTH 3, <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;f TYPE c LENGTH 3, <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;END OF line. <br>
 <br>DATA itab LIKE STANDARD TABLE OF line <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; WITH UNIQUE SORTED KEY key COMPONENTS b e d. <br>
 <br>DATA b_tab LIKE RANGE OF line-b. <br> <br>LOOP AT itab INTO line USING KEY key <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; WHERE b = &apos;...&apos;. <br>
ENDLOOP. <br> <br>LOOP AT itab INTO line USING KEY key <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; WHERE a = &apos;...&apos; AND b = &apos;...&apos;. <br>
ENDLOOP. <br> <br>LOOP AT itab INTO line USING KEY key <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; WHERE b = &apos;...&apos; AND e = &apos;...&apos;. <br>
ENDLOOP. <br> <br>LOOP AT itab INTO line USING KEY key <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; WHERE b = &apos;...&apos; AND d = &apos;...&apos; AND e = &apos;...&apos;. <br>
ENDLOOP. <br> <br>LOOP AT itab INTO line USING KEY key <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; WHERE b = &apos;...&apos; AND d = &apos;...&apos; . <br>
ENDLOOP. <br> <br>LOOP AT itab INTO line USING KEY key <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0; WHERE e = &apos;...&apos; .&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&quot;syntax error <br>
ENDLOOP. <br> <br>LOOP AT itab INTO line USING KEY key <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0; WHERE b &lt;&gt; &apos;...&apos; .&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;syntax error <br>
ENDLOOP. <br> <br>LOOP AT itab INTO line USING KEY key <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0; WHERE b IN b_tab .&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;syntax error <br>
ENDLOOP. <br> <br>LOOP AT itab INTO line USING KEY key <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; WHERE b = &apos;...&apos;&#xA0;&#xA0;AND NOT e = &apos;...&apos; . &quot;syntax error <br>
ENDLOOP. <br> <br>LOOP AT itab INTO line USING KEY key&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;syntax error <br>&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; WHERE b = &apos;...&apos;&#xA0;&#xA0;AND ( d = &apos;...&apos; OR e = &apos;...&apos; ). <br>ENDLOOP.</span> <br>
</dd>

</div>

<h2 id="requirements-made-on-the-operands">Requirements Made on the Operands</h2>
<p>The part of the logical expression that can be mapped to a key access must select the same rows as a
statement <a href="../abapread_table" class="blue"><code style="display: inline;"><span class="qtext">READ TABLE</span></code></a> that specifies the corresponding components as keys.</p>
<ul>

<li>When comparing incompatible data objects, the <code style="display: inline;"><span class="qtext">WHERE</span></code> condition is subject to the same
<a href="../abenlogexp_rules" class="blue">comparison rules</a> for incompatible data types. Here, the data types involved determine which operand is converted to which comparison type.</li>

</ul>

<ul>

<li>If the additions <a href="../abapread_table_key" class="blue"><code style="display: inline;"><span class="qtext">WITH TABLE KEY</span></code></a>
and <a href="../abapread_table_free" class="blue"><code style="display: inline;"><span class="qtext">WITH KEY</span></code></a> of the statement
<code style="display: inline;"><span class="qtext">READ</span></code> are used, however, the content of the specified data objects is always converted to the data type of the columns before the comparison.</li>

</ul>

<p>If this produces differing results, an optimization is not possible. Due to the complexity of the comparison rules (particularly for
<a href="../abenlogexp_rules_operands" class="blue">elementary data types</a>, it is not a good idea
to construct a set of rules detailing exactly when the comparison type matches the data type of the left operand. Instead, it is advisable to use only pairs of
<a href="../abencompatible_glosry" class="grey" title="Glossary Entry">compatible</a> operands in the
<code style="display: inline;"><span class="qtext">WHERE</span></code> condition. This guarantees that the differences in behavior of the <code style="display: inline;"><span class="qtext">WHERE</span></code> condition and the key specification do not influence the result.</p>
<p><br style="display: block">
<div markdown="span" class="admonition example">
<p class="admonition-title">Example</p></p>
<p>The following example is largely similar to the example in the section <code style="display: inline;"><span class="qtext">WHERE log_exp</span></code>
in <a href="../abaploop_at_itab_cond" class="blue"><code style="display: inline;"><span class="qtext">LOOP AT itab</span></code></a>. In
that case, access takes place using the primary key and no optimization. Here, however, access takes
place using a secondary table key and a syntax check warning is produced and an exception raised (when the program is executed).</p>
<dd>
<span class="qtext">DATA text_short TYPE c LENGTH 2. <br>DATA text_long&#xA0;&#xA0;TYPE c LENGTH 4. <br>
 <br>DATA itab LIKE TABLE OF text_short <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;WITH UNIQUE HASHED KEY key COMPONENTS table_line. <br>
 <br>text_short = &apos;AA&apos;. <br>text_long&#xA0;&#xA0;= &apos;AAXX&apos;. <br> <br>APPEND text_short TO itab. <br> <br>
LOOP AT itab INTO text_short USING KEY key <br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; WHERE table_line = text_long. <br>
ENDLOOP. <br>WRITE: / &apos;LOOP:&apos;, sy-subrc. <br> <br>READ TABLE itab INTO text_short WITH TABLE KEY key <br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;COMPONENTS table_line = text_long. <br>WRITE: / &apos;READ:&apos;, sy-subrc.</span>
</dd>

</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>