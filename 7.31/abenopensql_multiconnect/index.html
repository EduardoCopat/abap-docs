


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Open SQL - Secondary Database Connections - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#open-sql-secondary-database-connections" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Open SQL - Secondary Database Connections
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="ABAP docs" class="md-nav__link">
      ABAP docs
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setting-up-a-secondary-database-connection" class="md-nav__link">
    Setting Up a Secondary Database Connection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#standard-database-connection" class="md-nav__link">
    Standard Database Connection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-other-database-tables" class="md-nav__link">
    Accessing Other Database Tables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-connections-and-transactions" class="md-nav__link">
    Database Connections and Transactions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interaction-with-native-sql-connections" class="md-nav__link">
    Interaction with Native SQL Connections.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#management-of-database-connections" class="md-nav__link">
    Management of Database Connections
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.31/abenopensql_multiconnect.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="open-sql-secondary-database-connections">Open SQL - Secondary Database Connections</h1>
<p>You can use the <code style="display: inline;"><span class="qtext">CONNECTION</span></code> addition to execute Open SQL commands on databases
other than the R/3 standard database. This gives you a number of possibilities, for example, you can transfer and update data in other databases. It is irrelevant whether the other database belongs to a
<a href="../abensap_nw_abap_glosry" class="grey" title="Glossary Entry">AS ABAP</a>. However, it is
a prerequisite that it is a database system supported by SAP, because only in such a system is the software needed for an Open SQL access available in form of a shared library.</p>
<p><b>7.31</b> <a href="../abenopensql_multiconnect">7.40</a> <a href="../abenopensql_multiconnect">7.54</a></p>
<p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP - Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_language_external_data" class="blue">Processing External Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_sql" class="blue">ABAP - Database Accesses</a>&#xA0;&#x2192;&#xA0;
<a href="../abenopensql" class="blue">Open SQL</a>&#xA0;&#x2192;&#xA0;
<a href="../abenopen_sql_oview" class="blue">Open SQL - Overview</a>&#xA0;</small></p>
<h2 id="setting-up-a-secondary-database-connection">Setting Up a Secondary Database Connection</h2>
<p>To a access another database you need an entry in the table <span class="lnkgrey">DBCON</span> that describes the access data of the database. If the secondary database is from a different manufacturer than the database of the current
<a href="../abensap_nw_abap_glosry" class="grey" title="Glossary Entry">AS ABAP</a>, you will need
the SAP shared library as well as the client software provided by the manufacturer. Information on creating
the DBCON entry and installing the additional software is described in the standard SAP Notes for every supported database system.</p>
<p>OnAS ABAP you can create and change entries in the DBCON database table using the central tool <a href="../abendba_cockpit_glosry" class="grey" title="Glossary Entry">DBA Cockpit</a>.  </p>
<h2 id="standard-database-connection">Standard Database Connection</h2>
<p>Every work process has a standard database connection to the SAP standard database. It is communally
used by all internal sessions. You can also explicitly access this database connection using the name
<code style="display: inline;"><span class="qtext">DEFAULT</span></code>. The <code style="display: inline;"><span class="qtext">DEFAULT</span></code> connection can also be specified
dynamically using <code style="display: inline;"><span class="qtext">CONNECTION (name)</span></code>, where the <code style="display: inline;"><span class="qtext">name</span></code> field must have the value <code style="display: inline;"><span class="qtext">&apos;DEFAULT&apos;</span></code>.  </p>
<h2 id="accessing-other-database-tables">Accessing Other Database Tables</h2>
<p>If you use a database connection to access database tables that are not in the SAP standard database,
there must also be a database table with the same name and identical type in the ABAP Dictionary of
the local AS ABAP. Open SQL assumes that the type information of these &quot;remote&quot; database tables corresponds
exactly with that of the local database table. This prerequisite is essential for the correct interpretation
of the database contents, for example, and, if necessary, their conversion with regards to the ABAP
type of the target fields (see <a href="../abapinto_clause" class="blue"><code style="display: inline;"><span class="qtext">INTO</span></code>
Clause</a>). If this prerequisite is not met, this can lead to wrong data or runtime errors when reading
or writing, depending on the database system. Because the ABAP runtime environment cannot ensure the
consistency of the type descriptions in the local and remote databases, the consistency must be guaranteed by the relevant application program.  </p>
<h2 id="database-connections-and-transactions">Database Connections and Transactions</h2>
<p>Every database connection forms its own transaction context. This means that database changes on one
connection can be saved (using <a href="../abapcommit" class="blue"><code style="display: inline;"><span class="qtext">COMMIT</span></code></a>)
or discarded (using <a href="../abaprollback" class="blue"><code style="display: inline;"><span class="qtext">ROLLBACK</span></code></a>)
independently of changes on other database connections. You can, for example, commit and store protocol data on a secondary database connection without affecting the current
<a href="../abentransaction_glosry" class="grey" title="Glossary Entry">transaction</a> running on the standard SAP database connection.</p>
<p>Secondary database connections are not known outside the limits of an internal session. So, if a program
opens a database connection and then calls another program - with <a href="../abapsubmit" class="blue"><span class="qtext">
SUBMIT</span></a> for example - that opens a connection to the same database, you have two different connections and therefore two different database transactions.</p>
<p>For the first Open SQL commandthat requests a specific database connection, the system opens a corresponding
connection. All subsequent commands (in the same internal session) for the same &quot;remote&quot; database use the same database connection and all form a database transaction. The transaction is ended by:</p>
<li>
A <a href="../abapcommit" class="blue"><code style="display: inline;"><span class="qtext">COMMIT CONNECTION</span></code></a> or <a href="../abaprollback" class="blue"><code style="display: inline;"><span class="qtext">ROLLBACK CONNECTION</span></code></a> on this connection
</li>

<li>
A <a href="../abapcommit" class="blue"><code style="display: inline;"><span class="qtext">COMMIT WORK</span></code></a> or <a href="../abaprollback" class="blue"><code style="display: inline;"><span class="qtext">ROLLBACK WORK</span></code></a>
</li>

<li>
A <a href="../abendatabase_commit_glosry" class="grey" title="Glossary Entry">database commit</a> or
<a href="../abendatabase_rollback_glosry" class="grey" title="Glossary Entry">database rollback</a> on this database connection in <a href="../abennativesql" class="blue">Native SQL</a>,
</li>

<li>
An implicit commit by a screen change, specifically the statements <a href="../abapcall_screen" class="blue"><span class="qtext">
CALL SCREEN</span></a>, <a href="../abapcall_dialog" class="blue"><code style="display: inline;"><span class="qtext">CALL DIALOG</span></code></a>,
<a href="../abapcall_transaction" class="blue"><code style="display: inline;"><span class="qtext">CALL TRANSACTION</span></code></a>, <a href="../abapmessage" class="blue"><code style="display: inline;"><span class="qtext">MESSAGE</span></code></a>
</li>

<li>
A Remote Function Call <a href="../abenremote_function_call_glosry" class="grey" title="Glossary Entry">RFC</a>,
specifically the statements <a href="../abapcall_function_destination" class="blue"><span class="qtext">CALL
FUNCTION ... DESTINATION</span></a>, <a href="../abapcall_function_starting" class="blue"><span class="qtext">CALL
FUNCTION ... STARTING NEW TASK</span></a>, <a href="../abapcall_function_background" class="blue"><span class="qtext">
CALL FUNCTION ... IN BACKGROUND</span></a>, and <a href="../abapwait_until" class="blue"><code style="display: inline;"><span class="qtext">WAIT UNTIL</span></code></a>.

</li>

<p>In summary, a database transaction is completed at the latest, when the application program reaches a state in which a change of work process could occur.</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>Working with parallel database connections, that is parallel transactions, can lead to lock situations
that only one work process is involved in: A program changes a database row on the first connection
and tries to change the same row on a second connection. This will result in the program waiting for
the lock of the first transaction, without this first transaction ever being able to continue. You can
only resolve this situation by ending the work process. This is done automatically for dialog processes,
but must be done manually for background jobs. You should therefore not change the same table in one program on multiple database connections.  </p>
</div>

<h2 id="interaction-with-native-sql-connections">Interaction with Native SQL Connections.</h2>
<p>In addition to the above, you can also explicitly open a connection using a <code style="display: inline;"><span class="qtext">CONNECT</span></code> with
<a href="../abennativesql" class="blue">Native SQL</a>. Native SQL also allows you to explicitly close
and disconnect a database connection using <code style="display: inline;"><span class="qtext">DISCONNECT</span></code>. In this case, the
database transaction in question is closed and corresponding database changes are discarded. You can
use the Native SQL command <code style="display: inline;"><span class="qtext">GET CONNECTION</span></code> to ascertain the current Native
SQL connection. With Native SQL you can also access a connection that was opened with Open SQL. In this
case it is sufficient to convert the active Native SQL connection using <code style="display: inline;"><span class="qtext">SET CONNECTION</span></code>. It is not necessary to open it using <code style="display: inline;"><span class="qtext">CONNECT TO</span></code>.  </p>
<h2 id="management-of-database-connections">Management of Database Connections</h2>
<p>The database connections are automatically managed by the runtime system. If a transaction is saved on a database connection
(<a href="../abapcommit" class="blue"><code style="display: inline;"><span class="qtext">COMMIT</span></code></a>) or rolled back
(<a href="../abaprollback" class="blue"><code style="display: inline;"><span class="qtext">ROLLBACK</span></code></a>), it can be reused
by the runtime system. You can open a maximum of 10 database connections for each work process. On certain databases, you may not be able to reach this number.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../abenopensql_exceptions/" title="Exceptions in Open SQL" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Exceptions in Open SQL
              </div>
            </div>
          </a>
        
        
          <a href="../abenopensql_unicode/" title="Open SQL in Unicode Programs" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Open SQL in Unicode Programs
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>