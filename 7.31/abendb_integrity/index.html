


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Database Integrity - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#database-integrity" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Database Integrity
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="ABAP docs" class="md-nav__link">
      ABAP docs
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#semantic-integrity" class="md-nav__link">
    Semantic Integrity
  </a>
  
    <nav class="md-nav" aria-label="Semantic Integrity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inconsistentincomplete" class="md-nav__link">
    inconsistentincomplete
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#relational-integrity" class="md-nav__link">
    Relational Integrity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operational-integrity" class="md-nav__link">
    Operational Integrity
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.31/abendb_integrity.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="database-integrity">Database Integrity</h1>
<p>A database is a model of part of the real world. It should be consistent and its contents should match
the section of reality it is modeling. Data integrity is one of the most important aspects to be taken into consideration when programming application software. You distinguish between the following:  </p>
<ul class="circlem2">

<li><span class="bold">Semantic Integrity</span></li>

</ul>

<ul class="circlem2">

<li><span class="bold">Relational Integrity</span></li>

</ul>

<ul class="circlem2">

<li><span class="bold">Operational Integrity</span></li>

</ul>

<p><b>7.31</b> <s><i>7.40</i></s> <s><i>7.54</i></s></p>
<p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_reference" class="blue">ABAP - Reference</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_language_external_data" class="blue">Processing External Data</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_sql" class="blue">ABAP - Database Accesses</a>&#xA0;&#x2192;&#xA0;
<a href="../abendbtab_oview" class="blue">Databases - Overview</a>&#xA0;</small></p>
<h2 id="semantic-integrity">Semantic Integrity</h2>
<h3 id="inconsistentincomplete">inconsistentincomplete</h3>
<p>In many database systems, you can check semantic integrity conditions with constraints or triggers. However, since these methods are not used in an
<a href="../abensap_nw_abap_glosry" class="grey" title="Glossary Entry">AS ABAP</a>  due to their lack
of standardization; programmers of application programs must therefore verify in an AS ABAP the semantic integrity of the database.</p>
<p>As the flight reservation example shows, the data is usually in an inconsistent or incomplete state in the course of a
<a href="../abentransaction_glosry" class="grey" title="Glossary Entry">transaction</a>. For this reason,
programmers need to be able to confirm the end of the transaction and thus the restoration of the semantic integrity of the data. This is achieved through the
<a href="../abendatabase_commit_glosry" class="grey" title="Glossary Entry">database commit</a>.</p>
<h2 id="relational-integrity">Relational Integrity</h2>
<p>Relational integrity refers to the observation of the integrity rules governing the relational model.
Since data modeling in the AS ABAP is based on the relational data model, these rules must be observed. They include:  </p>
<ul class="circlem2">

<li>Primary key integrity <br> <br>Each database object must be uniquely identified by a <a href="../abenprimary_key_glosry" class="grey" title="Glossary Entry">primary key</a>. <br>
Contrary to relational theory, you can create tables without a primary key in most database systems.
In the ABAP/4 Dictionary, each table must have a primary key. For this reason, primary key integrity is automatic. <br></li>

</ul>

<ul class="circlem2">

<li>Value range integrity <br> <br>Each value of a table field must exist in the value range of this
field. In a flight reservation system, for example, you must be able to distinguish between private
and business customers. This means that the field &apos;Business/private customer&apos; can contain only the value
<code style="display: inline;"><span class="qtext">&apos;B&apos;</span></code> (for &apos;business customer&apos;) or <code style="display: inline;"><span class="qtext">&apos;P&apos;</span></code> (for &quot;private customer&quot;). <br>
In most database systems, you can specify value ranges as constraints when defining a table field. The
database system then automatically prevents the occurrence of an invalid value in a database table.
However, although these methods are not used in the AS ABAP, you can define value ranges in the ABAP Dictionary for both domains and database fields, and use them to guarantee the integrity of the database. In
<a href="../abendialog_transaction_glosry" class="grey" title="Glossary Entry">dialog transactions</a>, the system uses this knowledge to check user input and to display possible entries. <br></li>

</ul>

<ul class="circlem2">

<li>Foreign key integrity (referential integrity) <br> <br>Every
<a href="../abenforeign_key_glosry" class="grey" title="Glossary Entry">foreign key</a> must refer
to an existing primary key. In a flight reservation system, for example, the contents of the field &apos;Airline carrier&apos; must exist in the airline carriers table for each flight. <br>
In most database systems, you can specify <a href="../abenforeign_key_dependency_glosry" class="grey" title="Glossary Entry">
foreign key relationships</a> as a constraint when defining a table. The database system then automatically
prevents the occurrence of an invalid line in a database table. However, although these methods are
not used in the AS ABAP, you can define foreign key relationships between tables in the ABAP Dictionary
and use them to guarantee the integrity of the database. In dialog transactions, the system uses this knowledge to check user input and to display possible entries.</li>

</ul>

<h2 id="operational-integrity">Operational Integrity</h2>
<p>Operational integrity guarantees protection for the dataset against inconsistencies caused by several
users attempting to gain access at the same time. The necessity for this is demonstrated by the next example, where clerks S1 and S2 want to make a booking in the flight reservation system at the same time. <br></p>
<ul class="circlem2">

<li>S1 reads the line of the planned flight from the flights table. The value &apos;Occupied seats&apos; is less than the value &apos;Maximum number of seats&apos;.</li>

</ul>

<ul class="circlem2">

<li>S2 reads the line of the planned flight from the flights table. The value &apos;Occupied seats&apos; is less than the value &apos;Maximum number of seats&apos;.</li>

</ul>

<ul class="circlem2">

<li>S1 makes a new flight reservation.</li>

</ul>

<ul class="circlem2">

<li>S1 increases &apos;Occupied seats&apos; by 1.</li>

</ul>

<ul class="circlem2">

<li>S2 makes a new flight reservation.</li>

</ul>

<ul class="circlem2">

<li>S2 increases &apos;Occupied seats&apos; by 1.</li>

</ul>

<p>Since both clerks find the same value in the field &apos;Occupied seats&apos;, the flight can be overbooked.</p>
<p>Database systems guarantee operational integrity automatically by enqueueing competing accesses. This process is achieved through
<a href="../abendatabase_lock_glosry" class="grey" title="Glossary Entry">database locking</a>, which can be demonstrated by the following variant of the above example: <br></p>
<ul class="circlem2">

<li>S1 reads the line of the planned flight from the flights table with the intention to change. The value of &apos;Occupied seats&apos; is less than the value of &apos;Maximum number of seats&apos;.</li>

</ul>

<ul class="circlem2">

<li>S2 reads the line of the planned flight from the flights table with the intention to change. Since the line is locked by S1, S2 must wait.</li>

</ul>

<ul class="circlem2">

<li>S1 makes a new flight reservation.</li>

</ul>

<ul class="circlem2">

<li>S1 increases &apos;Occupied seats&apos; by 1.</li>

</ul>

<ul class="circlem2">

<li>S1 ends the LUW (Logical Unit of Work) and thus releases the database locks.</li>

</ul>

<ul class="circlem2">

<li>S1 can now access the line of the planned flight from the flights table. The value of &apos;Occupied seats&apos; is less then the value of &apos;Maximum number of seats&apos;.</li>

</ul>

<ul class="circlem2">

<li>S2 makes a new flight reservation.</li>

</ul>

<ul class="circlem2">

<li>S2 increases &apos;Occupied seats&apos; by 1.</li>

</ul>

<ul class="circlem2">

<li>S2 ends the LUW (Logical Unit of Work) and thus releases the database locks.</li>

</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../abendb_copy_abexa/" title="Locator, Copy Column" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Locator, Copy Column
              </div>
            </div>
          </a>
        
        
          <a href="../abendb_locator_abexa/" title="Locator, Access to Column Content" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Locator, Access to Column Content
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>